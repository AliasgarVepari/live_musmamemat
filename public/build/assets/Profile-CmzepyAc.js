import{d as sa,n as ds,r as l,j as e,e as ms,g as aa,h as ta,E as ra,c as W,m as ia,l as la,u as Ge,H as Ye,b as f}from"./app-CQQZ9fum.js";import{a as $,B as m,b as xs,H as Je,F as Ze,A as na,D as ne,c as Qe,d as oe,e as ce,f as de,L as S,I as O,T as oa,g as ca,h as me,i as xe,R as Xe,j as ye}from"./Header-UG2F-VAI.js";import{Z as da,T as es,P as ma}from"./ProductDetails-BL6McDq7.js";import{C as v,a as b,b as Q,c as X}from"./card-CsnqUACk.js";import{C as xa}from"./check-Bcy343Yk.js";import{S as ss}from"./star-BkEVtgn6.js";import{C as je}from"./crown-CB6iPXXa.js";import{e as hs,R as ha,T as pa,P as ua,W as ga,C as fa,b as ja,D as va,a as ps,O as Na}from"./index-QxE9D8ey.js";import{A as ba,a as _a,b as ya}from"./avatar-DXB4NALh.js";import{u as wa}from"./useQuery-Un6wqNV3.js";import{u as Ca}from"./use-favorites-DdMXbSb9.js";import{U as as}from"./user-layout-Bk9ru7SK.js";import{A as Da}from"./arrow-left-BIcfyqFZ.js";import{S as Sa}from"./shield-TIDj9Y6m.js";import{S as fe}from"./square-pen-Ck1ZQI2n.js";import{U as Aa}from"./user-DhLhZTdl.js";import{H as z}from"./heart-FPTOip-w.js";import{P as ee}from"./package-DFoFboWT.js";import{C as ts}from"./credit-card-eplt8b39.js";import{S as Pa,L as Ea}from"./settings-7FCWWGTC.js";import{T as he}from"./trending-up-C2nc0jEb.js";import{C as rs}from"./clock-CGTQwE7r.js";import{E as is}from"./eye-DvV0wWv9.js";import{T as ls}from"./trash-2-byK11b-6.js";import"./phone-BQ_9eJRs.js";import"./index-BlE3e8Ui.js";import"./index-DMnYIcAC.js";import"./index-kp_sv2kj.js";import"./index-BmCAUkH5.js";import"./loader-circle-jBw-tszX.js";import"./search-b9wWrPO0.js";import"./select-B_6uS0zp.js";import"./index-C5LkcFn4.js";import"./index-BdQq_4o_.js";import"./index-Cf1Suwxf.js";import"./plus-BZaE3AxB.js";import"./upload-CRsWYcLi.js";import"./index-j6UNAcRl.js";import"./use-forced-theme-CyV_QBBk.js";/* empty css            *//**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ns=sa("CircleCheck",$a),ka=({currentSubscription:t,onPlanSelect:o,selectedPlanId:n,onUpgrade:h,isUpgrading:p=!1})=>{const{language:i}=ds(),[y,a]=l.useState([]),[_,w]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const d=localStorage.getItem("authToken");if(!d)return;const C=await(await fetch("/api/user/subscription-plans/upgrade-options-for-profile",{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}})).json();C.success&&a(C.data||[])}catch(d){console.error("Error loading upgrade plans:",d)}finally{w(!1)}})()},[t]);const q=r=>{o(r)},ae=()=>{n&&h(n)},G=r=>i==="ar"?r.name_ar:r.name_en,k=r=>{const d=[];return r.ad_limit>0&&(i==="ar"?d.push(`${r.ad_limit} إعلان شهرياً`):d.push(`${r.ad_limit} ads per month`)),r.has_unlimited_featured_ads?i==="ar"?d.push("إعلانات مميزة غير محدودة"):d.push("Unlimited featured ads"):r.featured_ads_count&&r.featured_ads_count>0&&(i==="ar"?d.push(`${r.featured_ads_count} إعلان مميز`):d.push(`${r.featured_ads_count} featured ads`)),r.priority_support&&(i==="ar"?d.push("دعم أولوي"):d.push("Priority support")),r.analytics&&(i==="ar"?d.push("تحليلات متقدمة"):d.push("Advanced analytics")),r.readable_billing_cycle&&(i==="ar"?d.push(`دورة فوترة: ${r.readable_billing_cycle}`):d.push(`Billing: ${r.readable_billing_cycle}`)),r.is_lifetime&&(i==="ar"?d.push("اشتراك مدى الحياة"):d.push("Lifetime subscription")),d.length===0&&(i==="ar"?(d.push("إعلانات أساسية"),d.push("دعم قياسي")):(d.push("Basic listings"),d.push("Standard support"))),d},B=r=>{const d=G(r).toLowerCase();return d.includes("free")||d.includes("مجاني")?da:d.includes("silver")||d.includes("فضي")?ss:d.includes("gold")||d.includes("ذهبي")?je:ss};return _?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:i==="ar"?"font-arabic":"",children:i==="ar"?"جاري تحميل خطط الترقية...":"Loading upgrade plans..."})]})}):e.jsxs("div",{className:`flex flex-col h-full ${i==="ar"?"rtl":"ltr"}`,children:[e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:`text-lg font-semibold mb-3 ${i==="ar"?"font-arabic":""}`,children:i==="ar"?"خطة الاشتراك الحالية":"Current Subscription Plan"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-medium text-lg ${i==="ar"?"font-arabic":""}`,children:i==="ar"?t.plan.name_ar:t.plan.name_en}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx("p",{className:`text-sm text-muted-foreground ${i==="ar"?"font-arabic":""}`,children:i==="ar"?`${t.plan.ad_limit||"N/A"} إعلان شهرياً`:`${t.plan.ad_limit||"N/A"} ads per month`}),e.jsxs("p",{className:`text-sm font-medium ${i==="ar"?"font-arabic":""}`,children:["KD ",t.plan.price]})]})]}),e.jsx($,{variant:"outline",className:"ml-4",children:i==="ar"?"نشط":"Active"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(r=>{B(r);const d=n===r.id,H=k(r);return e.jsx(v,{className:`flex flex-col h-full cursor-pointer transition-all hover:shadow-lg ${d?"ring-2 ring-primary border-primary":"hover:border-primary/50"}`,onClick:()=>q(r.id),children:e.jsxs(b,{className:"p-6 flex flex-col h-full",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h4",{className:`text-lg font-semibold mb-1 ${i==="ar"?"font-arabic":""}`,children:G(r)}),(r.description_en||r.description_ar)&&e.jsx("p",{className:`text-sm text-muted-foreground mb-3 ${i==="ar"?"font-arabic":""}`,children:i==="ar"?r.description_ar:r.description_en}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.plan.is_lifetime?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:`text-2xl font-bold ${i==="ar"?"font-arabic":""}`,children:r.price===0?i==="ar"?"مجاني":"Free":`KD ${r.price}`}),e.jsx($,{variant:"outline",className:"mt-1 text-xs",children:i==="ar"?"لا يوجد خصم للخطط الدائمة":"No discount for lifetime plans"})]}):r.discounted_price!==void 0&&r.original_price!==void 0&&r.discounted_price<r.original_price?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-2xl font-bold text-green-600 ${i==="ar"?"font-arabic":""}`,children:["KD ",r.discounted_price.toFixed(2)]}),e.jsxs("span",{className:`text-lg line-through text-muted-foreground ${i==="ar"?"font-arabic":""}`,children:["KD ",r.original_price]})]}),e.jsx($,{variant:"destructive",className:"mt-1",children:i==="ar"?`وفر KD ${r.discount_amount?.toFixed(2)}`:`Save KD ${r.discount_amount?.toFixed(2)}`})]}):e.jsx("span",{className:`text-2xl font-bold ${i==="ar"?"font-arabic":""}`,children:r.price===0?i==="ar"?"مجاني":"Free":`KD ${r.price}`}),r.price>0&&e.jsx("span",{className:`text-sm text-muted-foreground ${i==="ar"?"font-arabic":""}`,children:r.is_lifetime?i==="ar"?"مدى الحياة":"Lifetime":`/${r.months_count} ${i==="ar"?"شهر":"months"}`})]}),r.price>0&&e.jsx($,{variant:"secondary",className:"mb-4",children:i==="ar"?"مدفوع":"Paid"})]}),H.length>0&&e.jsx("ul",{className:"space-y-2 flex-1",children:H.map((C,g)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(xa,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:`text-sm ${i==="ar"?"font-arabic":""}`,children:C.trim()})]},g))}),e.jsx(m,{className:`w-full mt-4 ${d?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-primary hover:text-primary-foreground"}`,variant:d?"default":"outline",children:d?i==="ar"?"محدد":"Selected":i==="ar"?"اختر هذه الخطة":"Select This Plan"})]})},r.id)})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:`text-sm text-muted-foreground ${i==="ar"?"font-arabic":""}`,children:i==="ar"?"سيتم حساب الخصم بناءً على الأيام المتبقية في اشتراكك الحالي":"Discount will be calculated based on remaining days in your current subscription"})}),n&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx(m,{onClick:ae,disabled:p,className:"w-full max-w-md",size:"lg",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),i==="ar"?"جاري الترقية...":"Upgrading..."]}):i==="ar"?"ترقية الاشتراك":"Upgrade Subscription"})})]})};var us="AlertDialog",[Fa,Wt]=aa(us,[hs]),U=hs(),gs=t=>{const{__scopeAlertDialog:o,...n}=t,h=U(o);return e.jsx(ha,{...h,...n,modal:!0})};gs.displayName=us;var Ta="AlertDialogTrigger",fs=l.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...h}=t,p=U(n);return e.jsx(pa,{...p,...h,ref:o})});fs.displayName=Ta;var Ia="AlertDialogPortal",js=t=>{const{__scopeAlertDialog:o,...n}=t,h=U(o);return e.jsx(ua,{...h,...n})};js.displayName=Ia;var Ra="AlertDialogOverlay",vs=l.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...h}=t,p=U(n);return e.jsx(Na,{...p,...h,ref:o})});vs.displayName=Ra;var se="AlertDialogContent",[La,Oa]=Fa(se),Ua=ra("AlertDialogContent"),Ns=l.forwardRef((t,o)=>{const{__scopeAlertDialog:n,children:h,...p}=t,i=U(n),y=l.useRef(null),a=ms(o,y),_=l.useRef(null);return e.jsx(ga,{contentName:se,titleName:bs,docsSlug:"alert-dialog",children:e.jsx(La,{scope:n,cancelRef:_,children:e.jsxs(fa,{role:"alertdialog",...i,...p,ref:a,onOpenAutoFocus:ta(p.onOpenAutoFocus,w=>{w.preventDefault(),_.current?.focus({preventScroll:!0})}),onPointerDownOutside:w=>w.preventDefault(),onInteractOutside:w=>w.preventDefault(),children:[e.jsx(Ua,{children:h}),e.jsx(za,{contentRef:y})]})})})});Ns.displayName=se;var bs="AlertDialogTitle",_s=l.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...h}=t,p=U(n);return e.jsx(ja,{...p,...h,ref:o})});_s.displayName=bs;var ys="AlertDialogDescription",ws=l.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...h}=t,p=U(n);return e.jsx(va,{...p,...h,ref:o})});ws.displayName=ys;var Ma="AlertDialogAction",Cs=l.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...h}=t,p=U(n);return e.jsx(ps,{...p,...h,ref:o})});Cs.displayName=Ma;var Ds="AlertDialogCancel",Ss=l.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...h}=t,{cancelRef:p}=Oa(Ds,n),i=U(n),y=ms(o,p);return e.jsx(ps,{...i,...h,ref:y})});Ss.displayName=Ds;var za=({contentRef:t})=>{const o=`\`${se}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${se}\` by passing a \`${ys}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${se}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(o)},[o,t]),null},Wa=gs,Ba=fs,Ha=js,As=vs,Ps=Ns,Es=Cs,$s=Ss,ks=_s,Fs=ws;const os=Wa,cs=Ba,Ka=Ha,Ts=l.forwardRef(({className:t,...o},n)=>e.jsx(As,{className:W("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...o,ref:n}));Ts.displayName=As.displayName;const we=l.forwardRef(({className:t,...o},n)=>e.jsxs(Ka,{children:[e.jsx(Ts,{}),e.jsx(Ps,{ref:n,className:W("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o})]}));we.displayName=Ps.displayName;const Ce=({className:t,...o})=>e.jsx("div",{className:W("flex flex-col space-y-2 text-center sm:text-left",t),...o});Ce.displayName="AlertDialogHeader";const De=({className:t,...o})=>e.jsx("div",{className:W("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...o});De.displayName="AlertDialogFooter";const Se=l.forwardRef(({className:t,...o},n)=>e.jsx(ks,{ref:n,className:W("text-lg font-semibold",t),...o}));Se.displayName=ks.displayName;const Ae=l.forwardRef(({className:t,...o},n)=>e.jsx(Fs,{ref:n,className:W("text-sm text-muted-foreground",t),...o}));Ae.displayName=Fs.displayName;const Pe=l.forwardRef(({className:t,...o},n)=>e.jsx(Es,{ref:n,className:W(xs(),t),...o}));Pe.displayName=Es.displayName;const Ee=l.forwardRef(({className:t,...o},n)=>e.jsx($s,{ref:n,className:W(xs({variant:"outline"}),"mt-2 sm:mt-0",t),...o}));Ee.displayName=$s.displayName;const Va=({endpoint:t,initialPage:o=1,initialPerPage:n="20",initialSearch:h="",initialFilters:p={},staleTime:i=120*1e3,gcTime:y=300*1e3})=>{const[a,_]=l.useState({currentPage:o,perPage:n,search:h,filters:p}),[w,q]=l.useState(!1),ae=["user",t,a],G=l.useCallback(async()=>{q(!0);try{const g=new URLSearchParams;g.append("page",a.currentPage.toString()),g.append("per_page",a.perPage),a.search&&g.append("search",a.search),Object.entries(a.filters).forEach(([F,pe])=>{pe&&pe!=="all"&&g.append(F,pe)});const j=await fetch(`${t}?${g.toString()}`);if(!j.ok)throw new Error("Failed to fetch data");return await j.json()}finally{q(!1)}},[t,a]),k=wa({queryKey:ae,queryFn:G,staleTime:i,gcTime:y,refetchOnWindowFocus:!1,retry:1}),B=l.useCallback(g=>{_(j=>({...j,currentPage:g}))},[]),r=l.useCallback(g=>{_(j=>({...j,perPage:g,currentPage:1}))},[]),d=l.useCallback(g=>{_(j=>({...j,search:g,currentPage:1}))},[]),H=l.useCallback(g=>{_(j=>({...j,filters:g,currentPage:1}))},[]),C=l.useCallback((g,j)=>{_(te=>({...te,filters:{...te.filters,[g]:j},currentPage:1}))},[]);return{data:k.data,isLoading:k.isLoading||w,isError:k.isError,error:k.error,paginationState:a,goToPage:B,setPerPage:r,setSearch:d,setFilters:H,updateFilter:C,refetch:k.refetch}};function Bt({user:t,requiresAuth:o,stats:n,recentListings:h,recentWishlist:p,subscriptionPlans:i,transactions:y}){const{language:a,toggleLanguage:_}=ds(),{isAuthenticated:w,logout:q}=ia(),[ae,G]=l.useState("overview"),[k,B]=l.useState(!1),[r,d]=l.useState({email:!0,sms:!1,push:!0}),[H,C]=l.useState(!1),[g,j]=l.useState(!1),[te,F]=l.useState(!1),[pe,qa]=l.useState(null),[$e,ke]=l.useState(void 0),[Is,Fe]=l.useState(!1),[Ga,Ya]=l.useState(null),[D,re]=l.useState(null),[Rs,ve]=l.useState(!1),[Ls,Os]=l.useState(""),[Us,Ne]=l.useState(!1),[Ms,zs]=l.useState(""),[Te,Ja]=l.useState(h||[]),[Y,Ws]=l.useState(p||[]),[u,J]=l.useState({}),[Bs,T]=l.useState(!1),{toggleFavorite:Hs}=Ca(),{addToast:Ie}=la(),{data:Re,paginationState:ie,goToPage:Ks,refetch:A}=Va({endpoint:"/profile/listings",initialPage:1,initialPerPage:"5",initialSearch:"",initialFilters:{}}),ue=Re?.data||h||[],P=Re,Le=s=>{const c=window.scrollY;Ks(s),setTimeout(()=>{window.scrollTo(0,c)},100)},Vs=s=>{console.log("Updating edit form data:",s),J(c=>{const N={...c,...s};return console.log("New edit form data:",N),N})};l.useEffect(()=>{console.log("Edit form data changed:",u)},[u]);const qs=async s=>{try{await Hs(s),Ws(c=>c?.filter(N=>N.id!==s)||[])}catch(c){console.error("Error removing from wishlist:",c)}},{data:K,setData:I,post:Gs,processing:Za}=Ge({name_en:"",name_ar:"",email:"",phone:"",phone_whatsapp:"",bio_en:"",bio_ar:"",governorate_id:""});l.useEffect(()=>{t&&I({name_en:t.name_en||"",name_ar:t.name_ar||"",email:t.email||"",phone:t.phone||"",phone_whatsapp:t.phone_whatsapp||"",bio_en:t.bio_en||"",bio_ar:t.bio_ar||"",governorate_id:t.governorate?.id?.toString()||""})},[t,I]);const{data:Qa,setData:Xa,post:et,processing:st}=Ge({plan_id:$e||0}),Ys=()=>{Gs("/profile",{onSuccess:()=>{C(!1)}})},Js=async s=>{Fe(!0);try{const c=localStorage.getItem("authToken");if(!c)throw new Error("No authentication token found");const R=await(await fetch("/api/user/subscription/upgrade-from-profile",{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({subscription_plan_id:s})})).json();if(R.success)j(!1),ke(void 0),Ie({type:"success",title:a==="ar"?"تم ترقية الاشتراك":"Subscription Upgraded",message:a==="ar"?"تم ترقية الاشتراك بنجاح":"Subscription upgraded successfully"}),window.location.reload();else throw new Error(R.message||"Upgrade failed")}catch(c){console.error("Upgrade failed:",c),Ie({type:"error",title:a==="ar"?"فشل في الترقية":"Upgrade Failed",message:a==="ar"?"فشل في ترقية الاشتراك":"Failed to upgrade subscription"})}finally{A(),Fe(!1)}},Oe=s=>{f.delete(`/profile/ads/${s}`,{onSuccess:()=>{A()},onError:c=>{console.error("Failed to delete ad:",c)}})},Ue=s=>{f.put(`/profile/ads/${s}`,{status:"expired"},{onSuccess:()=>{A()},onError:c=>{console.error("Failed to expire ad:",c)}})},Me=s=>{f.put(`/profile/ads/${s}`,{status:"active"},{onSuccess:()=>{A()},onError:c=>{console.error("Failed to reactivate ad:",c)}})},ze=s=>{f.put(`/profile/ads/${s}`,{status:"sold"},{onSuccess:()=>{A()},onError:c=>{console.error("Failed to mark ad as sold:",c)}})},We=s=>{let c="";s.status==="inactive"?c=a==="ar"?"تم إلغاء تفعيل هذا الإعلان. يرجى التواصل مع الدعم الفني لإعادة تفعيله.":"This ad has been deactivated. Please contact support to reactivate it.":s.status==="expired"?c=a==="ar"?"انتهت صلاحية هذا الإعلان. يرجى التواصل مع الدعم الفني لإعادة تفعيله.":"This ad has expired. Please contact support to reactivate it.":c=a==="ar"?"هذا الإعلان غير نشط حالياً. يرجى التواصل مع الدعم الفني لإعادة تفعيله.":"This ad is currently inactive. Please contact support to reactivate it.",zs(c),Ne(!0)},Be=s=>{f.post(`/profile/ads/${s}/feature`,{},{preserveScroll:!0,onSuccess:()=>{A()},onError:c=>{console.error("Failed to feature ad:",c)}})},He=s=>{if(console.log("Editing ad:",s),s.status==="draft"){const N={category_id:s.category_id,title_en:s.title_en,title_ar:s.title_ar,description_en:s.description_en,description_ar:s.description_ar,product_details_en:s.product_details_en||"",product_details_ar:s.product_details_ar||"",condition_id:s.condition_id,governorate_id:s.governorate_id,price:s.price?.toString()||"",price_type_id:s.price_type_id,is_negotiable:s.is_negotiable||!1,images:s.images?.map(x=>x.url)||[],draftAdId:s.id,current_step:s.current_step||1};localStorage.setItem("sell-draft",JSON.stringify(N));const R={1:"category",2:"details",3:"subscription",4:"submitted"},_e=s.current_step||1,le=R[_e]||"details";f.visit(`/sell/${le}`);return}re(s);const c={category_id:s.category_id,title_en:s.title_en,title_ar:s.title_ar,description_en:s.description_en,description_ar:s.description_ar,product_details_en:s.product_details_en||"",product_details_ar:s.product_details_ar||"",condition_id:s.condition_id,governorate_id:s.governorate_id,price:s.price?.toString()||"",price_type_id:s.price_type_id,is_negotiable:s.is_negotiable||!1,images:s.images?.map(N=>N.url)||[]};console.log("Form data:",c),J(c),F(!0)},Zs=()=>{if(!D)return;T(!0);const s={category_id:u.category_id,title_en:u.title_en,title_ar:u.title_ar,description_en:u.description_en,description_ar:u.description_ar,product_details_en:u.product_details_en,product_details_ar:u.product_details_ar,condition_id:u.condition_id,governorate_id:u.governorate_id,price:u.price,price_type_id:u.price_type_id,is_negotiable:u.is_negotiable?"1":"0"};D.is_approved===!1&&(s.is_approved=null);const c=u.images&&u.images.some(x=>typeof x=="string"&&x.startsWith("data:image/")),N=!u.images||u.images.length===0,R=D.images?.map(x=>x.id)||[],_e=u.images?.filter(x=>typeof x=="object"&&"id"in x).map(x=>x.id)||[],le=R.filter(x=>!_e.includes(x));if(console.log(c,"hasNewImages"),c){const x=new FormData;Object.entries(s).forEach(([E,L])=>{L!=null&&x.append(E,L.toString())}),le.forEach((E,L)=>{x.append(`removed_images[${L}]`,E.toString())});let V=0;u.images?.forEach(E=>{if(typeof E=="string"&&E.startsWith("data:image/")){const L=atob(E.split(",")[1]),Ke=E.split(",")[0].split(":")[1].split(";")[0],Ve=new ArrayBuffer(L.length),Xs=new Uint8Array(Ve);for(let ge=0;ge<L.length;ge++)Xs[ge]=L.charCodeAt(ge);const ea=new Blob([Ve],{type:Ke}),qe=new File([ea],`image_${V}.jpg`,{type:Ke});x.append(`images[${V}]`,qe),V++,console.log("Added image:",qe)}}),x.append("_method","PUT"),f.post(`/profile/ads/${D.id}`,x,{forceFormData:!0,onSuccess:()=>{T(!1),A(),F(!1),re(null),J({})},onError:E=>{T(!1),console.error("Failed to update ad:",E)}})}else if(N&&D.images&&D.images.length>0){const x={...s,clear_images:!0};f.put(`/profile/ads/${D.id}`,x,{onSuccess:()=>{T(!1),A(),F(!1),re(null),J({})},onError:V=>{T(!1),console.error("Failed to update ad:",V)}})}else if(le.length>0){const x={...s,removed_images:le};f.put(`/profile/ads/${D.id}`,x,{onSuccess:()=>{T(!1),A(),F(!1),re(null),J({})},onError:V=>{T(!1),console.error("Failed to update ad:",V)}})}else f.put(`/profile/ads/${D.id}`,s,{onSuccess:()=>{T(!1),A(),F(!1),re(null),J({})},onError:x=>{T(!1),console.error("Failed to update ad:",x)}})},M=s=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:0}).format(s),Z=()=>!(!t?.subscription?.is_active||!t.subscription.plan.analytics),Qs=s=>s.status==="draft"?"draft":s.status==="active"&&s.is_approved===null?"pending":s.status==="active"&&s.is_approved===!1?"rejected":s.status==="active"&&s.is_approved===!0?"active":s.status,be=s=>{const c=Qs(s),N={active:{color:"bg-green-100 text-green-800",text:a==="ar"?"نشط":"Active"},inactive:{color:"bg-gray-100 text-gray-800",text:a==="ar"?"غير نشط":"Inactive"},sold:{color:"bg-blue-100 text-blue-800",text:a==="ar"?"مباع":"Sold"},expired:{color:"bg-yellow-100 text-yellow-800",text:a==="ar"?"منتهي":"Expired"},draft:{color:"bg-gray-100 text-gray-800",text:a==="ar"?"مسودة":"Draft"},pending:{color:"bg-yellow-100 text-yellow-800",text:a==="ar"?"قيد المراجعة":"Under Review"},rejected:{color:"bg-red-100 text-red-800",text:a==="ar"?"مرفوض":"Rejected"}},R=N[c]||N.inactive;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:R.color,children:R.text}),c==="rejected"&&s.reject_reason&&e.jsx(m,{variant:"outline",size:"sm",onClick:()=>{Os(s.reject_reason||""),ve(!0)},className:"text-xs",children:a==="ar"?"عرض السبب":"View Reason"})]})};if(o&&!w)return e.jsxs(as,{children:[e.jsx(Ye,{title:"Profile"}),e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(Je,{}),e.jsx("main",{className:"main-content py-16",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"mb-4 text-3xl font-bold",children:"Authentication Required"}),e.jsx("p",{className:"mb-6 text-gray-600",children:"Please log in to view your profile."}),e.jsx(m,{onClick:()=>B(!0),children:"Login"})]})})}),e.jsx(Ze,{})]}),e.jsx(na,{isOpen:k,onClose:()=>B(!1),onSuccess:()=>{B(!1),window.location.reload()}})]});if(!t){f.visit("/");return}return e.jsxs(as,{children:[e.jsx(Ye,{title:"Profile"}),e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(Je,{}),e.jsx("main",{className:"main-content py-16",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:`mb-8 ${a==="ar"?"rtl":""}`,children:[e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:()=>f.visit("/"),className:"group relative inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gray-100 hover:bg-gray-200 active:bg-gray-300 transition-all duration-200 shadow-sm hover:shadow-md active:scale-95","aria-label":a==="ar"?"العودة للرئيسية":"Go to Home",children:[e.jsx(Da,{className:"h-4 w-4 text-gray-600 group-hover:text-gray-700 transition-colors"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-800 transition-colors",children:a==="ar"?"الرئيسية":"Home"}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-gray-300 opacity-0 group-active:opacity-20 transition-opacity duration-150"})]})}),e.jsxs("div",{className:"flex flex-col items-start gap-6 md:flex-row md:items-center",children:[e.jsxs(ba,{className:"h-24 w-24",children:[e.jsx(_a,{src:t.profile_picture_url}),e.jsx(ya,{className:"text-2xl",children:a==="ar"?t.name_ar[0]:t.name_en[0]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[e.jsx("h1",{className:`text-3xl font-bold ${a==="ar"?"font-arabic":"font-serif"}`,children:a==="ar"?t.name_ar:t.name_en}),e.jsxs($,{className:"bg-green-100 text-green-800",children:[e.jsx(Sa,{className:"mr-1 h-3 w-3"}),a==="ar"?"موثق":"Verified"]}),t.subscription&&e.jsxs($,{className:"bg-yellow-100 text-yellow-800",children:[e.jsx(je,{className:"mr-1 h-3 w-3"}),a==="ar"?t.subscription.plan.name_ar:t.subscription.plan.name_en]})]}),e.jsx("div",{className:"text-muted-foreground mb-4 flex items-center gap-6 text-sm",children:e.jsxs("span",{children:[a==="ar"?"عضو منذ":"Member since"," ",new Date(t.created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"})]})}),e.jsxs(ne,{open:H,onOpenChange:C,children:[e.jsx(Qe,{asChild:!0,children:e.jsxs(m,{children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),a==="ar"?"تعديل الملف الشخصي":"Edit Profile"]})}),e.jsxs(oe,{className:"max-w-2xl",children:[e.jsx(ce,{children:e.jsx(de,{children:a==="ar"?"تعديل الملف الشخصي":"Edit Profile"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"name_en",children:a==="ar"?"الاسم (إنجليزي)":"Name (English)"}),e.jsx(O,{id:"name_en",value:K.name_en,onChange:s=>I("name_en",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"name_ar",children:a==="ar"?"الاسم (عربي)":"Name (Arabic)"}),e.jsx(O,{id:"name_ar",value:K.name_ar,onChange:s=>I("name_ar",s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"email",children:a==="ar"?"البريد الإلكتروني":"Email"}),e.jsx(O,{id:"email",type:"email",value:K.email||"",onChange:s=>I("email",s.target.value),placeholder:a==="ar"?"أدخل البريد الإلكتروني (اختياري)":"Enter email (optional)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"phone",children:a==="ar"?"رقم الهاتف":"Phone"}),e.jsx(O,{id:"phone",value:K.phone,onChange:s=>I("phone",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"phone_whatsapp",children:a==="ar"?"واتساب":"WhatsApp"}),e.jsx(O,{id:"phone_whatsapp",value:K.phone_whatsapp,onChange:s=>I("phone_whatsapp",s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"bio_en",children:a==="ar"?"نبذة (إنجليزي)":"Bio (English)"}),e.jsx(es,{id:"bio_en",value:K.bio_en,onChange:s=>I("bio_en",s.target.value),rows:3})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"bio_ar",children:a==="ar"?"نبذة (عربي)":"Bio (Arabic)"}),e.jsx(es,{id:"bio_ar",value:K.bio_ar,onChange:s=>I("bio_ar",s.target.value),rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(m,{variant:"outline",onClick:()=>C(!1),children:a==="ar"?"إلغاء":"Cancel"}),e.jsx(m,{onClick:Ys,children:a==="ar"?"حفظ":"Save"})]})]})]})]})]})]})]}),e.jsxs(oa,{value:ae,onValueChange:G,className:a==="ar"?"rtl":"",children:[e.jsxs(ca,{className:"grid w-full grid-cols-5 lg:inline-flex lg:w-auto lg:grid-cols-none",children:[e.jsxs(me,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"نظرة عامة":"Overview"})]}),e.jsxs(me,{value:"wishlist",className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"المفضلة":"Wishlist"})]}),e.jsxs(me,{value:"listings",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"إعلاناتي":"My Listings"})]}),e.jsxs(me,{value:"billing",className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"الفواتير":"Billing"})]}),e.jsxs(me,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(Pa,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"الإعدادات":"Settings"})]})]}),e.jsxs(xe,{value:"overview",className:"mt-6",children:[e.jsxs("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(v,{children:e.jsxs(b,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:n?.active_listings??0}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"إعلان نشط":"Active Listings"})]})}),e.jsx(v,{children:e.jsxs(b,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:n?.total_sales??0}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"مبيعات مكتملة":"Total Sales"})]})}),e.jsx(v,{children:e.jsxs(b,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:Z()?ue.reduce((s,c)=>s+(c.views_count||0),0):"-"}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"إجمالي المشاهدات":"Total Ad Views"})]})}),e.jsx(v,{children:e.jsxs(b,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:n?.wishlist_items??0}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"عنصر مفضل":"Wishlist Items"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs(v,{children:[e.jsx(Q,{children:e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5"}),a==="ar"?"الإعلانات الأخيرة":"Recent Listings"]})}),e.jsx(b,{className:"space-y-4",children:Te.length>0?Te.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center overflow-hidden rounded bg-gray-100",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(ee,{className:"h-6 w-6 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:a==="ar"?s.title_ar:s.title_en}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[M(s.price),Z()&&e.jsxs(e.Fragment,{children:[" ","• ",s.views_count," ",a==="ar"?"مشاهدة":"views"]})]})]}),be(s)]},s.id)):e.jsx("div",{className:"text-muted-foreground py-4 text-center",children:a==="ar"?"لا توجد إعلانات":"No listings yet"})})]}),e.jsxs(v,{children:[e.jsx(Q,{children:e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),a==="ar"?"المفضلة الأخيرة":"Recent Wishlist"]})}),e.jsx(b,{className:"space-y-4",children:(Y?.length??0)>0?Y?.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center overflow-hidden rounded bg-gray-100",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(z,{className:"h-6 w-6 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:a==="ar"?s.title_ar:s.title_en}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[M(s.price)," • ",a==="ar"?"بواسطة":"by"," ",a==="ar"?s.user?.name_ar:s.user?.name_en]})]})]},s.id)):e.jsx("div",{className:"text-muted-foreground py-4 text-center",children:a==="ar"?"لا توجد عناصر في المفضلة":"No wishlist items yet"})})]})]})]}),e.jsxs(xe,{value:"wishlist",className:"mt-6",children:[e.jsx("div",{className:"hidden grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 md:grid",children:(Y?.length??0)>0?Y?.map(s=>e.jsxs(v,{className:"group cursor-pointer transition-all duration-300 hover:shadow-lg",onClick:()=>f.visit(`/product/${s.id}`),children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex h-48 w-full items-center justify-center overflow-hidden bg-gray-100",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(z,{className:"h-12 w-12 text-gray-400"})}),e.jsx(m,{variant:"outline",size:"icon",className:"absolute right-3 top-3 h-8 w-8 border-none bg-white/90 text-red-500 hover:bg-white",onClick:c=>{c.stopPropagation(),qs(s.id)},children:e.jsx(z,{className:"h-4 w-4 fill-current"})})]}),e.jsxs(b,{className:"p-4",children:[e.jsx("h3",{className:"mb-2 line-clamp-2 font-semibold",children:a==="ar"?s.title_ar:s.title_en}),e.jsx("div",{className:"text-brand-red-600 mb-2 text-lg font-bold",children:M(s.price)}),e.jsx("div",{className:"text-muted-foreground mb-1 text-sm",children:e.jsx("span",{className:"font-medium",children:a==="ar"?s.category?.name_ar:s.category?.name_en})}),e.jsxs("div",{className:"text-muted-foreground text-sm",children:[a==="ar"?"بواسطة":"by"," ",a==="ar"?s.user?.name_ar:s.user?.name_en]})]})]},s.id)):e.jsxs("div",{className:"col-span-full py-12 text-center",children:[e.jsx(z,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:a==="ar"?"لا توجد عناصر في المفضلة":"No wishlist items"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a==="ar"?"ابدأ بإضافة المنتجات إلى مفضلتك":"Start adding products to your wishlist"}),e.jsx(m,{onClick:()=>f.visit("/products"),children:a==="ar"?"تصفح المنتجات":"Browse Products"})]})}),e.jsx("div",{className:"space-y-3 md:hidden",children:(Y?.length??0)>0?Y?.map(s=>e.jsx(v,{className:"group cursor-pointer transition-all duration-300 hover:shadow-lg active:scale-[0.98]",onClick:()=>f.visit(`/product/${s.id}`),children:e.jsxs("div",{className:"flex gap-3 p-3",children:[e.jsx("div",{className:"relative flex-shrink-0",children:e.jsx("div",{className:"h-20 w-20 items-center justify-center overflow-hidden rounded bg-gray-100 flex",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(z,{className:"h-8 w-8 text-gray-400"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-luxury-black line-clamp-2 text-sm font-semibold leading-tight",children:a==="ar"?s.title_ar:s.title_en}),e.jsx("p",{className:"text-muted-foreground text-xs mt-0.5",children:a==="ar"?s.category?.name_ar:s.category?.name_en})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-lg font-bold text-brand-red-600",children:M(s.price)}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[a==="ar"?"بواسطة":"by"," ",a==="ar"?s.user?.name_ar:s.user?.name_en]})]})]})]})},s.id)):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(z,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:a==="ar"?"لا توجد عناصر في المفضلة":"No wishlist items"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a==="ar"?"ابدأ بإضافة المنتجات إلى مفضلتك":"Start adding products to your wishlist"}),e.jsx(m,{onClick:()=>f.visit("/products"),children:a==="ar"?"تصفح المنتجات":"Browse Products"})]})})]}),e.jsx(xe,{value:"listings",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs(m,{onClick:()=>{localStorage.removeItem("sell-draft"),f.visit("/sell/category")},className:"bg-brand-red-600 hover:bg-brand-red-700",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),a==="ar"?"إنشاء إعلان جديد":"Create New Listing"]})}),ue.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden space-y-4 md:block",children:ue.map(s=>e.jsx(v,{children:e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center overflow-hidden rounded bg-gray-100",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(ee,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:a==="ar"?s.title_ar:s.title_en}),e.jsxs("div",{className:"flex items-center gap-2",children:[be(s),s.is_featured&&e.jsxs($,{className:"border-yellow-200 bg-yellow-100 text-yellow-800",children:[e.jsx(he,{className:"mr-1 h-3 w-3"}),a==="ar"?"مميز":"Featured"]})]})]}),e.jsxs("div",{className:"text-muted-foreground mb-3 flex items-center gap-6 text-sm",children:[e.jsx("span",{className:"text-lg font-bold",children:M(s.price)}),Z()&&e.jsxs("span",{children:[s.views_count," ",a==="ar"?"مشاهدة":"views"]}),Z()&&e.jsxs("span",{children:[s.contact_count," ",a==="ar"?"اتصال":"contacts"]}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex gap-2",children:[s.status!=="sold"&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>He(s),children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),a==="ar"?"تعديل":"Edit"]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Be(s.id),className:s.is_featured?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"",children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),s.is_featured?a==="ar"?"إلغاء التمييز":"Unfeature":a==="ar"?"مميز":"Feature"]})]}),s.status==="active"&&e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Ue(s.id),className:"text-orange-600 hover:text-orange-700",children:[e.jsx(rs,{className:"mr-2 h-4 w-4"}),a==="ar"?"انتهاء":"Expire"]}),s.status==="expired"&&e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Me(s.id),className:"text-green-600 hover:text-green-700",children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"}),a==="ar"?"إعادة تفعيل":"Reactivate"]}),s.status==="inactive"&&e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>We(s),className:"text-gray-600 hover:text-gray-700",children:[e.jsx(is,{className:"mr-2 h-4 w-4"}),a==="ar"?"عرض الرسالة":"View Message"]}),s.status==="active"&&s.is_approved===!0&&e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>ze(s.id),className:"text-blue-600 hover:text-blue-700",children:[e.jsx(ns,{className:"mr-2 h-4 w-4"}),a==="ar"?"تم البيع":"Mark as Sold"]}),s.status!=="sold"&&e.jsxs(os,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(m,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive",children:[e.jsx(ls,{className:"mr-2 h-4 w-4"}),a==="ar"?"حذف":"Delete"]})}),e.jsxs(we,{children:[e.jsxs(Ce,{children:[e.jsx(Se,{children:a==="ar"?"تأكيد الحذف":"Confirm Delete"}),e.jsx(Ae,{children:a==="ar"?"هل أنت متأكد من أنك تريد حذف هذا الإعلان؟ لا يمكن التراجع عن هذا الإجراء.":"Are you sure you want to delete this ad? This action cannot be undone."})]}),e.jsxs(De,{children:[e.jsx(Ee,{children:a==="ar"?"إلغاء":"Cancel"}),e.jsx(Pe,{onClick:()=>Oe(s.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:a==="ar"?"حذف":"Delete"})]})]})]})]})]})]})})},s.id))}),e.jsx("div",{className:"space-y-3 md:hidden",children:ue.map(s=>e.jsx(v,{className:"group transition-all duration-300 hover:shadow-lg active:scale-[0.98]",children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"h-16 w-16 items-center justify-center overflow-hidden rounded bg-gray-100 flex",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(ee,{className:"h-6 w-6 text-gray-400"})}),s.is_featured&&e.jsxs($,{className:"absolute -right-1 -top-1 border-yellow-200 bg-yellow-100 text-yellow-800 px-1.5 py-0.5 text-xs",children:[e.jsx(he,{className:"mr-0.5 h-2.5 w-2.5"}),a==="ar"?"مميز":"Featured"]})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"mb-2 flex items-start justify-between",children:e.jsxs("div",{className:"min-w-0 flex-1 pr-2",children:[e.jsx("h3",{className:"text-luxury-black line-clamp-2 text-sm font-semibold leading-tight",children:a==="ar"?s.title_ar:s.title_en}),e.jsx("div",{className:"mt-1 flex items-center gap-2",children:be(s)})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-lg font-bold text-brand-red-600",children:M(s.price)}),e.jsxs("div",{className:"text-muted-foreground flex items-center gap-4 text-xs",children:[Z()&&e.jsxs("span",{children:[s.views_count," ",a==="ar"?"مشاهدة":"views"]}),Z()&&e.jsxs("span",{children:[s.contact_count," ",a==="ar"?"اتصال":"contacts"]}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]}),s.status!=="sold"&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsxs(m,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 h-7",onClick:()=>He(s),children:[e.jsx(fe,{className:"mr-1 h-3 w-3"}),a==="ar"?"تعديل":"Edit"]}),e.jsxs(m,{variant:"outline",size:"sm",className:`text-xs px-2 py-1 h-7 ${s.is_featured?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":""}`,onClick:()=>Be(s.id),children:[e.jsx(he,{className:"mr-1 h-3 w-3"}),s.is_featured?a==="ar"?"إلغاء":"Unfeature":a==="ar"?"مميز":"Feature"]}),s.status==="active"&&e.jsxs(m,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 h-7 text-orange-600 hover:text-orange-700",onClick:()=>Ue(s.id),children:[e.jsx(rs,{className:"mr-1 h-3 w-3"}),a==="ar"?"انتهاء":"Expire"]}),s.status==="expired"&&e.jsxs(m,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 h-7 text-green-600 hover:text-green-700",onClick:()=>Me(s.id),children:[e.jsx(Xe,{className:"mr-1 h-3 w-3"}),a==="ar"?"إعادة":"Reactivate"]}),s.status==="inactive"&&e.jsxs(m,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 h-7 text-gray-600 hover:text-gray-700",onClick:()=>We(s),children:[e.jsx(is,{className:"mr-1 h-3 w-3"}),a==="ar"?"عرض":"View"]}),s.status==="active"&&s.is_approved===!0&&e.jsxs(m,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 h-7 text-blue-600 hover:text-blue-700",onClick:()=>ze(s.id),children:[e.jsx(ns,{className:"mr-1 h-3 w-3"}),a==="ar"?"تم البيع":"Sold"]}),e.jsxs(os,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(m,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 h-7 text-destructive hover:text-destructive",children:[e.jsx(ls,{className:"mr-1 h-3 w-3"}),a==="ar"?"حذف":"Delete"]})}),e.jsxs(we,{children:[e.jsxs(Ce,{children:[e.jsx(Se,{children:a==="ar"?"تأكيد الحذف":"Confirm Delete"}),e.jsx(Ae,{children:a==="ar"?"هل أنت متأكد من أنك تريد حذف هذا الإعلان؟ لا يمكن التراجع عن هذا الإجراء.":"Are you sure you want to delete this ad? This action cannot be undone."})]}),e.jsxs(De,{children:[e.jsx(Ee,{children:a==="ar"?"إلغاء":"Cancel"}),e.jsx(Pe,{onClick:()=>Oe(s.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:a==="ar"?"حذف":"Delete"})]})]})]})]})]})]})]})})},s.id))}),P&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?`عرض ${P.from||0} إلى ${P.to||0} من ${P.total||0} إعلان`:`Showing ${P.from||0} to ${P.to||0} of ${P.total||0} listings`}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>Le(ie.currentPage-1),disabled:ie.currentPage<=1,children:a==="ar"?"السابق":"Previous"}),e.jsx("span",{className:"text-sm",children:a==="ar"?`صفحة ${ie.currentPage} من ${P.last_page}`:`Page ${ie.currentPage} of ${P.last_page}`}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>Le(ie.currentPage+1),disabled:!P.next_page_url,children:a==="ar"?"التالي":"Next"})]})]})]}):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(ee,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:a==="ar"?"لا توجد إعلانات":"No listings yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a==="ar"?"ابدأ بإنشاء إعلانك الأول":"Start by creating your first listing"}),e.jsx(m,{onClick:()=>{localStorage.removeItem("sell-draft"),f.visit("/sell/category")},children:a==="ar"?"إنشاء إعلان":"Create Listing"})]})]})}),e.jsx(xe,{value:"billing",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs(v,{children:[e.jsx(Q,{children:e.jsx(X,{children:a==="ar"?"الخطة الحالية":"Current Plan"})}),e.jsxs(b,{className:"space-y-4",children:[t.subscription?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:a==="ar"?t.subscription.plan.name_ar:t.subscription.plan.name_en}),e.jsxs("div",{className:"text-muted-foreground text-sm",children:[M(t.subscription.plan.price)," /"," ",t.subscription.plan.is_lifetime?a==="ar"?"مدى الحياة":"Lifetime":`${t.subscription.plan.months_count} ${a==="ar"?"شهر":"months"}`]})]}),e.jsxs($,{className:t.subscription.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:[e.jsx(je,{className:"mr-1 h-3 w-3"}),t.subscription.is_active?a==="ar"?"نشط":"Active":a==="ar"?"منتهي":"Expired"]})]}),t.subscription.expires_at&&e.jsxs("div",{className:"text-muted-foreground text-sm",children:[a==="ar"?"ينتهي في":"Expires on"," ",new Date(t.subscription.expires_at).toLocaleDateString()]})]}):e.jsxs("div",{className:"py-4 text-center",children:[e.jsx(je,{className:"mx-auto mb-2 h-8 w-8 text-gray-400"}),e.jsx("p",{className:"text-muted-foreground",children:a==="ar"?"لا توجد خطة نشطة":"No active subscription"})]}),t.subscription?e.jsxs(ne,{open:g,onOpenChange:j,children:[e.jsx(Qe,{asChild:!0,children:e.jsx(m,{className:"w-full",children:a==="ar"?"ترقية الاشتراك":"Upgrade Subscription"})}),e.jsxs(oe,{className:"max-h-[80vh] max-w-4xl overflow-y-auto",children:[e.jsx(ce,{children:e.jsx(de,{children:a==="ar"?"ترقية الاشتراك":"Upgrade Subscription"})}),e.jsx("div",{className:"py-4",children:t?.subscription&&e.jsx(ka,{currentSubscription:{created_at:t.subscription.created_at,id:t.subscription.id,plan:t.subscription.plan,expires_at:t.subscription.expires_at,subscription_plan_id:t.subscription.id,analytics:t.subscription.plan.analytics||!1},onPlanSelect:ke,selectedPlanId:$e,onUpgrade:Js,isUpgrading:Is})}),e.jsx(ye,{children:e.jsx(m,{variant:"outline",onClick:()=>j(!1),children:a==="ar"?"إلغاء":"Cancel"})})]})]}):e.jsx(e.Fragment,{})]})]}),e.jsxs(v,{children:[e.jsx(Q,{children:e.jsx(X,{children:a==="ar"?"سجل المعاملات":"Transaction History"})}),e.jsx(b,{className:"space-y-4",children:(y?.length??0)>0?e.jsx("div",{className:"space-y-3",children:y?.map((s,c)=>e.jsxs("div",{className:"flex items-center justify-between border-b py-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.description}),e.jsxs("div",{className:"text-muted-foreground flex items-center gap-2 text-sm",children:[e.jsx("span",{children:new Date(s.date).toLocaleDateString()}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:s.payment_method}),s.subscription_plan&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:a==="ar"?s.subscription_plan.name_ar:s.subscription_plan.name_en})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold",children:M(s.amount)}),e.jsx("div",{className:`text-xs ${s.status==="completed"?"text-green-600":s.status==="pending"?"text-yellow-600":s.status==="failed"?"text-red-600":"text-gray-600"}`,children:s.status==="completed"?a==="ar"?"مكتمل":"Completed":s.status==="pending"?a==="ar"?"معلق":"Pending":s.status==="failed"?a==="ar"?"فشل":"Failed":s.status})]})]},s.id||c))}):e.jsxs("div",{className:"py-4 text-center",children:[e.jsx(ts,{className:"mx-auto mb-2 h-8 w-8 text-gray-400"}),e.jsx("p",{className:"text-muted-foreground",children:a==="ar"?"لا توجد معاملات":"No transactions yet"})]})})]})]})}),e.jsx(xe,{value:"settings",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs(v,{children:[e.jsx(Q,{children:e.jsx(X,{children:a==="ar"?"معلومات الحساب":"Account Information"})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"name",children:a==="ar"?"الاسم":"Name"}),e.jsx(O,{id:"name",value:a==="ar"?t.name_ar:t.name_en,disabled:!0})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"email",children:a==="ar"?"البريد الإلكتروني":"Email"}),e.jsx(O,{id:"email",type:"email",value:t.email||(a==="ar"?"غير محدد":"Not set"),disabled:!0})]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"phone",children:a==="ar"?"رقم الهاتف":"Phone Number"}),e.jsx(O,{id:"phone",value:t.phone||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"governorate",children:a==="ar"?"المحافظة":"Governorate"}),e.jsx(O,{id:"governorate",value:t.governorate?a==="ar"?t.governorate.name_ar:t.governorate.name_en:"",disabled:!0})]}),e.jsxs(m,{onClick:()=>C(!0),className:"w-full",children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),a==="ar"?"تعديل الملف الشخصي":"Edit Profile"]})]})]}),e.jsxs(v,{children:[e.jsx(Q,{children:e.jsx(X,{children:a==="ar"?"التفضيلات":"Preferences"})}),e.jsxs(b,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a==="ar"?"اللغة":"Language"}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"العربية":"English"})]}),e.jsx(m,{variant:"outline",onClick:_,children:a==="ar"?"English":"العربية"})]}),e.jsx("div",{className:"border-t pt-6",children:e.jsxs(m,{variant:"outline",onClick:()=>q(),className:"text-destructive hover:text-destructive hover:bg-destructive/10 w-full",children:[e.jsx(Ea,{className:"mr-2 h-4 w-4"}),a==="ar"?"تسجيل الخروج":"Logout"]})})]})]})]})})]})]})}),e.jsx(Ze,{}),e.jsx(ne,{open:te,onOpenChange:F,children:e.jsxs(oe,{className:"flex max-h-[90vh] max-w-4xl flex-col rounded-lg p-0",children:[e.jsx(ce,{className:"bg-background flex-shrink-0 rounded-t-lg border-b p-6",children:e.jsx(de,{children:a==="ar"?"تعديل الإعلان":"Edit Ad"})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx(ma,{formData:u,updateFormData:Vs,isSubmitting:Bs})}),e.jsxs("div",{className:"bg-background flex flex-shrink-0 justify-end gap-2 rounded-b-lg border-t p-6",children:[e.jsx(m,{variant:"outline",onClick:()=>F(!1),children:a==="ar"?"إلغاء":"Cancel"}),e.jsx(m,{onClick:Zs,children:D&&D.is_approved===!1?a==="ar"?"حفظ وإرسال للمراجعة":"Save and Send to Review":a==="ar"?"حفظ التغييرات":"Save Changes"})]})]})}),e.jsx(ne,{open:Rs,onOpenChange:ve,children:e.jsxs(oe,{className:"max-w-md",children:[e.jsx(ce,{children:e.jsx(de,{children:a==="ar"?"سبب الرفض":"Rejection Reason"})}),e.jsx("div",{className:"py-4",children:e.jsx("p",{className:"text-muted-foreground text-sm",children:Ls})}),e.jsx(ye,{children:e.jsx(m,{onClick:()=>ve(!1),children:a==="ar"?"إغلاق":"Close"})})]})}),e.jsx(ne,{open:Us,onOpenChange:Ne,children:e.jsxs(oe,{className:"max-w-md",children:[e.jsx(ce,{children:e.jsx(de,{children:a==="ar"?"رسالة الإعلان غير النشط":"Inactive Ad Message"})}),e.jsxs("div",{className:"py-4",children:[e.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:Ms}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("p",{className:"text-muted-foreground text-xs",children:a==="ar"?"لإعادة تفعيل هذا الإعلان، يرجى التواصل معنا على: live-musamemat@support.com":"To reactivate this ad, please contact us at: live-musamemat@support.com"})})]}),e.jsx(ye,{children:e.jsx(m,{onClick:()=>Ne(!1),children:a==="ar"?"إغلاق":"Close"})})]})})]})]})}export{Bt as default};
