import{u as F}from"./useQuery-1tLj2zkj.js";import{r as t}from"./app-CiN-z-mi.js";const j=({endpoint:n,initialPage:g=1,initialPerPage:l="20",initialSearch:f="",initialFilters:p={},staleTime:h=120*1e3,gcTime:P=300*1e3})=>{const[r,s]=t.useState({currentPage:g,perPage:l,search:f,filters:p}),[d,u]=t.useState(!1),y=["user",n,r],S=t.useCallback(async()=>{u(!0);try{const e=new URLSearchParams;e.append("page",r.currentPage.toString()),e.append("per_page",r.perPage),r.search&&e.append("search",r.search),Object.entries(r.filters).forEach(([E,i])=>{i&&i!=="all"&&e.append(E,i)});const a=await fetch(`${n}?${e.toString()}`);if(!a.ok)throw new Error("Failed to fetch data");return await a.json()}finally{u(!1)}},[n,r]),c=F({queryKey:y,queryFn:S,staleTime:h,gcTime:P,refetchOnWindowFocus:!1,retry:1}),b=t.useCallback(e=>{s(a=>({...a,currentPage:e}))},[]),k=t.useCallback(e=>{s(a=>({...a,perPage:e,currentPage:1}))},[]),C=t.useCallback(e=>{s(a=>({...a,search:e,currentPage:1}))},[]),m=t.useCallback(e=>{s(a=>({...a,filters:e,currentPage:1}))},[]),w=t.useCallback((e,a)=>{s(o=>({...o,filters:{...o.filters,[e]:a},currentPage:1}))},[]);return{data:c.data,isLoading:c.isLoading||d,isError:c.isError,error:c.error,paginationState:r,goToPage:b,setPerPage:k,setSearch:C,setFilters:m,updateFilter:w,refetch:c.refetch}};export{j as u};
