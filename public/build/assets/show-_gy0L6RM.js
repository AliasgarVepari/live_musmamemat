import{r as D,j as e,H as C,a as x}from"./app-CiN-z-mi.js";import{A as S,U as u,C as T,D as A}from"./app-layout-DTXGJZxa.js";import{C as i,a as n,b as c,c as l}from"./card-C9ipyH0f.js";import{B as r}from"./button-CwwqYzBh.js";import{B as d}from"./badge-BeEVwe-7.js";import{D as E,a as $,b as P,c as k,d as F,e as L,f as M}from"./dialog-CFbaL1bR.js";import{u as B}from"./use-error-handler-CAQAgIfQ.js";import{A as H}from"./arrow-left-IcoQIA9w.js";import{T as O,a as g}from"./toggle-right-BeZ5vh-S.js";import{S as U}from"./square-pen-CNo-uToz.js";import{T as R}from"./trash-2-7epWCtSP.js";import{C as I}from"./crown-CQOnRZo_.js";import{H as q}from"./headphones-BzZX2yxg.js";import"./index-Nuw4A2-P.js";import"./index-DtnZEJZD.js";import"./chevron-right-BYcuDYwb.js";import"./index-CDOJiyEw.js";import"./index-DW9AIAM8.js";import"./base-layout-DZyBKCCS.js";/* empty css            */import"./use-forced-theme-CWthfpdt.js";import"./settings-DUw5aPq3.js";import"./logo-DB6pQEXk.js";import"./map-pin-W1PPpquu.js";function je({plan:s}){const[f,o]=D.useState(!1);B();const p=t=>{switch(t){case"active":return e.jsx(d,{className:"bg-green-100 text-green-800",children:"Active"});case"inactive":return e.jsx(d,{className:"bg-orange-100 text-orange-800",children:"Suspended"});case"delete":return e.jsx(d,{className:"bg-red-100 text-red-800",children:"Deleted"});default:return e.jsx(d,{variant:"secondary",children:t})}},N=t=>e.jsx(d,{variant:"outline",children:t||"Monthly"}),v=(t,m)=>{const a=typeof t=="string"?parseFloat(t):t,_=m?m.toLowerCase():"month";return`$${a.toFixed(2)}/${_}`},b=()=>{x.patch(`/admin/subscription-plans/${s.id}/toggle`,{},{onError:t=>{const a=Object.values(t).flat().join(", ");alert(`Error: ${a}`)}})},w=()=>{x.delete(`/admin/subscription-plans/${s.id}`,{onSuccess:()=>{o(!1)},onError:t=>{const a=Object.values(t).flat().join(", ");alert(`Error: ${a}`)}})},y=()=>{o(!1)},h=s.user_subscriptions.filter(t=>t.is_active).length,j=s.user_subscriptions.length;return e.jsxs(S,{children:[e.jsx(C,{title:s.name_en}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),children:e.jsx(H,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s.name_en}),e.jsx("p",{className:"text-muted-foreground",children:"Subscription plan details and subscribers"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:"outline",onClick:b,className:s.status==="active"?"text-orange-600 hover:text-orange-700":"text-green-600 hover:text-green-700",children:s.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Suspend"]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Activate"]})}),e.jsxs(r,{variant:"outline",onClick:()=>x.get(`/admin/subscription-plans/${s.id}/edit`),children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsxs(E,{open:f,onOpenChange:o,children:[e.jsx($,{asChild:!0,children:e.jsxs(r,{variant:"destructive",onClick:()=>o(!0),children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Delete"]})}),e.jsxs(P,{children:[e.jsxs(k,{children:[e.jsx(F,{children:"Delete Subscription Plan"}),e.jsxs(L,{children:['Are you sure you want to delete "',s.name_en,'"? This action will revoke all active subscriptions for this plan and cannot be undone.']})]}),e.jsxs(M,{children:[e.jsx(r,{variant:"outline",onClick:y,children:"Cancel"}),e.jsx(r,{variant:"destructive",onClick:w,children:"Delete Plan"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(i,{children:[e.jsx(n,{children:e.jsx(c,{children:"Plan Information"})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:s.name_en}),e.jsx("p",{className:"text-muted-foreground",children:s.name_ar})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-primary",children:v(s.price,s.readable_billing_cycle)}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[p(s.status),N(s.readable_billing_cycle)]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Description (English)"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:s.description_en})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Description (Arabic)"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:s.description_ar})]})]})]}),e.jsxs(i,{children:[e.jsx(n,{children:e.jsx(c,{children:"Plan Features"})}),e.jsx(l,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{className:"font-medium",children:[s.ad_limit," posts allowed"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:s.has_unlimited_featured_ads?"Unlimited featured posts":`${s.featured_ads_count||s.featured_ads} featured posts`})]})]}),e.jsxs("div",{className:"space-y-3",children:[s.analytics&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Analytics access"})]}),s.priority_support&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Priority support"})]})]})]})})]}),e.jsxs(i,{children:[e.jsx(n,{children:e.jsxs(c,{children:["Subscribers (",j,")"]})}),e.jsx(l,{children:s.user_subscriptions.length>0?e.jsx("div",{className:"space-y-3",children:s.user_subscriptions.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.user.name_en}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.user.email})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-sm font-medium ${t.is_active?"text-green-600":"text-gray-500"}`,children:t.is_active?"Active":"Expired"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Expires: ",new Date(t.expires_at).toLocaleDateString()]})]})]},t.id))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No subscribers yet"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(i,{children:[e.jsx(n,{children:e.jsx(c,{children:"Statistics"})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Total Subscribers"})]}),e.jsx("span",{className:"font-bold",children:j})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Active Subscribers"})]}),e.jsx("span",{className:"font-bold text-green-600",children:h})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Monthly Revenue"})]}),e.jsxs("span",{className:"font-bold",children:["$",(h*(typeof s.price=="string"?parseFloat(s.price):s.price)).toFixed(2)]})]})]})]}),e.jsxs(i,{children:[e.jsx(n,{children:e.jsx(c,{children:"Plan Details"})}),e.jsxs(l,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Created"}),e.jsx("span",{className:"text-sm",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("span",{className:"text-sm",children:new Date(s.updated_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Slug"}),e.jsx("span",{className:"text-sm font-mono",children:s.slug})]})]})]})]})]})]})})]})}export{je as default};
