import{b as Ee,r as u,f as Me,j as e,g as Ae,h as V,P as F,e as L,i as Ie,c as Ke,n as Ve,m as Le,H as Te,a as ee}from"./app-D4fftTGD.js";import{H as oe,F as le,B as R,I as He,a as $,C as Be,A as ze}from"./Header-DUJAV0gJ.js";import{C as te,a as $e}from"./card-tWAE8fhJ.js";import{S as q,a as W,b as X,c as G,d as P}from"./select-ppc8rx6r.js";import{c as xe}from"./index-BdQq_4o_.js";import{u as Fe}from"./index-DPZd2R8K.js";import{u as Oe}from"./index-oIpaOIsu.js";import{a as Ue}from"./index-hkDWgcNh.js";import{u as Ye}from"./use-favorites-dbgHhEYU.js";import{u as qe}from"./use-cached-pagination-D8r7Sb7Y.js";import{U as ce}from"./user-layout-DgXTgCDJ.js";import{u as We,s as de}from"./index-D6ddks9M.js";import{L as Xe}from"./loader-circle-BdrQHV6u.js";import{C as me}from"./chevron-right-Ck6X52p-.js";import{S as Ge}from"./search-CfRGMnBM.js";import{S as Je}from"./star-D3r-CIml.js";import{H as ue}from"./heart-BA3iB0DQ.js";import{M as Qe}from"./map-pin-H3wtuRxp.js";import"./useQuery-BX8TA0Nj.js";import"./phone-Dx_mUjE6.js";import"./index-DqyYKiVk.js";import"./index-CiqjAWw3.js";import"./check-Dtq2BMvx.js";import"./user-C1KEFZkM.js";import"./index-wiFMOTv7.js";import"./use-forced-theme-DpY-S8jc.js";/* empty css            */import"./index-DW9AIAM8.js";import"./index-BX7CGiW0.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],et=Ee("SlidersHorizontal",Ze);var he=["PageUp","PageDown"],fe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pe={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},T="Slider",[se,tt,st]=Ue(T),[ge,Wt]=Ae(T,[st]),[at,J]=ge(T),ve=u.forwardRef((a,n)=>{const{name:r,min:i=0,max:c=100,step:o=1,orientation:s="horizontal",disabled:d=!1,minStepsBetweenThumbs:f=0,defaultValue:y=[i],value:b,onValueChange:l=()=>{},onValueCommit:h=()=>{},inverted:S=!1,form:C,...x}=a,p=u.useRef(new Set),g=u.useRef(0),m=s==="horizontal"?nt:rt,[v=[],D]=Me({prop:b,defaultProp:y,onChange:w=>{[...p.current][g.current]?.focus(),l(w)}}),H=u.useRef(v);function B(w){const N=dt(v,w);k(w,N)}function O(w){k(w,g.current)}function Q(){const w=H.current[g.current];v[g.current]!==w&&h(v)}function k(w,N,{commit:A}={commit:!1}){const U=ht(o),z=ft(Math.round((w-i)/o)*o+i,U),E=xe(z,[i,c]);D((t=[])=>{const j=lt(t,E,N);if(xt(j,f*o)){g.current=j.indexOf(E);const M=String(j)!==String(t);return M&&A&&h(j),M?j:t}else return t})}return e.jsx(at,{scope:a.__scopeSlider,name:r,disabled:d,min:i,max:c,valueIndexToChangeRef:g,thumbs:p.current,values:v,orientation:s,form:C,children:e.jsx(se.Provider,{scope:a.__scopeSlider,children:e.jsx(se.Slot,{scope:a.__scopeSlider,children:e.jsx(m,{"aria-disabled":d,"data-disabled":d?"":void 0,...x,ref:n,onPointerDown:V(x.onPointerDown,()=>{d||(H.current=v)}),min:i,max:c,inverted:S,onSlideStart:d?void 0:B,onSlideMove:d?void 0:O,onSlideEnd:d?void 0:Q,onHomeKeyDown:()=>!d&&k(i,0,{commit:!0}),onEndKeyDown:()=>!d&&k(c,v.length-1,{commit:!0}),onStepKeyDown:({event:w,direction:N})=>{if(!d){const z=he.includes(w.key)||w.shiftKey&&fe.includes(w.key)?10:1,E=g.current,t=v[E],j=o*z*N;k(t+j,E,{commit:!0})}}})})})})});ve.displayName=T;var[je,be]=ge(T,{startEdge:"left",endEdge:"right",size:"width",direction:1}),nt=u.forwardRef((a,n)=>{const{min:r,max:i,dir:c,inverted:o,onSlideStart:s,onSlideMove:d,onSlideEnd:f,onStepKeyDown:y,...b}=a,[l,h]=u.useState(null),S=L(n,m=>h(m)),C=u.useRef(void 0),x=Fe(c),p=x==="ltr",g=p&&!o||!p&&o;function _(m){const v=C.current||l.getBoundingClientRect(),D=[0,v.width],B=re(D,g?[r,i]:[i,r]);return C.current=v,B(m-v.left)}return e.jsx(je,{scope:a.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:e.jsx(Se,{dir:x,"data-orientation":"horizontal",...b,ref:S,style:{...b.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:m=>{const v=_(m.clientX);s?.(v)},onSlideMove:m=>{const v=_(m.clientX);d?.(v)},onSlideEnd:()=>{C.current=void 0,f?.()},onStepKeyDown:m=>{const D=pe[g?"from-left":"from-right"].includes(m.key);y?.({event:m,direction:D?-1:1})}})})}),rt=u.forwardRef((a,n)=>{const{min:r,max:i,inverted:c,onSlideStart:o,onSlideMove:s,onSlideEnd:d,onStepKeyDown:f,...y}=a,b=u.useRef(null),l=L(n,b),h=u.useRef(void 0),S=!c;function C(x){const p=h.current||b.current.getBoundingClientRect(),g=[0,p.height],m=re(g,S?[i,r]:[r,i]);return h.current=p,m(x-p.top)}return e.jsx(je,{scope:a.__scopeSlider,startEdge:S?"bottom":"top",endEdge:S?"top":"bottom",size:"height",direction:S?1:-1,children:e.jsx(Se,{"data-orientation":"vertical",...y,ref:l,style:{...y.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const p=C(x.clientY);o?.(p)},onSlideMove:x=>{const p=C(x.clientY);s?.(p)},onSlideEnd:()=>{h.current=void 0,d?.()},onStepKeyDown:x=>{const g=pe[S?"from-bottom":"from-top"].includes(x.key);f?.({event:x,direction:g?-1:1})}})})}),Se=u.forwardRef((a,n)=>{const{__scopeSlider:r,onSlideStart:i,onSlideMove:c,onSlideEnd:o,onHomeKeyDown:s,onEndKeyDown:d,onStepKeyDown:f,...y}=a,b=J(T,r);return e.jsx(F.span,{...y,ref:n,onKeyDown:V(a.onKeyDown,l=>{l.key==="Home"?(s(l),l.preventDefault()):l.key==="End"?(d(l),l.preventDefault()):he.concat(fe).includes(l.key)&&(f(l),l.preventDefault())}),onPointerDown:V(a.onPointerDown,l=>{const h=l.target;h.setPointerCapture(l.pointerId),l.preventDefault(),b.thumbs.has(h)?h.focus():i(l)}),onPointerMove:V(a.onPointerMove,l=>{l.target.hasPointerCapture(l.pointerId)&&c(l)}),onPointerUp:V(a.onPointerUp,l=>{const h=l.target;h.hasPointerCapture(l.pointerId)&&(h.releasePointerCapture(l.pointerId),o(l))})})}),ye="SliderTrack",we=u.forwardRef((a,n)=>{const{__scopeSlider:r,...i}=a,c=J(ye,r);return e.jsx(F.span,{"data-disabled":c.disabled?"":void 0,"data-orientation":c.orientation,...i,ref:n})});we.displayName=ye;var ae="SliderRange",Ne=u.forwardRef((a,n)=>{const{__scopeSlider:r,...i}=a,c=J(ae,r),o=be(ae,r),s=u.useRef(null),d=L(n,s),f=c.values.length,y=c.values.map(h=>Pe(h,c.min,c.max)),b=f>1?Math.min(...y):0,l=100-Math.max(...y);return e.jsx(F.span,{"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,...i,ref:d,style:{...a.style,[o.startEdge]:b+"%",[o.endEdge]:l+"%"}})});Ne.displayName=ae;var ne="SliderThumb",_e=u.forwardRef((a,n)=>{const r=tt(a.__scopeSlider),[i,c]=u.useState(null),o=L(n,d=>c(d)),s=u.useMemo(()=>i?r().findIndex(d=>d.ref.current===i):-1,[r,i]);return e.jsx(it,{...a,ref:o,index:s})}),it=u.forwardRef((a,n)=>{const{__scopeSlider:r,index:i,name:c,...o}=a,s=J(ne,r),d=be(ne,r),[f,y]=u.useState(null),b=L(n,_=>y(_)),l=f?s.form||!!f.closest("form"):!0,h=Ie(f),S=s.values[i],C=S===void 0?0:Pe(S,s.min,s.max),x=ct(i,s.values.length),p=h?.[d.size],g=p?mt(p,C,d.direction):0;return u.useEffect(()=>{if(f)return s.thumbs.add(f),()=>{s.thumbs.delete(f)}},[f,s.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${C}% + ${g}px)`},children:[e.jsx(se.ItemSlot,{scope:a.__scopeSlider,children:e.jsx(F.span,{role:"slider","aria-label":a["aria-label"]||x,"aria-valuemin":s.min,"aria-valuenow":S,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...o,ref:b,style:S===void 0?{display:"none"}:a.style,onFocus:V(a.onFocus,()=>{s.valueIndexToChangeRef.current=i})})}),l&&e.jsx(Ce,{name:c??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:S},i)]})});_e.displayName=ne;var ot="RadioBubbleInput",Ce=u.forwardRef(({__scopeSlider:a,value:n,...r},i)=>{const c=u.useRef(null),o=L(c,i),s=Oe(n);return u.useEffect(()=>{const d=c.current;if(!d)return;const f=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(f,"value").set;if(s!==n&&b){const l=new Event("input",{bubbles:!0});b.call(d,n),d.dispatchEvent(l)}},[s,n]),e.jsx(F.input,{style:{display:"none"},...r,ref:o,defaultValue:n})});Ce.displayName=ot;function lt(a=[],n,r){const i=[...a];return i[r]=n,i.sort((c,o)=>c-o)}function Pe(a,n,r){const o=100/(r-n)*(a-n);return xe(o,[0,100])}function ct(a,n){return n>2?`Value ${a+1} of ${n}`:n===2?["Minimum","Maximum"][a]:void 0}function dt(a,n){if(a.length===1)return 0;const r=a.map(c=>Math.abs(c-n)),i=Math.min(...r);return r.indexOf(i)}function mt(a,n,r){const i=a/2,o=re([0,50],[0,i]);return(i-o(n)*r)*r}function ut(a){return a.slice(0,-1).map((n,r)=>a[r+1]-n)}function xt(a,n){if(n>0){const r=ut(a);return Math.min(...r)>=n}return!0}function re(a,n){return r=>{if(a[0]===a[1]||n[0]===n[1])return n[0];const i=(n[1]-n[0])/(a[1]-a[0]);return n[0]+i*(r-a[0])}}function ht(a){return(String(a).split(".")[1]||"").length}function ft(a,n){const r=Math.pow(10,n);return Math.round(a*r)/r}var ke=ve,pt=we,gt=Ne,vt=_e;const Re=u.forwardRef(({className:a,...n},r)=>e.jsxs(ke,{ref:r,className:Ke("relative flex w-full touch-none select-none items-center",a),...n,children:[e.jsx(pt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(gt,{className:"absolute h-full bg-primary"})}),e.jsx(vt,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Re.displayName=ke.displayName;const Xt=({products:a,categories:n,governorates:r,conditions:i,priceTypes:c,filters:o})=>{const{language:s}=Ve(),{isAuthenticated:d}=Le(),{isFavorited:f,toggleFavorite:y,loading:b}=Ye(),[l,h]=u.useState(!1),{data:S,isLoading:C,paginationState:x,goToPage:p,setSearch:g,updateFilter:_}=qe({endpoint:"/api/user/products",initialPage:a?.current_page||1,initialPerPage:o?.per_page||"20",initialSearch:o?.search||"",initialFilters:{category:o?.category||"all",governorate_id:o?.governorate_id||"all",condition_id:o?.condition_id||"all",price_type_id:o?.price_type_id||"all",min_price:o?.min_price||"",max_price:o?.max_price||"",is_negotiable:o?.is_negotiable||"all",sort:o?.sort||"newest"}}),m=S||a,v=n||[],D=r||[],H=i||[],B=c||[],[O,Q]=u.useState(!1),[k,w]=u.useState([0,1e4]),N=v.find(t=>t.slug===x.filters.category),A=t=>{_("category",t)},U=async t=>{if(!d){h(!0);return}try{await y(t)}catch(j){console.error("Error toggling favorite:",j)}},z=t=>{_("sort",t)},E=t=>{w(t),_("min_price",t[0].toString()),_("max_price",t[1].toString())};return C&&!m?e.jsx(ce,{children:e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(oe,{}),e.jsx("main",{className:"main-content py-16",children:e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xe,{className:"mx-auto h-8 w-8 animate-spin"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Loading products..."})]})})}),e.jsx(le,{})]})}):e.jsxs(ce,{children:[e.jsx(Te,{title:"Products"}),e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(oe,{}),e.jsx("main",{className:"main-content py-16",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("nav",{className:`text-muted-foreground mb-6 flex items-center space-x-2 text-sm ${s==="ar"?"rtl space-x-reverse":""}`,children:[e.jsx("span",{onClick:()=>ee.visit(We.home()),className:"hover:text-luxury-black cursor-pointer transition-colors",children:s==="ar"?"الرئيسية":"Home"}),e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{className:"text-luxury-black font-medium",children:s==="ar"?N?.name_ar:N?.name_en})]}),e.jsxs("div",{className:`mb-8 ${s==="ar"?"rtl":""}`,children:[e.jsx("h1",{className:`text-luxury-black mb-2 text-3xl font-bold md:text-4xl ${s==="ar"?"font-arabic":"font-serif"}`,children:s==="ar"?N?.name_ar||"All Products":N?.name_en||"All Products"}),e.jsxs("p",{className:"text-muted-foreground",children:[s==="ar"?"منتج متاح":"products available"," ",m?.total||0]})]}),e.jsx("div",{className:"mb-6 overflow-x-auto",children:e.jsxs("div",{className:"flex min-w-max space-x-2 pb-2",children:[e.jsx(R,{variant:x.filters.category==="all"?"default":"secondary",size:"sm",onClick:()=>A("all"),className:"whitespace-nowrap",children:s==="ar"?"جميع الفئات":"All Categories"}),v.map(t=>e.jsx(R,{variant:x.filters.category===t.slug?"default":"secondary",size:"sm",onClick:()=>A(t.slug),className:"whitespace-nowrap",children:s==="ar"?t.name_ar:t.name_en},t.slug))]})}),e.jsxs("div",{className:`mb-8 flex flex-col gap-4 md:flex-row ${s==="ar"?"rtl":""}`,children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ge,{className:"text-muted-foreground absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 transform"}),e.jsx(He,{placeholder:s==="ar"?"البحث في المنتجات...":"Search products...",value:x.search,onChange:t=>g(t.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",onClick:()=>Q(!O),className:"border-luxury-black/20",children:[e.jsx(et,{className:"mr-2 h-4 w-4"}),s==="ar"?"فلاتر":"Filters"]}),e.jsxs(q,{value:x.filters.sort,onValueChange:z,children:[e.jsx(W,{className:"w-40",children:e.jsx(X,{})}),e.jsxs(G,{children:[e.jsx(P,{value:"newest",children:s==="ar"?"الأحدث":"Newest"}),e.jsx(P,{value:"price-high",children:s==="ar"?"السعر: عالي لمنخفض":"Price: High to Low"}),e.jsx(P,{value:"price-low",children:s==="ar"?"السعر: منخفض لعالي":"Price: Low to High"}),e.jsx(P,{value:"popular",children:s==="ar"?"الأكثر شعبية":"Most Popular"})]})]})]})]}),O&&e.jsx(te,{className:"mb-8 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:s==="ar"?"نطاق السعر":"Price Range"}),e.jsx(Re,{value:k,onValueChange:E,max:1e4,step:100,className:"mb-2"}),e.jsxs("div",{className:"text-muted-foreground flex justify-between text-sm",children:[e.jsxs("span",{children:[k[0]," KD"]}),e.jsxs("span",{children:[k[1]," KD"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:s==="ar"?"الموقع":"Location"}),e.jsxs(q,{value:x.filters.governorate_id,onValueChange:t=>_("governorate_id",t),children:[e.jsx(W,{children:e.jsx(X,{placeholder:s==="ar"?"اختر الموقع":"Select location"})}),e.jsxs(G,{children:[e.jsx(P,{value:"all",children:s==="ar"?"جميع المواقع":"All Locations"}),D.map(t=>e.jsx(P,{value:t.id.toString(),children:s==="ar"?t.name_ar:t.name_en},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:s==="ar"?"الحالة":"Condition"}),e.jsxs(q,{value:x.filters.condition_id,onValueChange:t=>_("condition_id",t),children:[e.jsx(W,{children:e.jsx(X,{placeholder:s==="ar"?"اختر الحالة":"Select condition"})}),e.jsxs(G,{children:[e.jsx(P,{value:"all",children:s==="ar"?"جميع الحالات":"All Conditions"}),H.map(t=>e.jsx(P,{value:t.id.toString(),children:s==="ar"?t.name_ar:t.name_en},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:s==="ar"?"نوع السعر":"Price Type"}),e.jsxs(q,{value:x.filters.price_type_id,onValueChange:t=>_("price_type_id",t),children:[e.jsx(W,{children:e.jsx(X,{placeholder:s==="ar"?"اختر نوع السعر":"Select price type"})}),e.jsxs(G,{children:[e.jsx(P,{value:"all",children:s==="ar"?"جميع الأنواع":"All Types"}),B.map(t=>e.jsx(P,{value:t.id.toString(),children:s==="ar"?t.name_ar:t.name_en},t.id))]})]})]})]})}),e.jsx("div",{className:"mb-12 hidden grid-cols-2 gap-6 md:grid lg:grid-cols-3 xl:grid-cols-4",children:m?.data?.map(t=>(console.log(t),e.jsxs(te,{className:"hover:shadow-luxury group cursor-pointer overflow-hidden transition-all duration-300",onClick:()=>ee.visit(de(t.id,{query:N?{selected_category:N.slug}:{}})),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.primaryImage?.url||"/placeholder-product.svg",alt:s==="ar"?t.title_ar:t.title_en,className:"h-64 w-full object-cover transition-transform duration-300 group-hover:scale-105"}),t.is_featured&&e.jsxs($,{className:"bg-luxury-gold text-luxury-black absolute left-3 top-3",children:[e.jsx(Je,{className:"mr-1 h-3 w-3"}),s==="ar"?"مميز":"Featured"]}),e.jsx(R,{variant:"outline",size:"icon",className:`absolute right-3 top-3 h-8 w-8 border-none bg-white/90 hover:bg-white ${f(t.id)?"text-brand-red-600":""}`,onClick:j=>{j.stopPropagation(),U(t.id)},disabled:b,children:e.jsx(ue,{className:`h-4 w-4 ${f(t.id)?"fill-current":""}`})})]}),e.jsx($e,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsx("h3",{className:"text-luxury-black line-clamp-2 text-sm font-semibold",children:s==="ar"?t.title_ar:t.title_en})}),e.jsx("p",{className:"text-muted-foreground text-xs",children:t.category?.name_en}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-luxury-black text-lg font-bold",children:[t.price," ",t.priceType?.name_en||"KD"]}),t.is_negotiable&&e.jsx($,{variant:"outline",className:"text-xs",children:s==="ar"?"قابل للتفاوض":"Negotiable"})]}),e.jsx($,{variant:"secondary",className:"text-xs",children:s==="ar"?t.condition?.name_ar:t.condition?.name_en})]})}),e.jsxs("div",{className:"text-muted-foreground flex items-center justify-between border-t pt-2 text-xs",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qe,{className:"mr-1 h-3 w-3"}),s==="ar"?t.governorate?.name_ar:t.governorate?.name_en]}),e.jsx("span",{children:new Date(t.created_at).toLocaleDateString()})]})]})})]},t.id)))}),e.jsx("div",{className:"mb-12 space-y-3 md:hidden",children:m?.data?.map(t=>e.jsx(te,{className:"group cursor-pointer overflow-hidden transition-all duration-300 hover:shadow-lg",onClick:()=>ee.visit(de(t.id,{query:N?{selected_category:N.slug}:{}})),children:e.jsxs("div",{className:"flex gap-3 p-3",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:t.primaryImage?.url||"/placeholder-product.svg",alt:s==="ar"?t.title_ar:t.title_en,className:"h-24 w-24 rounded-lg object-cover"}),t.is_featured&&e.jsx($,{className:"bg-luxury-gold text-luxury-black absolute -left-1 -top-1 px-1 py-0 text-xs",children:s==="ar"?"مميز":"Featured"})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-start justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1 pr-2",children:[e.jsx("h3",{className:"text-luxury-black line-clamp-1 text-sm font-medium",children:s==="ar"?t.title_ar:t.title_en}),e.jsx("p",{className:"text-muted-foreground line-clamp-2 text-xs",children:t.category?.name_en})]}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:j=>{j.stopPropagation()},children:e.jsx(ue,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[t.price," ",t.priceType?.name_en||"KD"]}),t.is_negotiable&&e.jsx($,{variant:"outline",className:"text-xs",children:s==="ar"?"قابل للتفاوض":"Negotiable"})]}),e.jsxs("div",{className:"text-muted-foreground flex items-center justify-between text-xs",children:[e.jsxs("span",{children:[s==="ar"?t.condition?.name_ar:t.condition?.name_en," •",s==="ar"?t.governorate?.name_ar:t.governorate?.name_en]}),e.jsx("span",{className:"text-blue-500",children:new Date(t.created_at).toLocaleDateString()})]})]})]})]})},t.id))}),m?.data&&m.data.length>0&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(R,{variant:"secondary",size:"sm",disabled:m.current_page<=1,onClick:()=>p(m.current_page-1),children:[e.jsx(Be,{className:"h-4 w-4"}),s==="ar"?"السابق":"Previous"]}),e.jsx("div",{className:"flex space-x-1",children:(()=>{const t=m.current_page,j=m.last_page,M=2,Z=[],I=[];for(let K=Math.max(2,t-M);K<=Math.min(j-1,t+M);K++)Z.push(K);return t-M>2?I.push(1,"..."):I.push(1),I.push(...Z),j>1&&(t+M<j-1?I.push("...",j):Z.includes(j)||I.push(j)),I.map((K,De)=>{if(K==="...")return e.jsx("span",{className:"text-muted-foreground px-2",children:"..."},`dots-${De}`);const Y=K,ie=Y===t;return e.jsx(R,{variant:ie?"default":"secondary",size:"sm",className:`w-10 ${ie?"bg-luxury-black hover:bg-luxury-black text-white":""}`,onClick:()=>p(Y),children:Y},Y)})})()}),e.jsxs(R,{variant:"secondary",size:"sm",disabled:m.current_page>=m.last_page,onClick:()=>p(m.current_page+1),children:[s==="ar"?"التالي":"Next",e.jsx(me,{className:"h-4 w-4"})]})]})})]})}),e.jsx(le,{})]}),e.jsx(ze,{isOpen:l,onClose:()=>h(!1),onSuccess:()=>h(!1)})]})};export{Xt as default};
