import{d as Gs,n as ze,r as c,j as e,e as We,g as qs,h as Ys,B as Js,c as R,m as Zs,l as Qs,u as Fe,H as Te,b as g}from"./app-CYM3PNp1.js";import{a as T,B as m,b as Be,H as ke,F as Re,A as Xs,D as Z,c as Ie,d as Q,e as X,f as ee,L as _,I as F,T as ea,g as sa,h as se,i as ae,R as aa,j as je}from"./Header-DA3gVkAs.js";import{Z as ta,H as ra,T as Le,P as ia}from"./ProductDetails-CrU9opaQ.js";import{C as j,a as v,b as W,c as B}from"./card-DybmNR5W.js";import{C as la}from"./check-25m0aqsS.js";import{S as Oe}from"./star-bNd_ZkMP.js";import{C as oe}from"./crown-Bbso2q9j.js";import{e as He,R as na,T as oa,P as ca,W as da,C as ma,b as xa,D as pa,a as Ke,O as ha}from"./index-lGUcocfo.js";import{A as ua,a as ga,b as fa}from"./avatar-fZMh2QDr.js";import{u as ja}from"./use-cached-pagination-XOG_ksOY.js";import{u as va}from"./use-favorites-D4rulAtm.js";import{U as Ue}from"./user-layout-5ZUOUSTv.js";import{S as Na}from"./shield-5WKs1NcE.js";import{S as ve}from"./square-pen-DSGZj8Uk.js";import{U as _a}from"./user-DUWpCqQX.js";import{H}from"./heart-CvLEnSzo.js";import{P as te}from"./package-D3-wMe6E.js";import{C as Me}from"./credit-card-BlULa5wH.js";import{S as ba,L as ya}from"./settings-BDBjvKmM.js";import{T as Ne}from"./trending-up-kY_d_fhE.js";import{C as wa}from"./clock-DMBsYl4g.js";import{E as Da}from"./eye-CWQwS0J3.js";import{T as Sa}from"./trash-2-DoNEwY_E.js";import"./useQuery-Bj3j9lpv.js";import"./phone-B1eFJkam.js";import"./index-5_OapAfH.js";import"./index-BjeYhCr2.js";import"./index-9C-OFnSJ.js";import"./index-D1RNmNR_.js";import"./loader-circle-CjQXy7au.js";import"./search-CV99GWnC.js";import"./select-RQj9Tz0p.js";import"./index-C5HyJD3C.js";import"./index-BdQq_4o_.js";import"./index-jx13VkyA.js";import"./plus-CetcI2CD.js";import"./upload-_oxLuyQG.js";import"./index-dfFKHXjz.js";import"./use-forced-theme-Bq8pa95d.js";/* empty css            *//**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ca=Gs("CircleCheck",Aa),Pa=({currentSubscription:t,onPlanSelect:o,selectedPlanId:n,onUpgrade:p,isUpgrading:u=!1})=>{const{language:i}=ze(),[D,a]=c.useState([]),[U,S]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const d=localStorage.getItem("authToken");if(!d)return;const A=await(await fetch("/api/user/subscription-plans/upgrade-options-for-profile",{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}})).json();A.success&&a(A.data||[])}catch(d){console.error("Error loading upgrade plans:",d)}finally{S(!1)}})()},[t]);const ce=r=>{o(r)},de=()=>{n&&p(n)},re=r=>i==="ar"?r.name_ar:r.name_en,me=r=>{const d=[];return r.ad_limit>0&&(i==="ar"?d.push(`${r.ad_limit} إعلان شهرياً`):d.push(`${r.ad_limit} ads per month`)),r.has_unlimited_featured_ads?i==="ar"?d.push("إعلانات مميزة غير محدودة"):d.push("Unlimited featured ads"):r.featured_ads_count&&r.featured_ads_count>0&&(i==="ar"?d.push(`${r.featured_ads_count} إعلان مميز`):d.push(`${r.featured_ads_count} featured ads`)),r.priority_support&&(i==="ar"?d.push("دعم أولوي"):d.push("Priority support")),r.analytics&&(i==="ar"?d.push("تحليلات متقدمة"):d.push("Advanced analytics")),r.readable_billing_cycle&&(i==="ar"?d.push(`دورة فوترة: ${r.readable_billing_cycle}`):d.push(`Billing: ${r.readable_billing_cycle}`)),r.is_lifetime&&(i==="ar"?d.push("اشتراك مدى الحياة"):d.push("Lifetime subscription")),d.length===0&&(i==="ar"?(d.push("إعلانات أساسية"),d.push("دعم قياسي")):(d.push("Basic listings"),d.push("Standard support"))),d},V=r=>{const d=re(r).toLowerCase();return d.includes("free")||d.includes("مجاني")?ta:d.includes("silver")||d.includes("فضي")?Oe:d.includes("gold")||d.includes("ذهبي")?oe:Oe};return U?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:i==="ar"?"font-arabic":"",children:i==="ar"?"جاري تحميل خطط الترقية...":"Loading upgrade plans..."})]})}):e.jsxs("div",{className:`flex flex-col h-full ${i==="ar"?"rtl":"ltr"}`,children:[e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:`text-lg font-semibold mb-3 ${i==="ar"?"font-arabic":""}`,children:i==="ar"?"خطة الاشتراك الحالية":"Current Subscription Plan"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-medium text-lg ${i==="ar"?"font-arabic":""}`,children:i==="ar"?t.plan.name_ar:t.plan.name_en}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx("p",{className:`text-sm text-muted-foreground ${i==="ar"?"font-arabic":""}`,children:i==="ar"?`${t.plan.ad_limit||"N/A"} إعلان شهرياً`:`${t.plan.ad_limit||"N/A"} ads per month`}),e.jsxs("p",{className:`text-sm font-medium ${i==="ar"?"font-arabic":""}`,children:["KD ",t.plan.price]})]})]}),e.jsx(T,{variant:"outline",className:"ml-4",children:i==="ar"?"نشط":"Active"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(r=>{V(r);const d=n===r.id,G=me(r);return e.jsx(j,{className:`flex flex-col h-full cursor-pointer transition-all hover:shadow-lg ${d?"ring-2 ring-primary border-primary":"hover:border-primary/50"}`,onClick:()=>ce(r.id),children:e.jsxs(v,{className:"p-6 flex flex-col h-full",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h4",{className:`text-lg font-semibold mb-1 ${i==="ar"?"font-arabic":""}`,children:re(r)}),(r.description_en||r.description_ar)&&e.jsx("p",{className:`text-sm text-muted-foreground mb-3 ${i==="ar"?"font-arabic":""}`,children:i==="ar"?r.description_ar:r.description_en}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.plan.is_lifetime?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:`text-2xl font-bold ${i==="ar"?"font-arabic":""}`,children:r.price===0?i==="ar"?"مجاني":"Free":`KD ${r.price}`}),e.jsx(T,{variant:"outline",className:"mt-1 text-xs",children:i==="ar"?"لا يوجد خصم للخطط الدائمة":"No discount for lifetime plans"})]}):r.discounted_price!==void 0&&r.original_price!==void 0&&r.discounted_price<r.original_price?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-2xl font-bold text-green-600 ${i==="ar"?"font-arabic":""}`,children:["KD ",r.discounted_price.toFixed(2)]}),e.jsxs("span",{className:`text-lg line-through text-muted-foreground ${i==="ar"?"font-arabic":""}`,children:["KD ",r.original_price]})]}),e.jsx(T,{variant:"destructive",className:"mt-1",children:i==="ar"?`وفر KD ${r.discount_amount?.toFixed(2)}`:`Save KD ${r.discount_amount?.toFixed(2)}`})]}):e.jsx("span",{className:`text-2xl font-bold ${i==="ar"?"font-arabic":""}`,children:r.price===0?i==="ar"?"مجاني":"Free":`KD ${r.price}`}),r.price>0&&e.jsx("span",{className:`text-sm text-muted-foreground ${i==="ar"?"font-arabic":""}`,children:r.is_lifetime?i==="ar"?"مدى الحياة":"Lifetime":`/${r.months_count} ${i==="ar"?"شهر":"months"}`})]}),r.price>0&&e.jsx(T,{variant:"secondary",className:"mb-4",children:i==="ar"?"مدفوع":"Paid"})]}),G.length>0&&e.jsx("ul",{className:"space-y-2 flex-1",children:G.map((A,xe)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(la,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:`text-sm ${i==="ar"?"font-arabic":""}`,children:A.trim()})]},xe))}),e.jsx(m,{className:`w-full mt-4 ${d?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-primary hover:text-primary-foreground"}`,variant:d?"default":"outline",children:d?i==="ar"?"محدد":"Selected":i==="ar"?"اختر هذه الخطة":"Select This Plan"})]})},r.id)})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:`text-sm text-muted-foreground ${i==="ar"?"font-arabic":""}`,children:i==="ar"?"سيتم حساب الخصم بناءً على الأيام المتبقية في اشتراكك الحالي":"Discount will be calculated based on remaining days in your current subscription"})}),n&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx(m,{onClick:de,disabled:u,className:"w-full max-w-md",size:"lg",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),i==="ar"?"جاري الترقية...":"Upgrading..."]}):i==="ar"?"ترقية الاشتراك":"Upgrade Subscription"})})]})};var Ve="AlertDialog",[$a,zt]=qs(Ve,[He]),k=He(),Ge=t=>{const{__scopeAlertDialog:o,...n}=t,p=k(o);return e.jsx(na,{...p,...n,modal:!0})};Ge.displayName=Ve;var Ea="AlertDialogTrigger",qe=c.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...p}=t,u=k(n);return e.jsx(oa,{...u,...p,ref:o})});qe.displayName=Ea;var Fa="AlertDialogPortal",Ye=t=>{const{__scopeAlertDialog:o,...n}=t,p=k(o);return e.jsx(ca,{...p,...n})};Ye.displayName=Fa;var Ta="AlertDialogOverlay",Je=c.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...p}=t,u=k(n);return e.jsx(ha,{...u,...p,ref:o})});Je.displayName=Ta;var K="AlertDialogContent",[ka,Ra]=$a(K),Ia=Js("AlertDialogContent"),Ze=c.forwardRef((t,o)=>{const{__scopeAlertDialog:n,children:p,...u}=t,i=k(n),D=c.useRef(null),a=We(o,D),U=c.useRef(null);return e.jsx(da,{contentName:K,titleName:Qe,docsSlug:"alert-dialog",children:e.jsx(ka,{scope:n,cancelRef:U,children:e.jsxs(ma,{role:"alertdialog",...i,...u,ref:a,onOpenAutoFocus:Ys(u.onOpenAutoFocus,S=>{S.preventDefault(),U.current?.focus({preventScroll:!0})}),onPointerDownOutside:S=>S.preventDefault(),onInteractOutside:S=>S.preventDefault(),children:[e.jsx(Ia,{children:p}),e.jsx(Oa,{contentRef:D})]})})})});Ze.displayName=K;var Qe="AlertDialogTitle",Xe=c.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...p}=t,u=k(n);return e.jsx(xa,{...u,...p,ref:o})});Xe.displayName=Qe;var es="AlertDialogDescription",ss=c.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...p}=t,u=k(n);return e.jsx(pa,{...u,...p,ref:o})});ss.displayName=es;var La="AlertDialogAction",as=c.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...p}=t,u=k(n);return e.jsx(Ke,{...u,...p,ref:o})});as.displayName=La;var ts="AlertDialogCancel",rs=c.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...p}=t,{cancelRef:u}=Ra(ts,n),i=k(n),D=We(o,u);return e.jsx(Ke,{...i,...p,ref:D})});rs.displayName=ts;var Oa=({contentRef:t})=>{const o=`\`${K}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${K}\` by passing a \`${es}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${K}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(o)},[o,t]),null},Ua=Ge,Ma=qe,za=Ye,is=Je,ls=Ze,ns=as,os=rs,cs=Xe,ds=ss;const Wa=Ua,Ba=Ma,Ha=za,ms=c.forwardRef(({className:t,...o},n)=>e.jsx(is,{className:R("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...o,ref:n}));ms.displayName=is.displayName;const xs=c.forwardRef(({className:t,...o},n)=>e.jsxs(Ha,{children:[e.jsx(ms,{}),e.jsx(ls,{ref:n,className:R("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o})]}));xs.displayName=ls.displayName;const ps=({className:t,...o})=>e.jsx("div",{className:R("flex flex-col space-y-2 text-center sm:text-left",t),...o});ps.displayName="AlertDialogHeader";const hs=({className:t,...o})=>e.jsx("div",{className:R("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...o});hs.displayName="AlertDialogFooter";const us=c.forwardRef(({className:t,...o},n)=>e.jsx(cs,{ref:n,className:R("text-lg font-semibold",t),...o}));us.displayName=cs.displayName;const gs=c.forwardRef(({className:t,...o},n)=>e.jsx(ds,{ref:n,className:R("text-sm text-muted-foreground",t),...o}));gs.displayName=ds.displayName;const fs=c.forwardRef(({className:t,...o},n)=>e.jsx(ns,{ref:n,className:R(Be(),t),...o}));fs.displayName=ns.displayName;const js=c.forwardRef(({className:t,...o},n)=>e.jsx(os,{ref:n,className:R(Be({variant:"outline"}),"mt-2 sm:mt-0",t),...o}));js.displayName=os.displayName;function Wt({user:t,requiresAuth:o,stats:n,recentListings:p,recentWishlist:u,subscriptionPlans:i,transactions:D}){const{language:a,toggleLanguage:U}=ze(),{isAuthenticated:S,logout:ce}=Zs(),[de,re]=c.useState("overview"),[me,V]=c.useState(!1),[r,d]=c.useState({email:!0,sms:!1,push:!0}),[G,A]=c.useState(!1),[xe,pe]=c.useState(!1),[vs,I]=c.useState(!1),[Ka,Va]=c.useState(null),[_e,be]=c.useState(void 0),[Ns,ye]=c.useState(!1),[Ga,qa]=c.useState(null),[N,q]=c.useState(null),[_s,he]=c.useState(!1),[bs,ys]=c.useState(""),[ws,ue]=c.useState(!1),[Ds,Ss]=c.useState(""),[we,Ya]=c.useState(p||[]),[ie,As]=c.useState(u||[]),[h,M]=c.useState({}),[Cs,C]=c.useState(!1),{toggleFavorite:Ps}=va(),{addToast:De}=Qs(),{data:Se,paginationState:Y,goToPage:$s,refetch:b}=ja({endpoint:"/profile/listings",initialPage:1,initialPerPage:"5",initialSearch:"",initialFilters:{}}),ge=Se?.data||p||[],y=Se,Ae=s=>{const l=window.scrollY;$s(s),setTimeout(()=>{window.scrollTo(0,l)},100)},Es=s=>{console.log("Updating edit form data:",s),M(l=>{const f={...l,...s};return console.log("New edit form data:",f),f})};c.useEffect(()=>{console.log("Edit form data changed:",h)},[h]);const Fs=async s=>{try{await Ps(s),As(l=>l?.filter(f=>f.id!==s)||[])}catch(l){console.error("Error removing from wishlist:",l)}},{data:L,setData:P,post:Ts,processing:Ja}=Fe({name_en:"",name_ar:"",email:"",phone:"",phone_whatsapp:"",bio_en:"",bio_ar:"",governorate_id:""});c.useEffect(()=>{t&&P({name_en:t.name_en||"",name_ar:t.name_ar||"",email:t.email||"",phone:t.phone||"",phone_whatsapp:t.phone_whatsapp||"",bio_en:t.bio_en||"",bio_ar:t.bio_ar||"",governorate_id:t.governorate?.id?.toString()||""})},[t,P]);const{data:Za,setData:Qa,post:Xa,processing:et}=Fe({plan_id:_e||0}),ks=()=>{Ts("/profile",{onSuccess:()=>{A(!1)}})},Rs=async s=>{ye(!0);try{const l=localStorage.getItem("authToken");if(!l)throw new Error("No authentication token found");const $=await(await fetch("/api/user/subscription/upgrade-from-profile",{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({subscription_plan_id:s})})).json();if($.success)pe(!1),be(void 0),De({type:"success",title:a==="ar"?"تم ترقية الاشتراك":"Subscription Upgraded",message:a==="ar"?"تم ترقية الاشتراك بنجاح":"Subscription upgraded successfully"}),window.location.reload();else throw new Error($.message||"Upgrade failed")}catch(l){console.error("Upgrade failed:",l),De({type:"error",title:a==="ar"?"فشل في الترقية":"Upgrade Failed",message:a==="ar"?"فشل في ترقية الاشتراك":"Failed to upgrade subscription"})}finally{b(),ye(!1)}},Is=s=>{g.delete(`/profile/ads/${s}`,{onSuccess:()=>{b()},onError:l=>{console.error("Failed to delete ad:",l)}})},Ls=s=>{g.put(`/profile/ads/${s}`,{status:"expired"},{onSuccess:()=>{b()},onError:l=>{console.error("Failed to expire ad:",l)}})},Os=s=>{g.put(`/profile/ads/${s}`,{status:"active"},{onSuccess:()=>{b()},onError:l=>{console.error("Failed to reactivate ad:",l)}})},Us=s=>{g.put(`/profile/ads/${s}`,{status:"sold"},{onSuccess:()=>{b()},onError:l=>{console.error("Failed to mark ad as sold:",l)}})},Ms=s=>{let l="";s.status==="inactive"?l=a==="ar"?"تم إلغاء تفعيل هذا الإعلان. يرجى التواصل مع الدعم الفني لإعادة تفعيله.":"This ad has been deactivated. Please contact support to reactivate it.":s.status==="expired"?l=a==="ar"?"انتهت صلاحية هذا الإعلان. يرجى التواصل مع الدعم الفني لإعادة تفعيله.":"This ad has expired. Please contact support to reactivate it.":l=a==="ar"?"هذا الإعلان غير نشط حالياً. يرجى التواصل مع الدعم الفني لإعادة تفعيله.":"This ad is currently inactive. Please contact support to reactivate it.",Ss(l),ue(!0)},zs=s=>{g.post(`/profile/ads/${s}/feature`,{},{preserveScroll:!0,onSuccess:()=>{b()},onError:l=>{console.error("Failed to feature ad:",l)}})},Ws=s=>{if(console.log("Editing ad:",s),s.status==="draft"){const f={category_id:s.category_id,title_en:s.title_en,title_ar:s.title_ar,description_en:s.description_en,description_ar:s.description_ar,product_details_en:s.product_details_en||"",product_details_ar:s.product_details_ar||"",condition_id:s.condition_id,governorate_id:s.governorate_id,price:s.price?.toString()||"",price_type_id:s.price_type_id,is_negotiable:s.is_negotiable||!1,images:s.images?.map(x=>x.url)||[],draftAdId:s.id,current_step:s.current_step||1};localStorage.setItem("sell-draft",JSON.stringify(f));const $={1:"category",2:"details",3:"subscription",4:"submitted"},fe=s.current_step||1,J=$[fe]||"details";g.visit(`/sell/${J}`);return}q(s);const l={category_id:s.category_id,title_en:s.title_en,title_ar:s.title_ar,description_en:s.description_en,description_ar:s.description_ar,product_details_en:s.product_details_en||"",product_details_ar:s.product_details_ar||"",condition_id:s.condition_id,governorate_id:s.governorate_id,price:s.price?.toString()||"",price_type_id:s.price_type_id,is_negotiable:s.is_negotiable||!1,images:s.images?.map(f=>f.url)||[]};console.log("Form data:",l),M(l),I(!0)},Bs=()=>{if(!N)return;C(!0);const s={category_id:h.category_id,title_en:h.title_en,title_ar:h.title_ar,description_en:h.description_en,description_ar:h.description_ar,product_details_en:h.product_details_en,product_details_ar:h.product_details_ar,condition_id:h.condition_id,governorate_id:h.governorate_id,price:h.price,price_type_id:h.price_type_id,is_negotiable:h.is_negotiable?"1":"0"};N.is_approved===!1&&(s.is_approved=null);const l=h.images&&h.images.some(x=>typeof x=="string"&&x.startsWith("data:image/")),f=!h.images||h.images.length===0,$=N.images?.map(x=>x.id)||[],fe=h.images?.filter(x=>typeof x=="object"&&"id"in x).map(x=>x.id)||[],J=$.filter(x=>!fe.includes(x));if(console.log(l,"hasNewImages"),l){const x=new FormData;Object.entries(s).forEach(([w,E])=>{E!=null&&x.append(w,E.toString())}),J.forEach((w,E)=>{x.append(`removed_images[${E}]`,w.toString())});let O=0;h.images?.forEach(w=>{if(typeof w=="string"&&w.startsWith("data:image/")){const E=atob(w.split(",")[1]),Pe=w.split(",")[0].split(":")[1].split(";")[0],$e=new ArrayBuffer(E.length),Ks=new Uint8Array($e);for(let ne=0;ne<E.length;ne++)Ks[ne]=E.charCodeAt(ne);const Vs=new Blob([$e],{type:Pe}),Ee=new File([Vs],`image_${O}.jpg`,{type:Pe});x.append(`images[${O}]`,Ee),O++,console.log("Added image:",Ee)}}),x.append("_method","PUT"),g.post(`/profile/ads/${N.id}`,x,{forceFormData:!0,onSuccess:()=>{C(!1),b(),I(!1),q(null),M({})},onError:w=>{C(!1),console.error("Failed to update ad:",w)}})}else if(f&&N.images&&N.images.length>0){const x={...s,clear_images:!0};g.put(`/profile/ads/${N.id}`,x,{onSuccess:()=>{C(!1),b(),I(!1),q(null),M({})},onError:O=>{C(!1),console.error("Failed to update ad:",O)}})}else if(J.length>0){const x={...s,removed_images:J};g.put(`/profile/ads/${N.id}`,x,{onSuccess:()=>{C(!1),b(),I(!1),q(null),M({})},onError:O=>{C(!1),console.error("Failed to update ad:",O)}})}else g.put(`/profile/ads/${N.id}`,s,{onSuccess:()=>{C(!1),b(),I(!1),q(null),M({})},onError:x=>{C(!1),console.error("Failed to update ad:",x)}})},z=s=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:0}).format(s),le=()=>!(!t?.subscription?.is_active||!t.subscription.plan.analytics),Hs=s=>s.status==="draft"?"draft":s.status==="active"&&s.is_approved===null?"pending":s.status==="active"&&s.is_approved===!1?"rejected":s.status==="active"&&s.is_approved===!0?"active":s.status,Ce=s=>{const l=Hs(s),f={active:{color:"bg-green-100 text-green-800",text:a==="ar"?"نشط":"Active"},inactive:{color:"bg-gray-100 text-gray-800",text:a==="ar"?"غير نشط":"Inactive"},sold:{color:"bg-blue-100 text-blue-800",text:a==="ar"?"مباع":"Sold"},expired:{color:"bg-yellow-100 text-yellow-800",text:a==="ar"?"منتهي":"Expired"},draft:{color:"bg-gray-100 text-gray-800",text:a==="ar"?"مسودة":"Draft"},pending:{color:"bg-yellow-100 text-yellow-800",text:a==="ar"?"قيد المراجعة":"Under Review"},rejected:{color:"bg-red-100 text-red-800",text:a==="ar"?"مرفوض":"Rejected"}},$=f[l]||f.inactive;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:$.color,children:$.text}),l==="rejected"&&s.reject_reason&&e.jsx(m,{variant:"outline",size:"sm",onClick:()=>{ys(s.reject_reason||""),he(!0)},className:"text-xs",children:a==="ar"?"عرض السبب":"View Reason"})]})};if(o&&!S)return e.jsxs(Ue,{children:[e.jsx(Te,{title:"Profile"}),e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(ke,{}),e.jsx("main",{className:"main-content py-16",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"mb-4 text-3xl font-bold",children:"Authentication Required"}),e.jsx("p",{className:"mb-6 text-gray-600",children:"Please log in to view your profile."}),e.jsx(m,{onClick:()=>V(!0),children:"Login"})]})})}),e.jsx(Re,{})]}),e.jsx(Xs,{isOpen:me,onClose:()=>V(!1),onSuccess:()=>{V(!1),window.location.reload()}})]});if(!t){g.visit("/");return}return e.jsxs(Ue,{children:[e.jsx(Te,{title:"Profile"}),e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(ke,{}),e.jsx("main",{className:"main-content py-16",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:`mb-8 ${a==="ar"?"rtl":""}`,children:[e.jsx("div",{className:"mb-4",children:e.jsxs(m,{variant:"outline",onClick:()=>g.visit("/"),className:"flex items-center gap-2",children:[e.jsx(ra,{className:"h-4 w-4"}),e.jsx("span",{className:a==="ar"?"font-arabic":"",children:a==="ar"?"العودة للرئيسية":"Go to Home"})]})}),e.jsxs("div",{className:"flex flex-col items-start gap-6 md:flex-row md:items-center",children:[e.jsxs(ua,{className:"h-24 w-24",children:[e.jsx(ga,{src:t.profile_picture_url}),e.jsx(fa,{className:"text-2xl",children:a==="ar"?t.name_ar[0]:t.name_en[0]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[e.jsx("h1",{className:`text-3xl font-bold ${a==="ar"?"font-arabic":"font-serif"}`,children:a==="ar"?t.name_ar:t.name_en}),e.jsxs(T,{className:"bg-green-100 text-green-800",children:[e.jsx(Na,{className:"mr-1 h-3 w-3"}),a==="ar"?"موثق":"Verified"]}),t.subscription&&e.jsxs(T,{className:"bg-yellow-100 text-yellow-800",children:[e.jsx(oe,{className:"mr-1 h-3 w-3"}),a==="ar"?t.subscription.plan.name_ar:t.subscription.plan.name_en]})]}),e.jsx("div",{className:"text-muted-foreground mb-4 flex items-center gap-6 text-sm",children:e.jsxs("span",{children:[a==="ar"?"عضو منذ":"Member since"," ",new Date(t.created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"})]})}),e.jsxs(Z,{open:G,onOpenChange:A,children:[e.jsx(Ie,{asChild:!0,children:e.jsxs(m,{children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),a==="ar"?"تعديل الملف الشخصي":"Edit Profile"]})}),e.jsxs(Q,{className:"max-w-2xl",children:[e.jsx(X,{children:e.jsx(ee,{children:a==="ar"?"تعديل الملف الشخصي":"Edit Profile"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"name_en",children:a==="ar"?"الاسم (إنجليزي)":"Name (English)"}),e.jsx(F,{id:"name_en",value:L.name_en,onChange:s=>P("name_en",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"name_ar",children:a==="ar"?"الاسم (عربي)":"Name (Arabic)"}),e.jsx(F,{id:"name_ar",value:L.name_ar,onChange:s=>P("name_ar",s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"email",children:a==="ar"?"البريد الإلكتروني":"Email"}),e.jsx(F,{id:"email",type:"email",value:L.email||"",onChange:s=>P("email",s.target.value),placeholder:a==="ar"?"أدخل البريد الإلكتروني (اختياري)":"Enter email (optional)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"phone",children:a==="ar"?"رقم الهاتف":"Phone"}),e.jsx(F,{id:"phone",value:L.phone,onChange:s=>P("phone",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"phone_whatsapp",children:a==="ar"?"واتساب":"WhatsApp"}),e.jsx(F,{id:"phone_whatsapp",value:L.phone_whatsapp,onChange:s=>P("phone_whatsapp",s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"bio_en",children:a==="ar"?"نبذة (إنجليزي)":"Bio (English)"}),e.jsx(Le,{id:"bio_en",value:L.bio_en,onChange:s=>P("bio_en",s.target.value),rows:3})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"bio_ar",children:a==="ar"?"نبذة (عربي)":"Bio (Arabic)"}),e.jsx(Le,{id:"bio_ar",value:L.bio_ar,onChange:s=>P("bio_ar",s.target.value),rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(m,{variant:"outline",onClick:()=>A(!1),children:a==="ar"?"إلغاء":"Cancel"}),e.jsx(m,{onClick:ks,children:a==="ar"?"حفظ":"Save"})]})]})]})]})]})]})]}),e.jsxs(ea,{value:de,onValueChange:re,className:a==="ar"?"rtl":"",children:[e.jsxs(sa,{className:"grid w-full grid-cols-5 lg:inline-flex lg:w-auto lg:grid-cols-none",children:[e.jsxs(se,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"نظرة عامة":"Overview"})]}),e.jsxs(se,{value:"wishlist",className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"المفضلة":"Wishlist"})]}),e.jsxs(se,{value:"listings",className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"إعلاناتي":"My Listings"})]}),e.jsxs(se,{value:"billing",className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"الفواتير":"Billing"})]}),e.jsxs(se,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(ba,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"الإعدادات":"Settings"})]})]}),e.jsxs(ae,{value:"overview",className:"mt-6",children:[e.jsxs("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(j,{children:e.jsxs(v,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:n?.active_listings??0}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"إعلان نشط":"Active Listings"})]})}),e.jsx(j,{children:e.jsxs(v,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:n?.total_sales??0}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"مبيعات مكتملة":"Total Sales"})]})}),e.jsx(j,{children:e.jsxs(v,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:le()?ge.reduce((s,l)=>s+(l.views_count||0),0):"-"}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"إجمالي المشاهدات":"Total Ad Views"})]})}),e.jsx(j,{children:e.jsxs(v,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:n?.wishlist_items??0}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"عنصر مفضل":"Wishlist Items"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs(j,{children:[e.jsx(W,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),a==="ar"?"الإعلانات الأخيرة":"Recent Listings"]})}),e.jsx(v,{className:"space-y-4",children:we.length>0?we.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center overflow-hidden rounded bg-gray-100",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(te,{className:"h-6 w-6 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:a==="ar"?s.title_ar:s.title_en}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[z(s.price),le()&&e.jsxs(e.Fragment,{children:[" ","• ",s.views_count," ",a==="ar"?"مشاهدة":"views"]})]})]}),Ce(s)]},s.id)):e.jsx("div",{className:"text-muted-foreground py-4 text-center",children:a==="ar"?"لا توجد إعلانات":"No listings yet"})})]}),e.jsxs(j,{children:[e.jsx(W,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),a==="ar"?"المفضلة الأخيرة":"Recent Wishlist"]})}),e.jsx(v,{className:"space-y-4",children:(ie?.length??0)>0?ie?.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center overflow-hidden rounded bg-gray-100",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(H,{className:"h-6 w-6 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:a==="ar"?s.title_ar:s.title_en}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[z(s.price)," • ",a==="ar"?"بواسطة":"by"," ",a==="ar"?s.user?.name_ar:s.user?.name_en]})]})]},s.id)):e.jsx("div",{className:"text-muted-foreground py-4 text-center",children:a==="ar"?"لا توجد عناصر في المفضلة":"No wishlist items yet"})})]})]})]}),e.jsx(ae,{value:"wishlist",className:"mt-6",children:e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:(ie?.length??0)>0?ie?.map(s=>e.jsxs(j,{className:"group cursor-pointer transition-all duration-300 hover:shadow-lg",onClick:()=>g.visit(`/product/${s.id}`),children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex h-48 w-full items-center justify-center overflow-hidden bg-gray-100",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(H,{className:"h-12 w-12 text-gray-400"})}),e.jsx(m,{variant:"outline",size:"icon",className:"absolute right-3 top-3 h-8 w-8 border-none bg-white/90 text-red-500 hover:bg-white",onClick:l=>{l.stopPropagation(),Fs(s.id)},children:e.jsx(H,{className:"h-4 w-4 fill-current"})})]}),e.jsxs(v,{className:"p-4",children:[e.jsx("h3",{className:"mb-2 line-clamp-2 font-semibold",children:a==="ar"?s.title_ar:s.title_en}),e.jsx("div",{className:"text-brand-red-600 mb-2 text-lg font-bold",children:z(s.price)}),e.jsx("div",{className:"text-muted-foreground mb-1 text-sm",children:e.jsx("span",{className:"font-medium",children:a==="ar"?s.category?.name_ar:s.category?.name_en})}),e.jsxs("div",{className:"text-muted-foreground text-sm",children:[a==="ar"?"بواسطة":"by"," ",a==="ar"?s.user?.name_ar:s.user?.name_en]})]})]},s.id)):e.jsxs("div",{className:"col-span-full py-12 text-center",children:[e.jsx(H,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:a==="ar"?"لا توجد عناصر في المفضلة":"No wishlist items"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a==="ar"?"ابدأ بإضافة المنتجات إلى مفضلتك":"Start adding products to your wishlist"}),e.jsx(m,{onClick:()=>g.visit("/products"),children:a==="ar"?"تصفح المنتجات":"Browse Products"})]})})}),e.jsx(ae,{value:"listings",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs(m,{onClick:()=>{localStorage.removeItem("sell-draft"),g.visit("/sell/category")},className:"bg-brand-red-600 hover:bg-brand-red-700",children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),a==="ar"?"إنشاء إعلان جديد":"Create New Listing"]})}),ge.length>0?e.jsxs(e.Fragment,{children:[ge.map(s=>e.jsx(j,{children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center overflow-hidden rounded bg-gray-100",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(te,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:a==="ar"?s.title_ar:s.title_en}),e.jsxs("div",{className:"flex items-center gap-2",children:[Ce(s),s.is_featured&&e.jsxs(T,{className:"border-yellow-200 bg-yellow-100 text-yellow-800",children:[e.jsx(Ne,{className:"mr-1 h-3 w-3"}),a==="ar"?"مميز":"Featured"]})]})]}),e.jsxs("div",{className:"text-muted-foreground mb-3 flex items-center gap-6 text-sm",children:[e.jsx("span",{className:"text-lg font-bold",children:z(s.price)}),le()&&e.jsxs("span",{children:[s.views_count," ",a==="ar"?"مشاهدة":"views"]}),le()&&e.jsxs("span",{children:[s.contact_count," ",a==="ar"?"اتصال":"contacts"]}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex gap-2",children:[s.status!=="sold"&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Ws(s),children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),a==="ar"?"تعديل":"Edit"]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>zs(s.id),className:s.is_featured?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"",children:[e.jsx(Ne,{className:"mr-2 h-4 w-4"}),s.is_featured?a==="ar"?"إلغاء التمييز":"Unfeature":a==="ar"?"مميز":"Feature"]})]}),s.status==="active"&&e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Ls(s.id),className:"text-orange-600 hover:text-orange-700",children:[e.jsx(wa,{className:"mr-2 h-4 w-4"}),a==="ar"?"انتهاء":"Expire"]}),s.status==="expired"&&e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Os(s.id),className:"text-green-600 hover:text-green-700",children:[e.jsx(aa,{className:"mr-2 h-4 w-4"}),a==="ar"?"إعادة تفعيل":"Reactivate"]}),s.status==="inactive"&&e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Ms(s),className:"text-gray-600 hover:text-gray-700",children:[e.jsx(Da,{className:"mr-2 h-4 w-4"}),a==="ar"?"عرض الرسالة":"View Message"]}),s.status==="active"&&s.is_approved===!0&&e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Us(s.id),className:"text-blue-600 hover:text-blue-700",children:[e.jsx(Ca,{className:"mr-2 h-4 w-4"}),a==="ar"?"تم البيع":"Mark as Sold"]}),s.status!=="sold"&&e.jsxs(Wa,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(m,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive",children:[e.jsx(Sa,{className:"mr-2 h-4 w-4"}),a==="ar"?"حذف":"Delete"]})}),e.jsxs(xs,{children:[e.jsxs(ps,{children:[e.jsx(us,{children:a==="ar"?"تأكيد الحذف":"Confirm Delete"}),e.jsx(gs,{children:a==="ar"?"هل أنت متأكد من أنك تريد حذف هذا الإعلان؟ لا يمكن التراجع عن هذا الإجراء.":"Are you sure you want to delete this ad? This action cannot be undone."})]}),e.jsxs(hs,{children:[e.jsx(js,{children:a==="ar"?"إلغاء":"Cancel"}),e.jsx(fs,{onClick:()=>Is(s.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:a==="ar"?"حذف":"Delete"})]})]})]})]})]})]})})},s.id)),y&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?`عرض ${y.from||0} إلى ${y.to||0} من ${y.total||0} إعلان`:`Showing ${y.from||0} to ${y.to||0} of ${y.total||0} listings`}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>Ae(Y.currentPage-1),disabled:Y.currentPage<=1,children:a==="ar"?"السابق":"Previous"}),e.jsx("span",{className:"text-sm",children:a==="ar"?`صفحة ${Y.currentPage} من ${y.last_page}`:`Page ${Y.currentPage} of ${y.last_page}`}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>Ae(Y.currentPage+1),disabled:!y.next_page_url,children:a==="ar"?"التالي":"Next"})]})]})]}):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(te,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:a==="ar"?"لا توجد إعلانات":"No listings yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a==="ar"?"ابدأ بإنشاء إعلانك الأول":"Start by creating your first listing"}),e.jsx(m,{onClick:()=>{localStorage.removeItem("sell-draft"),g.visit("/sell/category")},children:a==="ar"?"إنشاء إعلان":"Create Listing"})]})]})}),e.jsx(ae,{value:"billing",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs(j,{children:[e.jsx(W,{children:e.jsx(B,{children:a==="ar"?"الخطة الحالية":"Current Plan"})}),e.jsxs(v,{className:"space-y-4",children:[t.subscription?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:a==="ar"?t.subscription.plan.name_ar:t.subscription.plan.name_en}),e.jsxs("div",{className:"text-muted-foreground text-sm",children:[z(t.subscription.plan.price)," /"," ",t.subscription.plan.is_lifetime?a==="ar"?"مدى الحياة":"Lifetime":`${t.subscription.plan.months_count} ${a==="ar"?"شهر":"months"}`]})]}),e.jsxs(T,{className:t.subscription.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:[e.jsx(oe,{className:"mr-1 h-3 w-3"}),t.subscription.is_active?a==="ar"?"نشط":"Active":a==="ar"?"منتهي":"Expired"]})]}),t.subscription.expires_at&&e.jsxs("div",{className:"text-muted-foreground text-sm",children:[a==="ar"?"ينتهي في":"Expires on"," ",new Date(t.subscription.expires_at).toLocaleDateString()]})]}):e.jsxs("div",{className:"py-4 text-center",children:[e.jsx(oe,{className:"mx-auto mb-2 h-8 w-8 text-gray-400"}),e.jsx("p",{className:"text-muted-foreground",children:a==="ar"?"لا توجد خطة نشطة":"No active subscription"})]}),t.subscription?e.jsxs(Z,{open:xe,onOpenChange:pe,children:[e.jsx(Ie,{asChild:!0,children:e.jsx(m,{className:"w-full",children:a==="ar"?"ترقية الاشتراك":"Upgrade Subscription"})}),e.jsxs(Q,{className:"max-h-[80vh] max-w-4xl overflow-y-auto",children:[e.jsx(X,{children:e.jsx(ee,{children:a==="ar"?"ترقية الاشتراك":"Upgrade Subscription"})}),e.jsx("div",{className:"py-4",children:t?.subscription&&e.jsx(Pa,{currentSubscription:{created_at:t.subscription.created_at,id:t.subscription.id,plan:t.subscription.plan,expires_at:t.subscription.expires_at,subscription_plan_id:t.subscription.id,analytics:t.subscription.plan.analytics||!1},onPlanSelect:be,selectedPlanId:_e,onUpgrade:Rs,isUpgrading:Ns})}),e.jsx(je,{children:e.jsx(m,{variant:"outline",onClick:()=>pe(!1),children:a==="ar"?"إلغاء":"Cancel"})})]})]}):e.jsx(e.Fragment,{})]})]}),e.jsxs(j,{children:[e.jsx(W,{children:e.jsx(B,{children:a==="ar"?"سجل المعاملات":"Transaction History"})}),e.jsx(v,{className:"space-y-4",children:(D?.length??0)>0?e.jsx("div",{className:"space-y-3",children:D?.map((s,l)=>e.jsxs("div",{className:"flex items-center justify-between border-b py-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.description}),e.jsxs("div",{className:"text-muted-foreground flex items-center gap-2 text-sm",children:[e.jsx("span",{children:new Date(s.date).toLocaleDateString()}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:s.payment_method}),s.subscription_plan&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:a==="ar"?s.subscription_plan.name_ar:s.subscription_plan.name_en})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold",children:z(s.amount)}),e.jsx("div",{className:`text-xs ${s.status==="completed"?"text-green-600":s.status==="pending"?"text-yellow-600":s.status==="failed"?"text-red-600":"text-gray-600"}`,children:s.status==="completed"?a==="ar"?"مكتمل":"Completed":s.status==="pending"?a==="ar"?"معلق":"Pending":s.status==="failed"?a==="ar"?"فشل":"Failed":s.status})]})]},s.id||l))}):e.jsxs("div",{className:"py-4 text-center",children:[e.jsx(Me,{className:"mx-auto mb-2 h-8 w-8 text-gray-400"}),e.jsx("p",{className:"text-muted-foreground",children:a==="ar"?"لا توجد معاملات":"No transactions yet"})]})})]})]})}),e.jsx(ae,{value:"settings",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs(j,{children:[e.jsx(W,{children:e.jsx(B,{children:a==="ar"?"معلومات الحساب":"Account Information"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"name",children:a==="ar"?"الاسم":"Name"}),e.jsx(F,{id:"name",value:a==="ar"?t.name_ar:t.name_en,disabled:!0})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"email",children:a==="ar"?"البريد الإلكتروني":"Email"}),e.jsx(F,{id:"email",type:"email",value:t.email||(a==="ar"?"غير محدد":"Not set"),disabled:!0})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"phone",children:a==="ar"?"رقم الهاتف":"Phone Number"}),e.jsx(F,{id:"phone",value:t.phone||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"governorate",children:a==="ar"?"المحافظة":"Governorate"}),e.jsx(F,{id:"governorate",value:t.governorate?a==="ar"?t.governorate.name_ar:t.governorate.name_en:"",disabled:!0})]}),e.jsxs(m,{onClick:()=>A(!0),className:"w-full",children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),a==="ar"?"تعديل الملف الشخصي":"Edit Profile"]})]})]}),e.jsxs(j,{children:[e.jsx(W,{children:e.jsx(B,{children:a==="ar"?"التفضيلات":"Preferences"})}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a==="ar"?"اللغة":"Language"}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"العربية":"English"})]}),e.jsx(m,{variant:"outline",onClick:U,children:a==="ar"?"English":"العربية"})]}),e.jsx("div",{className:"border-t pt-6",children:e.jsxs(m,{variant:"outline",onClick:()=>ce(),className:"text-destructive hover:text-destructive hover:bg-destructive/10 w-full",children:[e.jsx(ya,{className:"mr-2 h-4 w-4"}),a==="ar"?"تسجيل الخروج":"Logout"]})})]})]})]})})]})]})}),e.jsx(Re,{}),e.jsx(Z,{open:vs,onOpenChange:I,children:e.jsxs(Q,{className:"flex max-h-[90vh] max-w-4xl flex-col rounded-lg p-0",children:[e.jsx(X,{className:"bg-background flex-shrink-0 rounded-t-lg border-b p-6",children:e.jsx(ee,{children:a==="ar"?"تعديل الإعلان":"Edit Ad"})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx(ia,{formData:h,updateFormData:Es,isSubmitting:Cs})}),e.jsxs("div",{className:"bg-background flex flex-shrink-0 justify-end gap-2 rounded-b-lg border-t p-6",children:[e.jsx(m,{variant:"outline",onClick:()=>I(!1),children:a==="ar"?"إلغاء":"Cancel"}),e.jsx(m,{onClick:Bs,children:N&&N.is_approved===!1?a==="ar"?"حفظ وإرسال للمراجعة":"Save and Send to Review":a==="ar"?"حفظ التغييرات":"Save Changes"})]})]})}),e.jsx(Z,{open:_s,onOpenChange:he,children:e.jsxs(Q,{className:"max-w-md",children:[e.jsx(X,{children:e.jsx(ee,{children:a==="ar"?"سبب الرفض":"Rejection Reason"})}),e.jsx("div",{className:"py-4",children:e.jsx("p",{className:"text-muted-foreground text-sm",children:bs})}),e.jsx(je,{children:e.jsx(m,{onClick:()=>he(!1),children:a==="ar"?"إغلاق":"Close"})})]})}),e.jsx(Z,{open:ws,onOpenChange:ue,children:e.jsxs(Q,{className:"max-w-md",children:[e.jsx(X,{children:e.jsx(ee,{children:a==="ar"?"رسالة الإعلان غير النشط":"Inactive Ad Message"})}),e.jsxs("div",{className:"py-4",children:[e.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:Ds}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("p",{className:"text-muted-foreground text-xs",children:a==="ar"?"لإعادة تفعيل هذا الإعلان، يرجى التواصل معنا على: live-musamemat@support.com":"To reactivate this ad, please contact us at: live-musamemat@support.com"})})]}),e.jsx(je,{children:e.jsx(m,{onClick:()=>ue(!1),children:a==="ar"?"إغلاق":"Close"})})]})})]})]})}export{Wt as default};
