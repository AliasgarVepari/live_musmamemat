import{d as Ae,r as u,f as Ie,j as e,g as Ke,h as L,P as O,e as T,i as Ve,c as Le,n as Te,m as He,H as Be,b as ee}from"./app-uIBbFV7s.js";import{H as oe,F as le,B as R,I as ze,a as V,C as $e,A as Fe}from"./Header-CBnxxvlh.js";import{C as te,a as Oe}from"./card-CRPh_RWT.js";import{S as q,a as W,b as X,c as G,d as P}from"./select-C4szj2fj.js";import{c as fe}from"./index-BdQq_4o_.js";import{u as Ue}from"./index-B66VouJH.js";import{u as Ye}from"./index-D11fCLcl.js";import{a as qe}from"./index-CZeLxcXh.js";import{u as We}from"./use-favorites-CsLJV9mW.js";import{u as Xe}from"./use-cached-pagination-CUdkINS7.js";import{U as ce}from"./user-layout-CPhqkvt1.js";import{u as Ge,s as de}from"./index-D6ddks9M.js";import{L as Je}from"./loader-circle-8zL-8vl0.js";import{C as me}from"./chevron-right-BwP0sTl-.js";import{S as Qe}from"./search-C9k4RQzq.js";import{S as ue}from"./star-Bbywy0m0.js";import{H as xe}from"./heart-B1sJyeMa.js";import{M as he}from"./map-pin-CuSYpetG.js";import"./useQuery-BOwQyM-Z.js";import"./phone-BlRnQl2Q.js";import"./index-CW_uxFBv.js";import"./index-7_aMnH8U.js";import"./check-BKj3NmhL.js";import"./user-Boxb24vn.js";import"./index-C87z0twV.js";import"./use-forced-theme-BDmHQh6w.js";/* empty css            */import"./index-DW9AIAM8.js";import"./index-BX7CGiW0.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],et=Ae("SlidersHorizontal",Ze);var pe=["PageUp","PageDown"],ge=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ve={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},H="Slider",[se,tt,st]=qe(H),[je,Wt]=Ke(H,[st]),[at,J]=je(H),be=u.forwardRef((a,r)=>{const{name:n,min:i=0,max:c=100,step:o=1,orientation:s="horizontal",disabled:d=!1,minStepsBetweenThumbs:f=0,defaultValue:S=[i],value:b,onValueChange:l=()=>{},onValueCommit:h=()=>{},inverted:y=!1,form:C,...x}=a,p=u.useRef(new Set),g=u.useRef(0),m=s==="horizontal"?rt:nt,[v=[],D]=Ie({prop:b,defaultProp:S,onChange:w=>{[...p.current][g.current]?.focus(),l(w)}}),B=u.useRef(v);function z(w){const N=dt(v,w);k(w,N)}function U(w){k(w,g.current)}function Q(){const w=B.current[g.current];v[g.current]!==w&&h(v)}function k(w,N,{commit:A}={commit:!1}){const $=ht(o),F=ft(Math.round((w-i)/o)*o+i,$),E=fe(F,[i,c]);D((t=[])=>{const j=lt(t,E,N);if(xt(j,f*o)){g.current=j.indexOf(E);const M=String(j)!==String(t);return M&&A&&h(j),M?j:t}else return t})}return e.jsx(at,{scope:a.__scopeSlider,name:n,disabled:d,min:i,max:c,valueIndexToChangeRef:g,thumbs:p.current,values:v,orientation:s,form:C,children:e.jsx(se.Provider,{scope:a.__scopeSlider,children:e.jsx(se.Slot,{scope:a.__scopeSlider,children:e.jsx(m,{"aria-disabled":d,"data-disabled":d?"":void 0,...x,ref:r,onPointerDown:L(x.onPointerDown,()=>{d||(B.current=v)}),min:i,max:c,inverted:y,onSlideStart:d?void 0:z,onSlideMove:d?void 0:U,onSlideEnd:d?void 0:Q,onHomeKeyDown:()=>!d&&k(i,0,{commit:!0}),onEndKeyDown:()=>!d&&k(c,v.length-1,{commit:!0}),onStepKeyDown:({event:w,direction:N})=>{if(!d){const F=pe.includes(w.key)||w.shiftKey&&ge.includes(w.key)?10:1,E=g.current,t=v[E],j=o*F*N;k(t+j,E,{commit:!0})}}})})})})});be.displayName=H;var[ye,Se]=je(H,{startEdge:"left",endEdge:"right",size:"width",direction:1}),rt=u.forwardRef((a,r)=>{const{min:n,max:i,dir:c,inverted:o,onSlideStart:s,onSlideMove:d,onSlideEnd:f,onStepKeyDown:S,...b}=a,[l,h]=u.useState(null),y=T(r,m=>h(m)),C=u.useRef(void 0),x=Ue(c),p=x==="ltr",g=p&&!o||!p&&o;function _(m){const v=C.current||l.getBoundingClientRect(),D=[0,v.width],z=ne(D,g?[n,i]:[i,n]);return C.current=v,z(m-v.left)}return e.jsx(ye,{scope:a.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:e.jsx(we,{dir:x,"data-orientation":"horizontal",...b,ref:y,style:{...b.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:m=>{const v=_(m.clientX);s?.(v)},onSlideMove:m=>{const v=_(m.clientX);d?.(v)},onSlideEnd:()=>{C.current=void 0,f?.()},onStepKeyDown:m=>{const D=ve[g?"from-left":"from-right"].includes(m.key);S?.({event:m,direction:D?-1:1})}})})}),nt=u.forwardRef((a,r)=>{const{min:n,max:i,inverted:c,onSlideStart:o,onSlideMove:s,onSlideEnd:d,onStepKeyDown:f,...S}=a,b=u.useRef(null),l=T(r,b),h=u.useRef(void 0),y=!c;function C(x){const p=h.current||b.current.getBoundingClientRect(),g=[0,p.height],m=ne(g,y?[i,n]:[n,i]);return h.current=p,m(x-p.top)}return e.jsx(ye,{scope:a.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:e.jsx(we,{"data-orientation":"vertical",...S,ref:l,style:{...S.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const p=C(x.clientY);o?.(p)},onSlideMove:x=>{const p=C(x.clientY);s?.(p)},onSlideEnd:()=>{h.current=void 0,d?.()},onStepKeyDown:x=>{const g=ve[y?"from-bottom":"from-top"].includes(x.key);f?.({event:x,direction:g?-1:1})}})})}),we=u.forwardRef((a,r)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:c,onSlideEnd:o,onHomeKeyDown:s,onEndKeyDown:d,onStepKeyDown:f,...S}=a,b=J(H,n);return e.jsx(O.span,{...S,ref:r,onKeyDown:L(a.onKeyDown,l=>{l.key==="Home"?(s(l),l.preventDefault()):l.key==="End"?(d(l),l.preventDefault()):pe.concat(ge).includes(l.key)&&(f(l),l.preventDefault())}),onPointerDown:L(a.onPointerDown,l=>{const h=l.target;h.setPointerCapture(l.pointerId),l.preventDefault(),b.thumbs.has(h)?h.focus():i(l)}),onPointerMove:L(a.onPointerMove,l=>{l.target.hasPointerCapture(l.pointerId)&&c(l)}),onPointerUp:L(a.onPointerUp,l=>{const h=l.target;h.hasPointerCapture(l.pointerId)&&(h.releasePointerCapture(l.pointerId),o(l))})})}),Ne="SliderTrack",_e=u.forwardRef((a,r)=>{const{__scopeSlider:n,...i}=a,c=J(Ne,n);return e.jsx(O.span,{"data-disabled":c.disabled?"":void 0,"data-orientation":c.orientation,...i,ref:r})});_e.displayName=Ne;var ae="SliderRange",Ce=u.forwardRef((a,r)=>{const{__scopeSlider:n,...i}=a,c=J(ae,n),o=Se(ae,n),s=u.useRef(null),d=T(r,s),f=c.values.length,S=c.values.map(h=>Re(h,c.min,c.max)),b=f>1?Math.min(...S):0,l=100-Math.max(...S);return e.jsx(O.span,{"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,...i,ref:d,style:{...a.style,[o.startEdge]:b+"%",[o.endEdge]:l+"%"}})});Ce.displayName=ae;var re="SliderThumb",Pe=u.forwardRef((a,r)=>{const n=tt(a.__scopeSlider),[i,c]=u.useState(null),o=T(r,d=>c(d)),s=u.useMemo(()=>i?n().findIndex(d=>d.ref.current===i):-1,[n,i]);return e.jsx(it,{...a,ref:o,index:s})}),it=u.forwardRef((a,r)=>{const{__scopeSlider:n,index:i,name:c,...o}=a,s=J(re,n),d=Se(re,n),[f,S]=u.useState(null),b=T(r,_=>S(_)),l=f?s.form||!!f.closest("form"):!0,h=Ve(f),y=s.values[i],C=y===void 0?0:Re(y,s.min,s.max),x=ct(i,s.values.length),p=h?.[d.size],g=p?mt(p,C,d.direction):0;return u.useEffect(()=>{if(f)return s.thumbs.add(f),()=>{s.thumbs.delete(f)}},[f,s.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${C}% + ${g}px)`},children:[e.jsx(se.ItemSlot,{scope:a.__scopeSlider,children:e.jsx(O.span,{role:"slider","aria-label":a["aria-label"]||x,"aria-valuemin":s.min,"aria-valuenow":y,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...o,ref:b,style:y===void 0?{display:"none"}:a.style,onFocus:L(a.onFocus,()=>{s.valueIndexToChangeRef.current=i})})}),l&&e.jsx(ke,{name:c??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:y},i)]})});Pe.displayName=re;var ot="RadioBubbleInput",ke=u.forwardRef(({__scopeSlider:a,value:r,...n},i)=>{const c=u.useRef(null),o=T(c,i),s=Ye(r);return u.useEffect(()=>{const d=c.current;if(!d)return;const f=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(f,"value").set;if(s!==r&&b){const l=new Event("input",{bubbles:!0});b.call(d,r),d.dispatchEvent(l)}},[s,r]),e.jsx(O.input,{style:{display:"none"},...n,ref:o,defaultValue:r})});ke.displayName=ot;function lt(a=[],r,n){const i=[...a];return i[n]=r,i.sort((c,o)=>c-o)}function Re(a,r,n){const o=100/(n-r)*(a-r);return fe(o,[0,100])}function ct(a,r){return r>2?`Value ${a+1} of ${r}`:r===2?["Minimum","Maximum"][a]:void 0}function dt(a,r){if(a.length===1)return 0;const n=a.map(c=>Math.abs(c-r)),i=Math.min(...n);return n.indexOf(i)}function mt(a,r,n){const i=a/2,o=ne([0,50],[0,i]);return(i-o(r)*n)*n}function ut(a){return a.slice(0,-1).map((r,n)=>a[n+1]-r)}function xt(a,r){if(r>0){const n=ut(a);return Math.min(...n)>=r}return!0}function ne(a,r){return n=>{if(a[0]===a[1]||r[0]===r[1])return r[0];const i=(r[1]-r[0])/(a[1]-a[0]);return r[0]+i*(n-a[0])}}function ht(a){return(String(a).split(".")[1]||"").length}function ft(a,r){const n=Math.pow(10,r);return Math.round(a*n)/n}var De=be,pt=_e,gt=Ce,vt=Pe;const Ee=u.forwardRef(({className:a,...r},n)=>e.jsxs(De,{ref:n,className:Le("relative flex w-full touch-none select-none items-center",a),...r,children:[e.jsx(pt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(gt,{className:"absolute h-full bg-primary"})}),e.jsx(vt,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Ee.displayName=De.displayName;const Xt=({products:a,categories:r,governorates:n,conditions:i,priceTypes:c,filters:o})=>{const{language:s}=Te(),{isAuthenticated:d}=He(),{isFavorited:f,toggleFavorite:S,loading:b}=We(),[l,h]=u.useState(!1),{data:y,isLoading:C,paginationState:x,goToPage:p,setSearch:g,updateFilter:_}=Xe({endpoint:"/api/user/products",initialPage:a?.current_page||1,initialPerPage:o?.per_page||"20",initialSearch:o?.search||"",initialFilters:{category:o?.category||"all",governorate_id:o?.governorate_id||"all",condition_id:o?.condition_id||"all",price_type_id:o?.price_type_id||"all",min_price:o?.min_price||"",max_price:o?.max_price||"",is_negotiable:o?.is_negotiable||"all",sort:o?.sort||"newest"}}),m=y||a,v=r||[],D=n||[],B=i||[],z=c||[],[U,Q]=u.useState(!1),[k,w]=u.useState([0,1e4]),N=v.find(t=>t.slug===x.filters.category),A=t=>{_("category",t)},$=async t=>{if(!d){h(!0);return}try{await S(t)}catch(j){console.error("Error toggling favorite:",j)}},F=t=>{_("sort",t)},E=t=>{w(t),_("min_price",t[0].toString()),_("max_price",t[1].toString())};return C&&!m?e.jsx(ce,{children:e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(oe,{}),e.jsx("main",{className:"main-content py-16",children:e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Je,{className:"mx-auto h-8 w-8 animate-spin"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Loading products..."})]})})}),e.jsx(le,{})]})}):e.jsxs(ce,{children:[e.jsx(Be,{title:"Products"}),e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(oe,{}),e.jsx("main",{className:"main-content py-16",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("nav",{className:`text-muted-foreground mb-6 flex items-center space-x-2 text-sm ${s==="ar"?"rtl space-x-reverse":""}`,children:[e.jsx("span",{onClick:()=>ee.visit(Ge.home()),className:"hover:text-luxury-black cursor-pointer transition-colors",children:s==="ar"?"الرئيسية":"Home"}),e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{className:"text-luxury-black font-medium",children:s==="ar"?N?.name_ar:N?.name_en})]}),e.jsxs("div",{className:`mb-8 ${s==="ar"?"rtl":""}`,children:[e.jsx("h1",{className:`text-luxury-black mb-2 text-3xl font-bold md:text-4xl ${s==="ar"?"font-arabic":"font-serif"}`,children:s==="ar"?N?.name_ar||"All Products":N?.name_en||"All Products"}),e.jsxs("p",{className:"text-muted-foreground",children:[s==="ar"?"منتج متاح":"products available"," ",m?.total||0]})]}),e.jsx("div",{className:"mb-6 overflow-x-auto",children:e.jsxs("div",{className:"flex min-w-max space-x-2 pb-2",children:[e.jsx(R,{variant:x.filters.category==="all"?"default":"secondary",size:"sm",onClick:()=>A("all"),className:"whitespace-nowrap",children:s==="ar"?"جميع الفئات":"All Categories"}),v.map(t=>e.jsx(R,{variant:x.filters.category===t.slug?"default":"secondary",size:"sm",onClick:()=>A(t.slug),className:"whitespace-nowrap",children:s==="ar"?t.name_ar:t.name_en},t.slug))]})}),e.jsxs("div",{className:`mb-8 flex flex-col gap-4 md:flex-row ${s==="ar"?"rtl":""}`,children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Qe,{className:"text-muted-foreground absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 transform"}),e.jsx(ze,{placeholder:s==="ar"?"البحث في المنتجات...":"Search products...",value:x.search,onChange:t=>g(t.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",onClick:()=>Q(!U),className:"border-luxury-black/20",children:[e.jsx(et,{className:"mr-2 h-4 w-4"}),s==="ar"?"فلاتر":"Filters"]}),e.jsxs(q,{value:x.filters.sort,onValueChange:F,children:[e.jsx(W,{className:"w-40",children:e.jsx(X,{})}),e.jsxs(G,{children:[e.jsx(P,{value:"newest",children:s==="ar"?"الأحدث":"Newest"}),e.jsx(P,{value:"price-high",children:s==="ar"?"السعر: عالي لمنخفض":"Price: High to Low"}),e.jsx(P,{value:"price-low",children:s==="ar"?"السعر: منخفض لعالي":"Price: Low to High"}),e.jsx(P,{value:"popular",children:s==="ar"?"الأكثر شعبية":"Most Popular"})]})]})]})]}),U&&e.jsx(te,{className:"mb-8 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:s==="ar"?"نطاق السعر":"Price Range"}),e.jsx(Ee,{value:k,onValueChange:E,max:1e4,step:100,className:"mb-2"}),e.jsxs("div",{className:"text-muted-foreground flex justify-between text-sm",children:[e.jsxs("span",{children:[k[0]," KD"]}),e.jsxs("span",{children:[k[1]," KD"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:s==="ar"?"الموقع":"Location"}),e.jsxs(q,{value:x.filters.governorate_id,onValueChange:t=>_("governorate_id",t),children:[e.jsx(W,{children:e.jsx(X,{placeholder:s==="ar"?"اختر الموقع":"Select location"})}),e.jsxs(G,{children:[e.jsx(P,{value:"all",children:s==="ar"?"جميع المواقع":"All Locations"}),D.map(t=>e.jsx(P,{value:t.id.toString(),children:s==="ar"?t.name_ar:t.name_en},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:s==="ar"?"الحالة":"Condition"}),e.jsxs(q,{value:x.filters.condition_id,onValueChange:t=>_("condition_id",t),children:[e.jsx(W,{children:e.jsx(X,{placeholder:s==="ar"?"اختر الحالة":"Select condition"})}),e.jsxs(G,{children:[e.jsx(P,{value:"all",children:s==="ar"?"جميع الحالات":"All Conditions"}),B.map(t=>e.jsx(P,{value:t.id.toString(),children:s==="ar"?t.name_ar:t.name_en},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:s==="ar"?"نوع السعر":"Price Type"}),e.jsxs(q,{value:x.filters.price_type_id,onValueChange:t=>_("price_type_id",t),children:[e.jsx(W,{children:e.jsx(X,{placeholder:s==="ar"?"اختر نوع السعر":"Select price type"})}),e.jsxs(G,{children:[e.jsx(P,{value:"all",children:s==="ar"?"جميع الأنواع":"All Types"}),z.map(t=>e.jsx(P,{value:t.id.toString(),children:s==="ar"?t.name_ar:t.name_en},t.id))]})]})]})]})}),e.jsx("div",{className:"mb-12 hidden grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 md:grid",children:m?.data?.map(t=>(console.log(t),e.jsxs(te,{className:"hover:shadow-luxury group cursor-pointer overflow-hidden transition-all duration-300",onClick:()=>ee.visit(de(t.id,{query:N?{selected_category:N.slug}:{}})),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.primaryImage?.url||"/placeholder-product.svg",alt:s==="ar"?t.title_ar:t.title_en,className:"h-64 w-full object-cover transition-transform duration-300 group-hover:scale-105"}),t.is_featured&&e.jsxs(V,{className:"bg-luxury-gold text-luxury-black absolute left-3 top-3",children:[e.jsx(ue,{className:"mr-1 h-3 w-3"}),s==="ar"?"مميز":"Featured"]}),e.jsx(R,{variant:"outline",size:"icon",className:`absolute right-3 top-3 h-8 w-8 border-none bg-white/90 hover:bg-white ${f(t.id)?"text-brand-red-600":""}`,onClick:j=>{j.stopPropagation(),$(t.id)},disabled:b,children:e.jsx(xe,{className:`h-4 w-4 ${f(t.id)?"fill-current":""}`})})]}),e.jsx(Oe,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsx("h3",{className:"text-luxury-black line-clamp-2 text-sm font-semibold",children:s==="ar"?t.title_ar:t.title_en})}),e.jsx("p",{className:"text-muted-foreground text-xs",children:t.category?.name_en}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-luxury-black text-lg font-bold",children:[t.price," ",t.priceType?.name_en||"KD"]}),t.is_negotiable&&e.jsx(V,{variant:"outline",className:"text-xs",children:s==="ar"?"قابل للتفاوض":"Negotiable"})]}),e.jsx(V,{variant:"secondary",className:"text-xs",children:s==="ar"?t.condition?.name_ar:t.condition?.name_en})]})}),e.jsxs("div",{className:"text-muted-foreground flex items-center justify-between border-t pt-2 text-xs",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(he,{className:"mr-1 h-3 w-3"}),s==="ar"?t.governorate?.name_ar:t.governorate?.name_en]}),e.jsx("span",{children:new Date(t.created_at).toLocaleDateString()})]})]})})]},t.id)))}),e.jsx("div",{className:"mb-12 space-y-2 md:hidden",children:m?.data?.map(t=>e.jsx(te,{className:"group cursor-pointer overflow-hidden transition-all duration-300 hover:shadow-lg active:scale-[0.98]",onClick:()=>ee.visit(de(t.id,{query:N?{selected_category:N.slug}:{}})),children:e.jsxs("div",{className:"flex gap-3 p-3",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:t.primaryImage?.url||"/placeholder-product.svg",alt:s==="ar"?t.title_ar:t.title_en,className:"h-20 w-20 rounded-lg object-cover"}),t.is_featured&&e.jsxs(V,{className:"bg-luxury-gold text-luxury-black absolute -left-1 -top-1 px-1.5 py-0.5 text-xs font-medium",children:[e.jsx(ue,{className:"mr-0.5 h-2.5 w-2.5"}),s==="ar"?"مميز":"Featured"]})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-start justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1 pr-2",children:[e.jsx("h3",{className:"text-luxury-black line-clamp-2 text-sm font-semibold leading-tight",children:s==="ar"?t.title_ar:t.title_en}),e.jsx("p",{className:"text-muted-foreground text-xs mt-0.5",children:t.category?.name_en})]}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-7 w-7 flex-shrink-0 p-0",onClick:j=>{j.stopPropagation(),$(t.id)},disabled:b,children:e.jsx(xe,{className:`h-4 w-4 ${f(t.id)?"fill-current text-red-500":"text-gray-400"}`})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[t.price," ",t.priceType?.name_en||"KD"]}),t.is_negotiable&&e.jsx(V,{variant:"outline",className:"text-xs px-1.5 py-0.5",children:s==="ar"?"قابل للتفاوض":"Negotiable"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(V,{variant:"secondary",className:"text-xs px-2 py-0.5",children:s==="ar"?t.condition?.name_ar:t.condition?.name_en}),e.jsxs("div",{className:"text-muted-foreground flex items-center text-xs",children:[e.jsx(he,{className:"mr-1 h-3 w-3"}),s==="ar"?t.governorate?.name_ar:t.governorate?.name_en]})]}),e.jsx("div",{className:"text-muted-foreground text-xs",children:new Date(t.created_at).toLocaleDateString()})]})]})]})},t.id))}),m?.data&&m.data.length>0&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(R,{variant:"secondary",size:"sm",disabled:m.current_page<=1,onClick:()=>p(m.current_page-1),children:[e.jsx($e,{className:"h-4 w-4"}),s==="ar"?"السابق":"Previous"]}),e.jsx("div",{className:"flex space-x-1",children:(()=>{const t=m.current_page,j=m.last_page,M=2,Z=[],I=[];for(let K=Math.max(2,t-M);K<=Math.min(j-1,t+M);K++)Z.push(K);return t-M>2?I.push(1,"..."):I.push(1),I.push(...Z),j>1&&(t+M<j-1?I.push("...",j):Z.includes(j)||I.push(j)),I.map((K,Me)=>{if(K==="...")return e.jsx("span",{className:"text-muted-foreground px-2",children:"..."},`dots-${Me}`);const Y=K,ie=Y===t;return e.jsx(R,{variant:ie?"default":"secondary",size:"sm",className:`w-10 ${ie?"bg-luxury-black hover:bg-luxury-black text-white":""}`,onClick:()=>p(Y),children:Y},Y)})})()}),e.jsxs(R,{variant:"secondary",size:"sm",disabled:m.current_page>=m.last_page,onClick:()=>p(m.current_page+1),children:[s==="ar"?"التالي":"Next",e.jsx(me,{className:"h-4 w-4"})]})]})})]})}),e.jsx(le,{})]}),e.jsx(Fe,{isOpen:l,onClose:()=>h(!1),onSuccess:()=>h(!1)})]})};export{Xt as default};
