import{d as E,r as c,j as e,H as ce,b as i,C as oe}from"./app-BFHhdhpI.js";import{B as n}from"./badge-CDcJ1qqT.js";import{B as t}from"./button-BQ7kR4Yt.js";import{C as o,a as d,b as m,c as x}from"./card-o7Qe4Plj.js";import{D as w,a as de,b as _,c as y,d as C,e as S,f as D}from"./dialog-DQPpHc23.js";import{T as k}from"./textarea-DhUkLUmO.js";import{u as me}from"./use-error-handler-DrE0GPwT.js";import{A as xe,D as he,I as ue}from"./app-layout-C8K2axEN.js";import{A as je}from"./arrow-left-C7HpCT5g.js";import{T as M}from"./trash-2-CeslBgsN.js";import{T as pe,a as ge}from"./toggle-right-CgOv1YHL.js";import{C as ve}from"./circle-x-B0I0Jzdc.js";import{S as fe}from"./shopping-cart-DgA60lJz.js";import{C as Ne}from"./clock-DSe7yUlw.js";import{E as be}from"./eye-CYUnYd-A.js";import{U as I}from"./user-Dbjx2Q2P.js";import{P as we}from"./phone-Bu4uJ4mE.js";import"./index-JA3bfGnE.js";import"./index-BCgHopZn.js";import"./index-C_cvxJmx.js";import"./chevron-right-Cly8n1lC.js";import"./index-CgL6x3Bx.js";import"./index-DW9AIAM8.js";import"./base-layout-Btuv6e41.js";/* empty css            */import"./use-forced-theme-CCW35rl4.js";import"./settings-hz281SAA.js";import"./logo-DB6pQEXk.js";import"./map-pin-DVl0pByM.js";import"./crown-B5v_UYZr.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],ye=E("Mail",_e);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Se=E("Pause",Ce),De=[{title:"Ads Management",href:"/admin/ads"},{title:"Ad Details",href:"/admin/ads/show"}];function ls({ad:s}){const[R,j]=c.useState(!1),[$,g]=c.useState(!1),[P,p]=c.useState(!1),[ke,f]=c.useState(null),[Ae,v]=c.useState(null),[N,b]=c.useState(""),[h,u]=c.useState("");me();const A=r=>{switch(r){case"draft":return e.jsx(n,{className:"bg-gray-100 text-gray-800",children:"Draft"});case"active":return e.jsx(n,{className:"bg-green-100 text-green-800",children:"Active"});case"inactive":return e.jsx(n,{className:"bg-orange-100 text-orange-800",children:"Inactive"});case"expired":return e.jsx(n,{className:"bg-yellow-100 text-yellow-800",children:"Expired"});case"sold":return e.jsx(n,{className:"bg-blue-100 text-blue-800",children:"Sold"});case"delete":return e.jsx(n,{className:"bg-red-100 text-red-800",children:"Deleted"});default:return e.jsx(n,{variant:"secondary",children:r})}},O=r=>r.is_approved===!0?e.jsx(n,{className:"bg-green-100 text-green-800",children:"Approved"}):r.is_approved===!1?e.jsx(n,{className:"bg-red-100 text-red-800",children:"Rejected"}):e.jsx(n,{className:"bg-yellow-100 text-yellow-800",children:"Pending Approval"}),T=r=>r.is_approved===null||r.is_approved===!1,F=r=>r.is_approved===null,L=r=>["inactive","expired","delete"].includes(r.status),B=r=>r.status==="active",H=r=>L(r)||B(r),U=r=>r.status==="active"&&r.is_approved===!0,z=r=>r.status==="active"&&r.is_approved===!0,V=r=>r.status==="active"&&r.is_approved===!0,Y=r=>r.status!=="sold",X=r=>r.status==="sold",q=(r,l)=>{const a=typeof r=="string"?parseFloat(r):r,ie=l||"Fixed";return`$${a.toFixed(2)} ${ie}`},G=()=>{s.status==="active"?(v(s.id),p(!0)):i.patch(`/admin/ads/${s.id}/toggle-status`,{},{onError:r=>{const a=Object.values(r).flat().join(", ");alert(`Error: ${a}`)},preserveScroll:!0})},J=()=>{i.patch(`/admin/ads/${s.id}/approve`,{},{onSuccess:()=>{localStorage.setItem("admin-ads-refresh","true")},onError:r=>{const a=Object.values(r).flat().join(", ");alert(`Error: ${a}`)},preserveScroll:!0})},K=()=>{f(s.id),g(!0)},Q=()=>{if(!N.trim()){alert("Please provide a reason for rejection.");return}i.post(`/admin/ads/${s.id}/reject`,{reject_reason:N},{onSuccess:()=>{g(!1),b(""),f(null),localStorage.setItem("admin-ads-refresh","true")},onError:r=>{const a=Object.values(r).flat().join(", ");alert(`Error: ${a}`)},preserveScroll:!0})},W=()=>{i.patch(`/admin/ads/${s.id}/mark-sold`,{},{onSuccess:()=>{localStorage.setItem("admin-ads-refresh","true")},onError:r=>{const a=Object.values(r).flat().join(", ");alert(`Error: ${a}`)},preserveScroll:!0})},Z=()=>{i.patch(`/admin/ads/${s.id}/mark-expired`,{},{onSuccess:()=>{localStorage.setItem("admin-ads-refresh","true")},onError:r=>{const a=Object.values(r).flat().join(", ");alert(`Error: ${a}`)},preserveScroll:!0})},ee=()=>{v(s.id),p(!0)},se=()=>{if(!h.trim()){alert("Please provide a reason for marking as inactive.");return}i.post(`/admin/ads/${s.id}/mark-inactive`,{inactive_reason:h},{onSuccess:()=>{p(!1),u(""),v(null),localStorage.setItem("admin-ads-refresh","true")},onError:r=>{const a=Object.values(r).flat().join(", ");alert(`Error: ${a}`)},preserveScroll:!0})},re=()=>{j(!0)},te=()=>{if(!h.trim()){alert("Please provide a reason for deletion.");return}i.post(`/admin/ads/${s.id}/delete`,{delete_reason:h},{onSuccess:()=>{j(!1),u(""),localStorage.setItem("admin-ads-refresh","true"),i.visit("/admin/ads")},onError:r=>{const a=Object.values(r).flat().join(", ");alert(`Error: ${a}`)},preserveScroll:!0})},ae=()=>{j(!1),u("")},ne=()=>{g(!1),b(""),f(null)},le=()=>{p(!1),u(""),v(null)};return e.jsxs(xe,{breadcrumbs:De,children:[e.jsx(ce,{title:`Ad: ${s.title_en}`}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>{localStorage.setItem("admin-ads-refresh","true"),i.visit("/admin/ads",{method:"get",preserveState:!1,preserveScroll:!1})},children:e.jsx(je,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.title_en}),e.jsx("p",{className:"text-muted-foreground",children:s.title_ar})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[A(s.status),O(s),e.jsx("div",{className:"flex items-center gap-1",children:s.is_negotiable&&e.jsx(he,{className:"h-5 w-5 text-blue-500"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="draft"&&e.jsxs(w,{open:R,onOpenChange:j,children:[e.jsx(de,{asChild:!0,children:e.jsxs(t,{variant:"destructive",onClick:()=>j(!0),children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Delete"]})}),e.jsxs(_,{className:"bg-white",children:[e.jsxs(y,{children:[e.jsx(C,{children:"Delete Ad"}),e.jsxs(S,{children:['Are you sure you want to delete "',s.title_en,'"? This action cannot be undone.']})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Reason for deletion"}),e.jsx(k,{value:h,onChange:r=>u(r.target.value),placeholder:"Please provide a reason for deleting this ad...",className:"mt-1"})]})}),e.jsxs(D,{children:[e.jsx(t,{variant:"outline",onClick:ae,children:"Cancel"}),e.jsx(t,{variant:"destructive",onClick:te,children:"Delete Ad"})]})]})]}),H(s)&&e.jsx(t,{variant:"outline",onClick:G,className:s.status==="active"?"text-green-600 hover:text-green-700":"text-red-600 hover:text-red-700",title:s.status==="active"?"Deactivate":"Activate",children:s.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Activate"]})}),T(s)&&e.jsxs(t,{variant:"outline",onClick:J,className:"text-green-600 hover:text-green-700",children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Approve"]}),F(s)&&e.jsxs(t,{variant:"outline",onClick:K,className:"text-red-600 hover:text-red-700",children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Reject"]}),U(s)&&e.jsxs(t,{variant:"outline",onClick:W,className:"text-blue-600 hover:text-blue-700",children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),"Mark as Sold"]}),z(s)&&e.jsxs(t,{variant:"outline",onClick:Z,className:"text-yellow-600 hover:text-yellow-700",children:[e.jsx(Ne,{className:"mr-2 h-4 w-4"}),"Mark as Expired"]}),V(s)&&e.jsxs(t,{variant:"outline",onClick:ee,className:"text-orange-600 hover:text-orange-700",children:[e.jsx(Se,{className:"mr-2 h-4 w-4"}),"Mark as Inactive"]}),Y(s)&&s.status!=="draft"&&s.status!=="delete"&&e.jsxs(t,{variant:"destructive",onClick:re,children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Delete"]}),X(s)&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"This ad is in its final state and cannot be modified."})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(m,{children:"Images"})}),e.jsx(x,{children:s.adImages&&s.adImages.length>0?e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.adImages.map((r,l)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.url,alt:`${s.title_en} - Image ${l+1}`,className:"h-48 w-full rounded-lg object-cover"}),r.is_primary&&e.jsx(n,{className:"absolute left-2 top-2",children:"Primary"})]},r.id))}):e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-lg",children:e.jsx(ue,{className:"text-muted-foreground h-12 w-12"})})})]}),e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(m,{children:"Description"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2 font-semibold",children:"English"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:s.description_en})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2 font-semibold",children:"Arabic"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:s.description_ar})]})]})]}),(s.product_details_en||s.product_details_ar)&&e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(m,{children:"Product Details"})}),e.jsxs(x,{className:"space-y-4",children:[s.product_details_en&&e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2 font-semibold",children:"English"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:s.product_details_en})]}),s.product_details_ar&&e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2 font-semibold",children:"Arabic"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:s.product_details_ar})]})]})]}),s.views&&s.views.length>0&&e.jsxs(o,{children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5"}),"Recent Views (",s.views_count,")"]})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-3",children:s.views?.slice(0,5).map(r=>e.jsx("div",{className:"flex items-center justify-between border-b py-2 last:border-b-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-muted flex h-8 w-8 items-center justify-center rounded-full",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.user.name_en}),e.jsx("p",{className:"text-muted-foreground text-sm",children:new Date(r.created_at).toLocaleString()})]})]})},r.id))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(m,{children:"Price & Details"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-primary mb-2 text-3xl font-bold",children:q(s.price,s.priceType?.name_en)}),s.is_negotiable&&e.jsx(n,{variant:"outline",className:"text-blue-600",children:"Negotiable"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Category:"}),e.jsx("span",{className:"font-medium",children:s.category.name_en})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Condition:"}),e.jsx("span",{className:"font-medium",children:s.condition?.name_en||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Location:"}),e.jsx("span",{className:"font-medium",children:s.governorate?.name_en||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Views:"}),e.jsx("span",{className:"font-medium",children:s.views_count})]})]})]})]}),e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(m,{children:"Ad Owner"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-muted flex h-12 w-12 items-center justify-center rounded-full",children:s.user.profile_picture_url?e.jsx("img",{src:s.user.profile_picture_url,alt:s.user.name_en,className:"h-12 w-12 rounded-full object-cover"}):e.jsx(I,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.user.name_en}),e.jsx("p",{className:"text-muted-foreground text-sm",children:s.user.name_ar})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ye,{className:"text-muted-foreground h-4 w-4"}),e.jsx("span",{children:s.user.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(we,{className:"text-muted-foreground h-4 w-4"}),e.jsx("span",{children:s.user.phone})]})]}),e.jsx(t,{variant:"outline",className:"w-full",onClick:()=>i.get(`/admin/users/${s.user.id}`),children:"View User Profile"})]})]}),e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(m,{children:"Ad Information"})}),e.jsxs(x,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"font-medium",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Updated:"}),e.jsx("span",{className:"font-medium",children:new Date(s.updated_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),A(s.status)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Featured:"}),e.jsx("span",{className:"font-medium",children:s.is_featured?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Approved:"}),e.jsx("span",{className:"font-medium",children:s.is_approved?"Yes":"No"})]}),s.delete_reason&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Delete Reason:"}),e.jsx("p",{className:"mt-1 text-sm",children:s.delete_reason})]})]})]})]})]})]}),e.jsx(w,{open:$,onOpenChange:g,children:e.jsxs(_,{className:"bg-white",children:[e.jsxs(y,{children:[e.jsx(C,{children:"Reject Ad"}),e.jsx(S,{children:"Please provide a reason for rejecting this ad."})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Rejection Reason"}),e.jsx(k,{value:N,onChange:r=>b(r.target.value),placeholder:"Please provide a reason for rejecting this ad...",className:"mt-1"})]})}),e.jsxs(D,{children:[e.jsx(t,{variant:"outline",onClick:ne,children:"Cancel"}),e.jsx(t,{variant:"destructive",onClick:Q,children:"Reject Ad"})]})]})}),e.jsx(w,{open:P,onOpenChange:p,children:e.jsxs(_,{className:"bg-white",children:[e.jsxs(y,{children:[e.jsx(C,{children:"Mark as Inactive"}),e.jsx(S,{children:"Please provide a reason for marking this ad as inactive."})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Inactive Reason"}),e.jsx(k,{value:h,onChange:r=>u(r.target.value),placeholder:"Please provide a reason for marking this ad as inactive...",className:"mt-1"})]})}),e.jsxs(D,{children:[e.jsx(t,{variant:"outline",onClick:le,children:"Cancel"}),e.jsx(t,{variant:"destructive",onClick:se,children:"Mark as Inactive"})]})]})})]})]})}export{ls as default};
