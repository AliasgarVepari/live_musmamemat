import{d as S,r as i,j as e,S as ns,c as N,n as O,X as os,f as is,g as cs,s as ls,P as B,h as W,k as ds,m as se,B as M,b as K}from"./app-CQQZ9fum.js";import{i as me,R as hs,T as us,P as ms,C as fe,a as fs,b as xe,O as pe,D as be,u as xs,f as ge,g as ps,I as bs}from"./index-QxE9D8ey.js";import{u as gs}from"./useQuery-Un6wqNV3.js";import{P as ve}from"./phone-BQ_9eJRs.js";import{c as ae}from"./index-BlE3e8Ui.js";import{R as Ne}from"./index-DMnYIcAC.js";import{C as je,a as vs}from"./index-kp_sv2kj.js";import{C as Ns}from"./check-Bcy343Yk.js";import{L as Z}from"./loader-circle-jBw-tszX.js";import{S as ce}from"./search-b9wWrPO0.js";import{U as js}from"./user-DhLhZTdl.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]],le=S("Apple",ys);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ks=S("ChevronLeft",ws);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],de=S("Facebook",Cs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Ss=S("Globe",Ts);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],ye=S("Instagram",$s);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],Ms=S("Linkedin",Ps);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],we=S("MessageCircle",As);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],_s=S("RotateCcw",Rs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],Is=S("Twitter",Ds);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],Ls=S("Youtube",Es),Fs=ae("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-all duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-35 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-brand-red-600 text-white hover:bg-brand-red-700 active:bg-brand-red-700 active:shadow-inner focus-visible:ring-white",secondary:"bg-transparent border border-border text-ink-900 hover:bg-red-tint-50 hover:border-brand-red-600 active:border-brand-red-700 active:bg-red-tint-50 focus-visible:ring-brand-red-600",outline:"bg-transparent border border-border text-ink-900 hover:bg-red-tint-50 hover:border-brand-red-600 active:border-brand-red-700 active:bg-red-tint-50 focus-visible:ring-brand-red-600",ghost:"bg-transparent text-brand-red-600 hover:bg-red-tint-50 active:text-brand-red-700 focus-visible:ring-brand-red-600",pill:"bg-surface text-ink-900 border border-border hover:bg-red-tint-50 focus-visible:ring-brand-red-600","pill-active":"bg-red-tint-50 text-brand-red-600 border-2 border-brand-red-600 shadow-sm focus-visible:ring-brand-red-600",icon:"bg-transparent text-ink-900 hover:bg-red-tint-50 hover:text-brand-red-600 active:text-brand-red-700 focus-visible:ring-brand-red-600",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",link:"text-brand-red-600 underline-offset-4 hover:underline hover:text-brand-red-700"},size:{default:"h-11 px-4 py-2 font-medium",sm:"h-9 rounded-lg px-3",lg:"h-12 rounded-xl px-8 font-medium",icon:"h-11 w-11",mobile:"h-12 px-4 py-2 font-medium"}},defaultVariants:{variant:"default",size:"default"}}),b=i.forwardRef(({className:s,variant:a,size:n,asChild:t=!1,...r},l)=>{const o=t?ns:"button";return e.jsx(o,{className:N(Fs({variant:a,size:n,className:s})),ref:l,...r})});b.displayName="Button";const ke=i.forwardRef(({className:s,orientation:a="horizontal",decorative:n=!0,...t},r)=>e.jsx(me,{ref:r,decorative:n,orientation:a,className:N("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...t}));ke.displayName=me.displayName;const Os=()=>gs({queryKey:["user","social-links"],queryFn:async()=>{const s=await fetch("/api/user/social-links");if(!s.ok)throw new Error("Failed to fetch social links");return await s.json()||[]},staleTime:1800*1e3,gcTime:3600*1e3,refetchOnWindowFocus:!1,retry:1}),zs=s=>({facebook:de,instagram:ye,twitter:Is,youtube:Ls,linkedin:Ms,whatsapp:we,telegram:ve})[s.toLowerCase()]||de,xa=()=>{const{language:s,t:a}=O(),{data:n,isLoading:t}=Os(),r=l=>{window.open(l,"_blank","noopener,noreferrer")};return e.jsx("footer",{className:"bg-ink-900 text-white",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-16 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:`grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-4 ${s==="ar"?"rtl":"ltr"}`,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-2xl font-bold font-brand",children:a("brand.name")}),e.jsx("p",{className:`text-sm leading-relaxed text-gray-300 ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.description")})]}),e.jsx("div",{className:"flex space-x-4 rtl:space-x-reverse",children:t?e.jsx("div",{className:"flex space-x-4",children:[1,2,3].map(l=>e.jsx("div",{className:"h-10 w-10 animate-pulse rounded-full bg-gray-600"},l))}):n&&n.length>0?n.map((l,o)=>{const h=zs(l.platform);return e.jsx(b,{variant:"icon",size:"icon",onClick:()=>r(l.url),className:"hover:text-brand-red-600 text-white",title:`Visit our ${l.platform}`,children:e.jsx(h,{className:"h-4 w-4 stroke-[1.5]"})},o)}):e.jsxs(e.Fragment,{children:[e.jsx(b,{variant:"icon",size:"icon",className:"hover:text-brand-red-600 text-white",children:e.jsx(ye,{className:"h-4 w-4 stroke-[1.5]"})}),e.jsx(b,{variant:"icon",size:"icon",className:"hover:text-brand-red-600 text-white",children:e.jsx(we,{className:"h-4 w-4 stroke-[1.5]"})}),e.jsx(b,{variant:"icon",size:"icon",className:"hover:text-brand-red-600 text-white",children:e.jsx(ve,{className:"h-4 w-4 stroke-[1.5]"})})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:`border-brand-red-600 inline-block border-b-2 pb-1 text-lg font-medium text-white ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.quicklinks")}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:`hover:text-brand-red-600 text-white opacity-85 transition-colors ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.menu")})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:`hover:text-brand-red-600 text-white opacity-85 transition-colors ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.status")})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:`hover:text-brand-red-600 text-white opacity-85 transition-colors ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.about")})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:`hover:text-brand-red-600 text-white opacity-85 transition-colors ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.branches")})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:`border-brand-red-600 inline-block border-b-2 pb-1 text-lg font-medium text-white ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.contact")}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[e.jsx("p",{className:s==="ar"?"font-arabic":"font-sans",children:a("footer.location")}),e.jsx("p",{className:"font-mono",children:"+965 XXXX XXXX"}),e.jsx("p",{className:"font-sans",children:"info@onothah.com"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:`border-brand-red-600 inline-block border-b-2 pb-1 text-lg font-medium text-white ${s==="ar"?"font-arabic":"font-sans"}`,children:s==="ar"?"طرق الدفع":"Payment Methods"}),e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[e.jsx("div",{className:"flex h-6 w-10 items-center justify-center rounded bg-blue-600 text-xs font-bold text-white transition-opacity hover:opacity-80",children:"VISA"}),e.jsx("div",{className:"flex h-6 w-10 items-center justify-center rounded bg-red-600 text-xs font-bold text-white transition-opacity hover:opacity-80",children:"MC"}),e.jsx("div",{className:"flex h-6 w-10 items-center justify-center rounded bg-blue-800 text-xs font-bold text-white transition-opacity hover:opacity-80",children:"AMEX"})]})]})]}),e.jsx(ke,{className:"bg-border my-8 opacity-40"}),e.jsx("div",{className:`flex flex-col items-center justify-between space-y-4 md:flex-row md:space-y-0 ${s==="ar"?"rtl":"ltr"}`,children:e.jsx("p",{className:`text-sm text-gray-400 ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.rights")})})]})})},R=i.forwardRef(({className:s,type:a,...n},t)=>e.jsx("input",{type:a,className:N("flex h-10 w-full rounded-md border border-brand-red-200 bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-red-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n}));R.displayName="Input";const Ce=hs,pa=us,Vs=ms,Te=i.forwardRef(({className:s,...a},n)=>e.jsx(pe,{ref:n,className:N("fixed inset-0 z-50 backdrop-blur-md bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));Te.displayName=pe.displayName;const te=i.forwardRef(({className:s,children:a,...n},t)=>e.jsxs(Vs,{children:[e.jsx(Te,{}),e.jsxs(fe,{ref:t,className:N("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-4 sm:p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",s),...n,children:[a,e.jsxs(fs,{className:"absolute right-3 top-3 sm:right-4 sm:top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground touch-manipulation",children:[e.jsx(os,{className:"h-5 w-5 sm:h-4 sm:w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));te.displayName=fe.displayName;const re=({className:s,...a})=>e.jsx("div",{className:N("flex flex-col space-y-1.5 text-center sm:text-left",s),...a});re.displayName="DialogHeader";const qs=({className:s,...a})=>e.jsx("div",{className:N("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});qs.displayName="DialogFooter";const ne=i.forwardRef(({className:s,...a},n)=>e.jsx(xe,{ref:n,className:N("text-lg font-semibold leading-none tracking-tight",s),...a}));ne.displayName=xe.displayName;const Bs=i.forwardRef(({className:s,...a},n)=>e.jsx(be,{ref:n,className:N("text-sm text-muted-foreground",s),...a}));Bs.displayName=be.displayName;var H="Tabs",[Hs,ba]=cs(H,[ge]),Se=ge(),[Gs,oe]=Hs(H),$e=i.forwardRef((s,a)=>{const{__scopeTabs:n,value:t,onValueChange:r,defaultValue:l,orientation:o="horizontal",dir:h,activationMode:g="automatic",...p}=s,u=xs(h),[x,d]=is({prop:t,onChange:r,defaultProp:l??"",caller:H});return e.jsx(Gs,{scope:n,baseId:ls(),value:x,onValueChange:d,orientation:o,dir:u,activationMode:g,children:e.jsx(B.div,{dir:u,"data-orientation":o,...p,ref:a})})});$e.displayName=H;var Pe="TabsList",Me=i.forwardRef((s,a)=>{const{__scopeTabs:n,loop:t=!0,...r}=s,l=oe(Pe,n),o=Se(n);return e.jsx(ps,{asChild:!0,...o,orientation:l.orientation,dir:l.dir,loop:t,children:e.jsx(B.div,{role:"tablist","aria-orientation":l.orientation,...r,ref:a})})});Me.displayName=Pe;var Ae="TabsTrigger",Re=i.forwardRef((s,a)=>{const{__scopeTabs:n,value:t,disabled:r=!1,...l}=s,o=oe(Ae,n),h=Se(n),g=Ie(o.baseId,t),p=Ee(o.baseId,t),u=t===o.value;return e.jsx(bs,{asChild:!0,...h,focusable:!r,active:u,children:e.jsx(B.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":p,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:g,...l,ref:a,onMouseDown:W(s.onMouseDown,x=>{!r&&x.button===0&&x.ctrlKey===!1?o.onValueChange(t):x.preventDefault()}),onKeyDown:W(s.onKeyDown,x=>{[" ","Enter"].includes(x.key)&&o.onValueChange(t)}),onFocus:W(s.onFocus,()=>{const x=o.activationMode!=="manual";!u&&!r&&x&&o.onValueChange(t)})})})});Re.displayName=Ae;var _e="TabsContent",De=i.forwardRef((s,a)=>{const{__scopeTabs:n,value:t,forceMount:r,children:l,...o}=s,h=oe(_e,n),g=Ie(h.baseId,t),p=Ee(h.baseId,t),u=t===h.value,x=i.useRef(u);return i.useEffect(()=>{const d=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(d)},[]),e.jsx(ds,{present:r||u,children:({present:d})=>e.jsx(B.div,{"data-state":u?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":g,hidden:!d,id:p,tabIndex:0,...o,ref:a,style:{...s.style,animationDuration:x.current?"0s":void 0},children:d&&l})})});De.displayName=_e;function Ie(s,a){return`${s}-trigger-${a}`}function Ee(s,a){return`${s}-content-${a}`}var Xs=$e,Le=Me,Fe=Re,Oe=De;const Us=Xs,ze=i.forwardRef(({className:s,...a},n)=>e.jsx(Le,{ref:n,className:N("inline-flex h-auto items-center justify-start bg-white border-b border-border overflow-x-auto",s),...a}));ze.displayName=Le.displayName;const J=i.forwardRef(({className:s,...a},n)=>e.jsx(Fe,{ref:n,className:N("inline-flex items-center justify-center whitespace-nowrap px-4 py-3 text-sm font-medium text-ink-900 min-h-11 transition-all duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-red-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-red-tint-50 data-[state=active]:text-brand-red-600 data-[state=active]:border-b-2 data-[state=active]:border-brand-red-600 relative",s),...a}));J.displayName=Fe.displayName;const ee=i.forwardRef(({className:s,...a},n)=>e.jsx(Oe,{ref:n,className:N("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a}));ee.displayName=Oe.displayName;const Ws=ae("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),A=i.forwardRef(({className:s,...a},n)=>e.jsx(Ne,{ref:n,className:N(Ws(),s),...a}));A.displayName=Ne.displayName;const Ve=i.forwardRef(({className:s,...a},n)=>e.jsx(je,{ref:n,className:N("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:e.jsx(vs,{className:N("flex items-center justify-center text-current"),children:e.jsx(Ns,{className:"h-4 w-4"})})}));Ve.displayName=je.displayName;const Ks=1,Qs=1e6;let Q=0;function Ys(){return Q=(Q+1)%Number.MAX_SAFE_INTEGER,Q.toString()}const Y=new Map,he=s=>{if(Y.has(s))return;const a=setTimeout(()=>{Y.delete(s),F({type:"REMOVE_TOAST",toastId:s})},Qs);Y.set(s,a)},Zs=(s,a)=>{switch(a.type){case"ADD_TOAST":return{...s,toasts:[a.toast,...s.toasts].slice(0,Ks)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(n=>n.id===a.toast.id?{...n,...a.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=a;return n?he(n):s.toasts.forEach(t=>{he(t.id)}),{...s,toasts:s.toasts.map(t=>t.id===n||n===void 0?{...t,open:!1}:t)}}case"REMOVE_TOAST":return a.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(n=>n.id!==a.toastId)}}},V=[];let q={toasts:[]};function F(s){q=Zs(q,s),V.forEach(a=>{a(q)})}function Js({...s}){const a=Ys(),n=r=>F({type:"UPDATE_TOAST",toast:{...r,id:a}}),t=()=>F({type:"DISMISS_TOAST",toastId:a});return F({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:r=>{r||t()}}}),{id:a,dismiss:t,update:n}}function qe(){const[s,a]=i.useState(q);return i.useEffect(()=>(V.push(a),()=>{const n=V.indexOf(a);n>-1&&V.splice(n,1)}),[s]),{...s,toast:Js,dismiss:n=>F({type:"DISMISS_TOAST",toastId:n})}}const ea=({isOpen:s,onClose:a,onSuccess:n,onBack:t,phoneNumber:r})=>{const{language:l,t:o}=O(),{verifyOTP:h,pendingUser:g}=se(),{toast:p}=qe(),[u,x]=i.useState(""),[d,w]=i.useState(!1),[k,v]=i.useState(60),[$,_]=i.useState(!1);i.useEffect(()=>{if(k>0){const j=setTimeout(()=>v(k-1),1e3);return()=>clearTimeout(j)}else _(!0)},[k]);const I=j=>j.length===12&&j.startsWith("+965")?`+965 •••• ••${j.slice(4).slice(-2)}`:j,G=j=>{const P=j.target.value.replace(/\D/g,"").slice(0,6);x(P)},E=async j=>{if(j.preventDefault(),u.length!==6){p({title:o("auth.error"),description:o("auth.invalidOTP"),variant:"destructive"});return}if(!g){p({title:o("auth.error"),description:"No pending verification found",variant:"destructive"});return}w(!0);try{const P=g.phoneE164.replace("+965","");await h(P,u),p({title:o("auth.success"),description:o("auth.registrationComplete"),variant:"default"}),n()}catch(P){p({title:o("auth.error"),description:P instanceof Error?P.message:o("auth.verificationFailed"),variant:"destructive"})}finally{w(!1)}},X=async()=>{$&&(v(60),_(!1),x(""),p({title:o("auth.otpResent"),description:o("auth.otpResentDescription")}))};return e.jsx(Ce,{open:s,onOpenChange:a,children:e.jsxs(te,{className:`max-w-md ${l==="ar"?"rtl":"ltr"}`,children:[e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"ghost",size:"sm",onClick:t,className:"p-1 h-8 w-8",children:e.jsx(ks,{className:`h-4 w-4 ${l==="ar"?"rotate-180":""}`})}),e.jsx(ne,{className:`text-luxury-black ${l==="ar"?"font-arabic":"font-serif"}`,children:o("auth.verifyPhone")})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:`text-muted-foreground ${l==="ar"?"font-arabic":""}`,children:o("auth.otpSentTo")}),e.jsx("p",{className:`font-mono text-luxury-black font-semibold ${l==="ar"?"font-arabic":""}`,children:I(r)})]}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"otp",className:`text-center block ${l==="ar"?"font-arabic":""}`,children:o("auth.enterOTP")}),e.jsx(R,{id:"otp",type:"tel",dir:"ltr",value:u,onChange:G,placeholder:"000000",className:"text-center text-lg font-mono tracking-wider",maxLength:6,autoComplete:"one-time-code"})]}),e.jsxs(b,{type:"submit",className:"w-full bg-brand-red-600 text-white hover:bg-brand-red-700 hover:shadow-glow transition-all duration-300 font-semibold py-3",disabled:d||u.length!==6,children:[d&&e.jsx(Z,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{className:l==="ar"?"font-arabic":"",children:o("auth.verify")})]})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:`text-sm text-muted-foreground ${l==="ar"?"font-arabic":""}`,children:o("auth.didntReceiveCode")}),e.jsxs(b,{variant:"ghost",onClick:X,disabled:!$,className:"text-luxury-black hover:text-luxury-gold",children:[e.jsx(_s,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:l==="ar"?"font-arabic":"",children:$?o("auth.resendOTP"):`${o("auth.resendIn")} ${k}s`})]}),e.jsx(b,{variant:"ghost",onClick:t,className:"text-muted-foreground hover:text-luxury-black",children:e.jsx("span",{className:l==="ar"?"font-arabic":"",children:o("auth.editPhone")})})]})]}),e.jsx("p",{className:`text-xs text-center text-muted-foreground mt-4 ${l==="ar"?"font-arabic":""}`,children:o("auth.demoDisclaimer")})]})})},sa=ae("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function aa({className:s,variant:a,...n}){return e.jsx("div",{className:N(sa({variant:a}),s),...n})}const ue=({value:s,onChange:a,placeholder:n,className:t})=>{const{language:r,t:l}=O(),[o,h]=i.useState(s);i.useEffect(()=>{h(s)},[s]);const g=k=>{const v=k.replace(/\D/g,"");return v.length>=4?`${v.slice(0,4)} ${v.slice(4,8)}`:v},p=k=>{let v=k.target.value;v.startsWith("+965")&&(v=v.slice(4));const _=v.replace(/\D/g,"").slice(0,8);h(g(_)),a(_)},u=k=>{h(s)},x=k=>{h(g(s))},d=s.length===8,w=s.length>0&&!d;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 z-10",children:e.jsx(aa,{variant:"secondary",className:"text-xs font-mono bg-muted text-muted-foreground",children:"+965"})}),e.jsx(R,{type:"tel",dir:"ltr",value:o,onChange:p,onFocus:u,onBlur:x,placeholder:n,className:`pl-16 font-mono ${w?"border-destructive":""} ${t}`,maxLength:9})]}),w&&e.jsx("p",{className:`text-xs text-destructive ${r==="ar"?"font-arabic":""}`,children:l("auth.phoneError")})]})},ta=({isOpen:s,onClose:a,onSuccess:n})=>{const{language:t,t:r}=O(),{login:l,loginWithSocial:o,signup:h,pendingUser:g}=se(),{toast:p}=qe(),[u,x]=i.useState("login"),[d,w]=i.useState(!1),[k,v]=i.useState(!1),[$,_]=i.useState(""),[I,G]=i.useState(""),[E,X]=i.useState(""),[j,P]=i.useState(""),[L,Be]=i.useState(""),[U,He]=i.useState(""),[ie,Ge]=i.useState(!1),[T,D]=i.useState({}),[m,C]=i.useState({});i.useEffect(()=>{D({}),C({})},[u]);const Xe=()=>{const c={};return $.trim()?$.length!==8&&(c.phone=r("auth.phoneInvalid")):c.phone=r("auth.phoneRequired"),I.trim()?I.length<6&&(c.password=r("auth.passwordMinLength")):c.password=r("auth.passwordRequired"),D(c),Object.keys(c).length===0},Ue=()=>{const c={};return E.trim()?E.trim().length<2&&(c.name=r("auth.nameMinLength")):c.name=r("auth.nameRequired"),j.trim()?j.length!==8&&(c.phone=r("auth.phoneInvalid")):c.phone=r("auth.phoneRequired"),L.trim()?L.length<6&&(c.password=r("auth.passwordMinLength")):c.password=r("auth.passwordRequired"),U.trim()?L!==U&&(c.confirmPassword=r("auth.passwordMismatch")):c.confirmPassword=r("auth.confirmPasswordRequired"),ie||(c.terms=r("auth.agreeTermsRequired")),C(c),Object.keys(c).length===0},We=async c=>{if(c.preventDefault(),D({}),!!Xe()){w(!0);try{await l($,I),n(),a()}catch(f){const y=f instanceof Error?f.message:r("auth.loginFailed");y.includes("credentials")||y.includes("password")||y.includes("phone")?D({general:y}):D({general:y})}finally{w(!1)}}},z=async c=>{w(!0);try{await o(c),n(),a()}catch{p({title:r("auth.error"),description:r("auth.loginFailed"),variant:"destructive"})}finally{w(!1)}},Ke=async c=>{if(c.preventDefault(),C({}),!!Ue()){w(!0);try{const f=await h({fullName:E,phone:j,password:L});p({title:r("auth.otpSent"),description:`OTP: ${f.otp} (Demo - expires in 10 minutes)`,variant:"default"}),v(!0)}catch(f){const y=f instanceof Error?f.message:r("auth.signupFailed");y.includes("phone")&&y.includes("already")?C({phone:y}):y.includes("name")||y.includes("fullName")?C({name:y}):y.includes("password")?C({password:y}):C({general:y})}finally{w(!1)}}},Qe=()=>{v(!1),n(),a()},Ye=()=>{v(!1)},Ze=c=>{_(c),T.phone&&D(f=>({...f,phone:void 0}))},Je=c=>{G(c.target.value),T.password&&D(f=>({...f,password:void 0}))},es=c=>{X(c.target.value),m.name&&C(f=>({...f,name:void 0}))},ss=c=>{P(c),m.phone&&C(f=>({...f,phone:void 0}))},as=c=>{Be(c.target.value),m.password&&C(f=>({...f,password:void 0}))},ts=c=>{He(c.target.value),m.confirmPassword&&C(f=>({...f,confirmPassword:void 0}))},rs=c=>{Ge(c),m.terms&&C(f=>({...f,terms:void 0}))};return k&&g?e.jsx(ea,{isOpen:s,onClose:a,onSuccess:Qe,onBack:Ye,phoneNumber:g.phoneE164}):e.jsx(Ce,{open:s,onOpenChange:a,children:e.jsxs(te,{className:`max-w-md ${t==="ar"?"rtl":"ltr"}`,children:[e.jsx(re,{children:e.jsx(ne,{className:`text-center text-luxury-black ${t==="ar"?"font-arabic":"font-serif"}`,children:r("auth.welcome")})}),e.jsxs(Us,{value:u,onValueChange:c=>x(c),children:[e.jsxs(ze,{className:"grid w-full grid-cols-2",children:[e.jsx(J,{value:"login",className:t==="ar"?"font-arabic":"",children:r("auth.login")}),e.jsx(J,{value:"signup",className:t==="ar"?"font-arabic":"",children:r("auth.signup")})]}),e.jsx(ee,{value:"login",className:"space-y-4",children:e.jsxs("form",{onSubmit:We,className:"space-y-4",children:[T.general&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:T.general})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"login-phone",className:t==="ar"?"font-arabic":"",children:r("auth.phone")}),e.jsx(ue,{value:$,onChange:Ze,placeholder:r("auth.phonePlaceholder"),className:T.phone?"border-red-500 focus:border-red-500 focus:ring-red-500":""}),T.phone&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:T.phone})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"login-password",className:t==="ar"?"font-arabic":"",children:r("auth.password")}),e.jsx(R,{id:"login-password",type:"password",value:I,onChange:Je,placeholder:r("auth.passwordPlaceholder"),className:`${t==="ar"?"font-arabic":""} ${T.password?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`}),T.password&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:T.password})]})]}),e.jsxs(b,{type:"submit",className:"w-full bg-brand-red-600 text-white hover:bg-brand-red-700 hover:shadow-glow transition-all duration-300 font-semibold py-3",disabled:d,children:[d&&e.jsx(Z,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:r("auth.continue")})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:`bg-background px-2 text-muted-foreground ${t==="ar"?"font-arabic":""}`,children:r("auth.orContinueWith")})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(b,{type:"button",variant:"outline",onClick:()=>z("apple"),disabled:d,className:"border-brand-red-200 hover:border-brand-red-600 hover:bg-brand-red-50 transition-all duration-300",children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Apple"]}),e.jsxs(b,{type:"button",variant:"outline",onClick:()=>z("google"),disabled:d,className:"border-brand-red-200 hover:border-brand-red-600 hover:bg-brand-red-50 transition-all duration-300",children:[e.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]})]})]})}),e.jsx(ee,{value:"signup",className:"space-y-4",children:e.jsxs("form",{onSubmit:Ke,className:"space-y-4",children:[m.general&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:m.general})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"signup-name",className:t==="ar"?"font-arabic":"",children:r("auth.fullName")}),e.jsx(R,{id:"signup-name",value:E,onChange:es,placeholder:r("auth.fullNamePlaceholder"),className:`${t==="ar"?"font-arabic":""} ${m.name?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`}),m.name&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:m.name})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"signup-phone",className:t==="ar"?"font-arabic":"",children:r("auth.phone")}),e.jsx(ue,{value:j,onChange:ss,placeholder:r("auth.phonePlaceholder"),className:m.phone?"border-red-500 focus:border-red-500 focus:ring-red-500":""}),m.phone&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:m.phone})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"signup-password",className:t==="ar"?"font-arabic":"",children:r("auth.password")}),e.jsx(R,{id:"signup-password",type:"password",value:L,onChange:as,placeholder:r("auth.passwordPlaceholder"),className:`${t==="ar"?"font-arabic":""} ${m.password?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`}),m.password&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:m.password})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"confirm-password",className:t==="ar"?"font-arabic":"",children:r("auth.confirmPassword")}),e.jsx(R,{id:"confirm-password",type:"password",value:U,onChange:ts,placeholder:r("auth.confirmPasswordPlaceholder"),className:`${t==="ar"?"font-arabic":""} ${m.confirmPassword?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`}),m.confirmPassword&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:m.confirmPassword})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{id:"terms",checked:ie,onCheckedChange:rs,className:m.terms?"border-red-500":""}),e.jsx(A,{htmlFor:"terms",className:`text-sm ${t==="ar"?"font-arabic":""}`,children:r("auth.agreeToTerms")})]}),m.terms&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:m.terms})]})]}),e.jsxs(b,{type:"submit",className:"w-full bg-brand-red-600 text-white hover:bg-brand-red-700 hover:shadow-glow transition-all duration-300 font-semibold py-3",disabled:d,children:[d&&e.jsx(Z,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{className:t==="ar"?"font-arabic":"",children:r("auth.createAccount")})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:`bg-background px-2 text-muted-foreground ${t==="ar"?"font-arabic":""}`,children:r("auth.orContinueWith")})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(b,{type:"button",variant:"outline",onClick:()=>z("apple"),disabled:d,className:"border-brand-red-200 hover:border-brand-red-600 hover:bg-brand-red-50 transition-all duration-300",children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Apple"]}),e.jsxs(b,{type:"button",variant:"outline",onClick:()=>z("google"),disabled:d,className:"border-brand-red-200 hover:border-brand-red-600 hover:bg-brand-red-50 transition-all duration-300",children:[e.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]})]})]})})]}),e.jsx("p",{className:`text-xs text-center text-muted-foreground mt-4 ${t==="ar"?"font-arabic":""}`,children:r("auth.demoDisclaimer")})]})})},ga=()=>{const{language:s,toggleLanguage:a,t:n}=O(),{isAuthenticated:t}=se(),[r,l]=i.useState(""),[o,h]=i.useState(!1),g=window.location.pathname.startsWith("/admin"),p=d=>{d.preventDefault(),r.trim()&&K.visit(`/search?q=${encodeURIComponent(r.trim())}`)},u=()=>{t?K.visit("/profile"):h(!0)},x=()=>{h(!1),K.visit("/profile")};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"border-border shadow-brand sticky top-0 z-50 border-b bg-white",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex h-16 items-center justify-between",children:[e.jsx("div",{className:"w-10 lg:hidden"}),e.jsx("div",{className:"mx-8 hidden flex-1 md:flex",children:e.jsxs("form",{onSubmit:p,className:"relative w-full",children:[e.jsx(ce,{className:"text-muted-foreground absolute top-1/2 h-4 w-4 -translate-y-1/2 transform stroke-[1.5] ltr:left-3 rtl:right-3"}),e.jsx(R,{value:r,onChange:d=>l(d.target.value),placeholder:n("search.placeholder"),className:`bg-card focus:ring-brand-red-600 border-0 focus:ring-2 ${s==="ar"?"pr-10 text-right":"pl-10 text-left"}`})]})}),e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[!g&&e.jsxs(b,{variant:"ghost",size:"sm",onClick:a,className:"text-ink-900 hover:text-brand-red-600 group transition-colors",children:[e.jsx(Ss,{className:"group-hover:text-brand-red-600 h-4 w-4 stroke-[1.5]"}),e.jsx("span",{className:"ml-1 text-xs font-medium rtl:ml-0 rtl:mr-1",children:s==="ar"?"EN":"ع"})]}),e.jsx(b,{variant:"ghost",size:"sm",className:"text-ink-900 hover:text-brand-red-600",onClick:u,children:e.jsx(js,{className:"h-4 w-4 stroke-[1.5]"})})]})]}),e.jsx("div",{className:"pb-3 md:hidden",children:e.jsxs("form",{onSubmit:p,className:"relative",children:[e.jsx(ce,{className:"text-muted-foreground absolute top-1/2 h-4 w-4 -translate-y-1/2 transform stroke-[1.5] ltr:left-3 rtl:right-3"}),e.jsx(R,{value:r,onChange:d=>l(d.target.value),placeholder:n("search.placeholder"),className:`bg-card border-0 ${s==="ar"?"pr-10 text-right":"pl-10 text-left"}`})]})})]})}),e.jsx(ta,{isOpen:o,onClose:()=>h(!1),onSuccess:x})]})};export{ta as A,b as B,ks as C,Ce as D,xa as F,ga as H,R as I,A as L,we as M,_s as R,Us as T,Ls as Y,aa as a,Fs as b,pa as c,te as d,re as e,ne as f,ze as g,J as h,ee as i,qs as j,de as k,ye as l,Is as m,Ms as n,qe as o,Os as u};
