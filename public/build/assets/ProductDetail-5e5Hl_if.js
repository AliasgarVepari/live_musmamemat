import{b as D,n as F,m as I,r as m,j as e,H as M,a as j,C as T}from"./app-DTvt3JWn.js";import{H as R,a as x,B as c,C as H,M as P,F as U,A as L}from"./Header-B1MbFeak.js";import{A as z,a as E,b as K}from"./avatar-BTsk1BQa.js";import{C as q,a as B}from"./card-BFQJBt-X.js";import{u as O}from"./use-favorites-Bn8dP8HA.js";import{U as W}from"./user-layout-CanBJl6i.js";import{h as V}from"./index-D6ddks9M.js";import{i as X}from"./index-BX7CGiW0.js";import{C as u}from"./chevron-right-DQYwBuVV.js";import{S as v}from"./star-DMc7nQT_.js";import{H as Y}from"./heart-B10bWKAZ.js";import{M as G}from"./map-pin-Bl5l3zBO.js";import{C as J}from"./calendar-26gS_cBh.js";import{S as Q}from"./shield-Buy9WxCl.js";import"./index-BjlFgQd3.js";import"./index-Bzk_0laE.js";import"./useQuery-DDNnmxB5.js";import"./phone-B5JFgEkD.js";import"./index-aqO7kOVQ.js";import"./index-dv7WKkPX.js";import"./index-DidabVOd.js";import"./check-Ds5LABLY.js";import"./loader-circle-D8daeID1.js";import"./search-uO9waHIl.js";import"./user-C0ZfagPN.js";import"./index-BLzzpA-K.js";import"./use-forced-theme-Bw5L6RiE.js";/* empty css            */import"./index-DW9AIAM8.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],ee=D("Share2",Z),Te=({product:s,selectedCategory:l})=>{console.log(s);const{language:a}=F(),{isAuthenticated:N}=I(),{isFavorited:f,toggleFavorite:b,loading:w}=O(),[p,d]=m.useState(0),[se,ae]=m.useState(!1),[re,te]=m.useState(""),[y,h]=m.useState(!1),i=a==="ar"?s.title_ar:s.title_en,_=a==="ar"?s.description_ar:s.description_en,t=s.images||[];t.find(r=>r.is_primary)||t[0];const k=async()=>{if(!s.user?.phone){alert(a==="ar"?"رقم الهاتف غير متوفر":"Phone number not available");return}try{await fetch(`/api/user/products/${s.id}/contact`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})}catch(g){console.error("Failed to increment contact count:",g)}const r=encodeURIComponent(`Hi! I'm interested in your ${i} listed for ${s.price} ${s.priceType?.name_en||"KD"}. ${window.location.href}`),n=s.user.phone.replace(/[^\d+]/g,""),o=n.startsWith("+")?n:`+965${n}`;window.open(`https://wa.me/${o.replace("+","")}?text=${r}`,"_blank")},C=async()=>{if(navigator.share)try{await navigator.share({title:i,text:`Check out this ${i} for ${s.price} ${s.priceType?.name_en||"KD"}`,url:window.location.href})}catch(r){console.log("Error sharing:",r)}else navigator.clipboard.writeText(window.location.href)},S=async()=>{if(!N){h(!0);return}try{await b(s.id)}catch(r){console.error("Error toggling favorite:",r)}},$=()=>{d(r=>r===t.length-1?0:r+1)},A=()=>{d(r=>r===0?t.length-1:r-1)};return e.jsxs(W,{children:[e.jsx(M,{title:i}),e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(R,{}),e.jsx("main",{className:"main-content pb-16 pt-4",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("nav",{className:`text-muted-foreground mb-6 flex items-center space-x-2 text-sm ${a==="ar"?"rtl space-x-reverse":""}`,children:[e.jsx("span",{onClick:()=>j.visit(V()),className:"hover:text-luxury-black cursor-pointer transition-colors",children:a==="ar"?"الرئيسية":"Home"}),e.jsx(u,{className:"h-4 w-4"}),e.jsx("span",{onClick:()=>j.visit(X.get({query:l?{category:l.slug}:{}})),className:"hover:text-luxury-black cursor-pointer transition-colors",children:l?a==="ar"?l.name_ar:l.name_en:a==="ar"?"جميع الفئات":"All Categories"}),e.jsx(u,{className:"h-4 w-4"}),e.jsx("span",{className:"text-luxury-black truncate font-medium",children:i})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-2 lg:gap-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t[p]?.url||"/placeholder-product.svg",alt:i,className:"h-96 w-full rounded-lg object-cover lg:h-[500px]"}),s.is_featured&&e.jsxs(x,{className:"bg-luxury-gold text-luxury-black absolute left-4 top-4",children:[e.jsx(v,{className:"mr-1 h-3 w-3"}),a==="ar"?"مميز":"Featured"]}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"secondary",size:"icon",className:"absolute left-4 top-1/2 -translate-y-1/2 transform bg-white/90 shadow-md hover:bg-white",onClick:A,children:e.jsx(H,{className:"h-4 w-4"})}),e.jsx(c,{variant:"secondary",size:"icon",className:"absolute right-4 top-1/2 -translate-y-1/2 transform bg-white/90 shadow-md hover:bg-white",onClick:$,children:e.jsx(u,{className:"h-4 w-4"})})]})]}),t.length>1&&e.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:t.map((r,n)=>e.jsx("img",{src:r.url,alt:`${i} ${n+1}`,className:`h-20 w-20 flex-shrink-0 cursor-pointer rounded object-cover ${n===p?"ring-luxury-gold ring-2":""}`,onClick:()=>d(n)},r.id))})]}),e.jsxs("div",{className:`space-y-6 ${a==="ar"?"rtl":""}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-start justify-between",children:[e.jsx("h1",{className:`text-luxury-black text-2xl font-bold leading-tight lg:text-3xl ${a==="ar"?"font-arabic":"font-serif"}`,children:s.title_en}),e.jsxs("div",{className:"ml-4 flex space-x-2",children:[e.jsx(c,{variant:"secondary",size:"icon",onClick:S,disabled:w,className:f(s.id)?"text-brand-red-600 border-brand-red-600":"",children:e.jsx(Y,{className:`h-4 w-4 ${f(s.id)?"fill-current":""}`})}),e.jsx(c,{variant:"secondary",size:"icon",onClick:C,children:e.jsx(ee,{className:"h-4 w-4"})})]})]}),s.brand&&e.jsx("p",{className:"text-muted-foreground mb-4 text-lg font-medium",children:s.brand}),e.jsx("div",{className:"mb-4 flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-luxury-black text-3xl font-bold",children:[s.price," ",s.priceType?.name_en||"KD"]}),s.original_price&&s.original_price>s.price&&e.jsxs("span",{className:"text-muted-foreground text-lg line-through",children:[s.original_price," ",s.priceType?.name_en||"KD"]}),s.is_negotiable&&e.jsx(x,{variant:"outline",className:"text-sm",children:a==="ar"?"قابل للتفاوض":"Negotiable"})]})}),e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[s.condition&&e.jsxs(x,{variant:"secondary",className:"text-sm",children:[a==="ar"?"الحالة:":"Condition:"," ",a==="ar"?s.condition.name_ar:s.condition.name_en]}),s.governorate&&e.jsxs("div",{className:"text-muted-foreground flex items-center text-sm",children:[e.jsx(G,{className:"mr-1 h-4 w-4"}),a==="ar"?s.governorate.name_ar:s.governorate.name_en]}),e.jsxs("div",{className:"text-muted-foreground flex items-center text-sm",children:[e.jsx(J,{className:"mr-1 h-4 w-4"}),new Date(s.created_at).toLocaleDateString()]}),e.jsx("div",{className:"text-muted-foreground flex items-center text-sm",children:e.jsxs("span",{children:[s.views_count," ",a==="ar"?"مشاهدة":"views"]})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(c,{onClick:k,disabled:!s.user?.phone,className:"bg-luxury-black text-luxury-white hover:bg-luxury-gold hover:text-luxury-black w-full py-3 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",size:"lg",children:[e.jsx(P,{className:"mr-2 h-5 w-5"}),a==="ar"?"تواصل مع البائع":"Contact Seller"]}),e.jsx("p",{className:"text-muted-foreground text-center text-xs",children:s.user?.phone?a==="ar"?"سيتم فتح واتساب مع رسالة جاهزة":"Opens WhatsApp with pre-filled message":a==="ar"?"رقم الهاتف غير متوفر":"Phone number not available"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-luxury-black mb-3 text-lg font-semibold",children:a==="ar"?"الوصف":"Description"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:_})]}),(s.product_details_en||s.product_details_ar)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-luxury-black mb-3 text-lg font-semibold",children:a==="ar"?"تفاصيل المنتج":"Product Details"}),e.jsx("div",{className:"space-y-2",children:(()=>{const r=a==="ar"?s.product_details_ar:s.product_details_en;return r?r.split(/\r?\n/).filter(o=>o.trim()!=="").map((o,g)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:o.trim()})]},g)):null})()})]}),e.jsx(q,{children:e.jsxs(B,{className:"p-4",children:[e.jsx("h3",{className:"text-luxury-black mb-3 text-lg font-semibold",children:a==="ar"?"معلومات البائع":"Seller Information"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(z,{className:"h-12 w-12",children:[e.jsx(E,{src:s.user?.profile_picture_url||""}),e.jsx(K,{children:s.user?a==="ar"?s.user.name_ar?.[0]:s.user.name_en?.[0]:"U"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.user?a==="ar"?s.user.name_ar:s.user.name_en:"Unknown User"}),e.jsxs(x,{variant:"secondary",className:"text-xs",children:[e.jsx(Q,{className:"mr-1 h-3 w-3"}),a==="ar"?"موثق":"Verified"]})]}),s.user?.rating&&s.user?.reviews_count&&e.jsxs("div",{className:"text-muted-foreground flex items-center gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-medium",children:s.user.rating})]}),e.jsxs("span",{children:["(",s.user.reviews_count," ",a==="ar"?"تقييم":"reviews",")"]})]}),e.jsxs("div",{className:"text-muted-foreground flex items-center gap-4 text-sm",children:[e.jsx("span",{children:s.user?`${a==="ar"?"عضو منذ":"Member since"} ${new Date(s.user.created_at).getFullYear()}`:"Unknown"}),s.user?.phone&&e.jsxs("span",{children:[a==="ar"?"الهاتف:":"Phone:"," ",s.user.phone]})]})]})]})]})})]})]})]})}),e.jsx(U,{})]}),e.jsx(L,{isOpen:y,onClose:()=>h(!1),onSuccess:()=>h(!1)})]})};export{Te as default};
