import{d as S,r as c,j as e,c as y,p as O,X as ns,g as os,h as is,s as cs,P as B,i as W,m as ls,o as se,B as M,b as K}from"./app-DNu21ahX.js";import{B as v,I as R}from"./input-BXRRwfPK.js";import{i as me,R as ds,T as hs,P as ms,C as ue,a as us,b as xe,O as pe,D as fe,u as xs,f as ge,g as ps,I as fs}from"./index-ZzcBV2Nk.js";import{u as gs}from"./useQuery-CWi7vQRG.js";import{P as be}from"./phone-Bs8D9i0T.js";import{R as ve}from"./index-lyxZp3q9.js";import{c as Ne}from"./index-D5ZxcEdC.js";import{C as je,a as bs}from"./index-Cm5xugH7.js";import{C as vs}from"./check-D-SAUTTA.js";import{L as Z}from"./loader-circle-l3U9WuYi.js";import{S as ie}from"./search-DpPktiVp.js";import{U as Ns}from"./user-CZQm_9xA.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]],ce=S("Apple",js);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ws=S("ChevronLeft",ys);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],le=S("Facebook",Cs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Ts=S("Globe",ks);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],ye=S("Instagram",Ss);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],Ps=S("Linkedin",$s);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],we=S("MessageCircle",Ms);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Rs=S("RotateCcw",As);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],Ds=S("Twitter",_s);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],Es=S("Youtube",Is),Ce=c.forwardRef(({className:s,orientation:a="horizontal",decorative:n=!0,...r},t)=>e.jsx(me,{ref:t,decorative:n,orientation:a,className:y("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...r}));Ce.displayName=me.displayName;const Ls=()=>gs({queryKey:["user","social-links"],queryFn:async()=>{const s=await fetch("/api/user/social-links");if(!s.ok)throw new Error("Failed to fetch social links");return await s.json()||[]},staleTime:1800*1e3,gcTime:3600*1e3,refetchOnWindowFocus:!1,retry:1}),Fs=s=>({facebook:le,instagram:ye,twitter:Ds,youtube:Es,linkedin:Ps,whatsapp:we,telegram:be})[s.toLowerCase()]||le,xa=()=>{const{language:s,t:a}=O(),{data:n,isLoading:r}=Ls(),t=l=>{window.open(l,"_blank","noopener,noreferrer")};return e.jsx("footer",{className:"bg-ink-900 text-white",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-16 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:`grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-4 ${s==="ar"?"rtl":"ltr"}`,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-2xl font-bold font-brand",children:a("brand.name")}),e.jsx("p",{className:`text-sm leading-relaxed text-gray-300 ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.description")})]}),e.jsx("div",{className:"flex space-x-4 rtl:space-x-reverse",children:r?e.jsx("div",{className:"flex space-x-4",children:[1,2,3].map(l=>e.jsx("div",{className:"h-10 w-10 animate-pulse rounded-full bg-gray-600"},l))}):n&&n.length>0?n.map((l,o)=>{const h=Fs(l.platform);return e.jsx(v,{variant:"icon",size:"icon",onClick:()=>t(l.url),className:"hover:text-brand-red-600 text-white",title:`Visit our ${l.platform}`,children:e.jsx(h,{className:"h-4 w-4 stroke-[1.5]"})},o)}):e.jsxs(e.Fragment,{children:[e.jsx(v,{variant:"icon",size:"icon",className:"hover:text-brand-red-600 text-white",children:e.jsx(ye,{className:"h-4 w-4 stroke-[1.5]"})}),e.jsx(v,{variant:"icon",size:"icon",className:"hover:text-brand-red-600 text-white",children:e.jsx(we,{className:"h-4 w-4 stroke-[1.5]"})}),e.jsx(v,{variant:"icon",size:"icon",className:"hover:text-brand-red-600 text-white",children:e.jsx(be,{className:"h-4 w-4 stroke-[1.5]"})})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:`border-brand-red-600 inline-block border-b-2 pb-1 text-lg font-medium text-white ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.quicklinks")}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:`hover:text-brand-red-600 text-white opacity-85 transition-colors ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.menu")})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:`hover:text-brand-red-600 text-white opacity-85 transition-colors ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.status")})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:`hover:text-brand-red-600 text-white opacity-85 transition-colors ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.about")})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:`hover:text-brand-red-600 text-white opacity-85 transition-colors ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.branches")})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:`border-brand-red-600 inline-block border-b-2 pb-1 text-lg font-medium text-white ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.contact")}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[e.jsx("p",{className:s==="ar"?"font-arabic":"font-sans",children:a("footer.location")}),e.jsx("p",{className:"font-mono",children:"+965 XXXX XXXX"}),e.jsx("p",{className:"font-sans",children:"info@onothah.com"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:`border-brand-red-600 inline-block border-b-2 pb-1 text-lg font-medium text-white ${s==="ar"?"font-arabic":"font-sans"}`,children:s==="ar"?"طرق الدفع":"Payment Methods"}),e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[e.jsx("div",{className:"flex h-6 w-10 items-center justify-center rounded bg-blue-600 text-xs font-bold text-white transition-opacity hover:opacity-80",children:"VISA"}),e.jsx("div",{className:"flex h-6 w-10 items-center justify-center rounded bg-red-600 text-xs font-bold text-white transition-opacity hover:opacity-80",children:"MC"}),e.jsx("div",{className:"flex h-6 w-10 items-center justify-center rounded bg-blue-800 text-xs font-bold text-white transition-opacity hover:opacity-80",children:"AMEX"})]})]})]}),e.jsx(Ce,{className:"bg-border my-8 opacity-40"}),e.jsx("div",{className:`flex flex-col items-center justify-between space-y-4 md:flex-row md:space-y-0 ${s==="ar"?"rtl":"ltr"}`,children:e.jsx("p",{className:`text-sm text-gray-400 ${s==="ar"?"font-arabic":"font-sans"}`,children:a("footer.rights")})})]})})},ke=ds,pa=hs,Os=ms,Te=c.forwardRef(({className:s,...a},n)=>e.jsx(pe,{ref:n,className:y("fixed inset-0 z-50 backdrop-blur-md bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));Te.displayName=pe.displayName;const ae=c.forwardRef(({className:s,children:a,...n},r)=>e.jsxs(Os,{children:[e.jsx(Te,{}),e.jsxs(ue,{ref:r,className:y("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-4 sm:p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",s),...n,children:[a,e.jsxs(us,{className:"absolute right-3 top-3 sm:right-4 sm:top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground touch-manipulation",children:[e.jsx(ns,{className:"h-5 w-5 sm:h-4 sm:w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ae.displayName=ue.displayName;const te=({className:s,...a})=>e.jsx("div",{className:y("flex flex-col space-y-1.5 text-center sm:text-left",s),...a});te.displayName="DialogHeader";const zs=({className:s,...a})=>e.jsx("div",{className:y("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});zs.displayName="DialogFooter";const re=c.forwardRef(({className:s,...a},n)=>e.jsx(xe,{ref:n,className:y("text-lg font-semibold leading-none tracking-tight",s),...a}));re.displayName=xe.displayName;const Vs=c.forwardRef(({className:s,...a},n)=>e.jsx(fe,{ref:n,className:y("text-sm text-muted-foreground",s),...a}));Vs.displayName=fe.displayName;var H="Tabs",[qs,fa]=is(H,[ge]),Se=ge(),[Bs,ne]=qs(H),$e=c.forwardRef((s,a)=>{const{__scopeTabs:n,value:r,onValueChange:t,defaultValue:l,orientation:o="horizontal",dir:h,activationMode:g="automatic",...f}=s,m=xs(h),[p,d]=os({prop:r,onChange:t,defaultProp:l??"",caller:H});return e.jsx(Bs,{scope:n,baseId:cs(),value:p,onValueChange:d,orientation:o,dir:m,activationMode:g,children:e.jsx(B.div,{dir:m,"data-orientation":o,...f,ref:a})})});$e.displayName=H;var Pe="TabsList",Me=c.forwardRef((s,a)=>{const{__scopeTabs:n,loop:r=!0,...t}=s,l=ne(Pe,n),o=Se(n);return e.jsx(ps,{asChild:!0,...o,orientation:l.orientation,dir:l.dir,loop:r,children:e.jsx(B.div,{role:"tablist","aria-orientation":l.orientation,...t,ref:a})})});Me.displayName=Pe;var Ae="TabsTrigger",Re=c.forwardRef((s,a)=>{const{__scopeTabs:n,value:r,disabled:t=!1,...l}=s,o=ne(Ae,n),h=Se(n),g=Ie(o.baseId,r),f=Ee(o.baseId,r),m=r===o.value;return e.jsx(fs,{asChild:!0,...h,focusable:!t,active:m,children:e.jsx(B.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":f,"data-state":m?"active":"inactive","data-disabled":t?"":void 0,disabled:t,id:g,...l,ref:a,onMouseDown:W(s.onMouseDown,p=>{!t&&p.button===0&&p.ctrlKey===!1?o.onValueChange(r):p.preventDefault()}),onKeyDown:W(s.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(r)}),onFocus:W(s.onFocus,()=>{const p=o.activationMode!=="manual";!m&&!t&&p&&o.onValueChange(r)})})})});Re.displayName=Ae;var _e="TabsContent",De=c.forwardRef((s,a)=>{const{__scopeTabs:n,value:r,forceMount:t,children:l,...o}=s,h=ne(_e,n),g=Ie(h.baseId,r),f=Ee(h.baseId,r),m=r===h.value,p=c.useRef(m);return c.useEffect(()=>{const d=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(d)},[]),e.jsx(ls,{present:t||m,children:({present:d})=>e.jsx(B.div,{"data-state":m?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":g,hidden:!d,id:f,tabIndex:0,...o,ref:a,style:{...s.style,animationDuration:p.current?"0s":void 0},children:d&&l})})});De.displayName=_e;function Ie(s,a){return`${s}-trigger-${a}`}function Ee(s,a){return`${s}-content-${a}`}var Hs=$e,Le=Me,Fe=Re,Oe=De;const Gs=Hs,ze=c.forwardRef(({className:s,...a},n)=>e.jsx(Le,{ref:n,className:y("inline-flex h-auto items-center justify-start bg-white border-b border-border overflow-x-auto",s),...a}));ze.displayName=Le.displayName;const J=c.forwardRef(({className:s,...a},n)=>e.jsx(Fe,{ref:n,className:y("inline-flex items-center justify-center whitespace-nowrap px-4 py-3 text-sm font-medium text-ink-900 min-h-11 transition-all duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-red-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-red-tint-50 data-[state=active]:text-brand-red-600 data-[state=active]:border-b-2 data-[state=active]:border-brand-red-600 relative",s),...a}));J.displayName=Fe.displayName;const ee=c.forwardRef(({className:s,...a},n)=>e.jsx(Oe,{ref:n,className:y("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a}));ee.displayName=Oe.displayName;const Xs=Ne("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),A=c.forwardRef(({className:s,...a},n)=>e.jsx(ve,{ref:n,className:y(Xs(),s),...a}));A.displayName=ve.displayName;const Ve=c.forwardRef(({className:s,...a},n)=>e.jsx(je,{ref:n,className:y("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:e.jsx(bs,{className:y("flex items-center justify-center text-current"),children:e.jsx(vs,{className:"h-4 w-4"})})}));Ve.displayName=je.displayName;const Us=1,Ws=1e6;let Q=0;function Ks(){return Q=(Q+1)%Number.MAX_SAFE_INTEGER,Q.toString()}const Y=new Map,de=s=>{if(Y.has(s))return;const a=setTimeout(()=>{Y.delete(s),F({type:"REMOVE_TOAST",toastId:s})},Ws);Y.set(s,a)},Qs=(s,a)=>{switch(a.type){case"ADD_TOAST":return{...s,toasts:[a.toast,...s.toasts].slice(0,Us)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(n=>n.id===a.toast.id?{...n,...a.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=a;return n?de(n):s.toasts.forEach(r=>{de(r.id)}),{...s,toasts:s.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return a.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(n=>n.id!==a.toastId)}}},V=[];let q={toasts:[]};function F(s){q=Qs(q,s),V.forEach(a=>{a(q)})}function Ys({...s}){const a=Ks(),n=t=>F({type:"UPDATE_TOAST",toast:{...t,id:a}}),r=()=>F({type:"DISMISS_TOAST",toastId:a});return F({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:t=>{t||r()}}}),{id:a,dismiss:r,update:n}}function qe(){const[s,a]=c.useState(q);return c.useEffect(()=>(V.push(a),()=>{const n=V.indexOf(a);n>-1&&V.splice(n,1)}),[s]),{...s,toast:Ys,dismiss:n=>F({type:"DISMISS_TOAST",toastId:n})}}const Zs=({isOpen:s,onClose:a,onSuccess:n,onBack:r,phoneNumber:t})=>{const{language:l,t:o}=O(),{verifyOTP:h,pendingUser:g}=se(),{toast:f}=qe(),[m,p]=c.useState(""),[d,w]=c.useState(!1),[C,b]=c.useState(60),[$,_]=c.useState(!1);c.useEffect(()=>{if(C>0){const N=setTimeout(()=>b(C-1),1e3);return()=>clearTimeout(N)}else _(!0)},[C]);const I=N=>N.length===12&&N.startsWith("+965")?`+965 •••• ••${N.slice(4).slice(-2)}`:N,G=N=>{const P=N.target.value.replace(/\D/g,"").slice(0,6);p(P)},E=async N=>{if(N.preventDefault(),m.length!==6){f({title:o("auth.error"),description:o("auth.invalidOTP"),variant:"destructive"});return}if(!g){f({title:o("auth.error"),description:"No pending verification found",variant:"destructive"});return}w(!0);try{const P=g.phoneE164.replace("+965","");await h(P,m),f({title:o("auth.success"),description:o("auth.registrationComplete"),variant:"default"}),n()}catch(P){f({title:o("auth.error"),description:P instanceof Error?P.message:o("auth.verificationFailed"),variant:"destructive"})}finally{w(!1)}},X=async()=>{$&&(b(60),_(!1),p(""),f({title:o("auth.otpResent"),description:o("auth.otpResentDescription")}))};return e.jsx(ke,{open:s,onOpenChange:a,children:e.jsxs(ae,{className:`max-w-md ${l==="ar"?"rtl":"ltr"}`,children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{variant:"ghost",size:"sm",onClick:r,className:"p-1 h-8 w-8",children:e.jsx(ws,{className:`h-4 w-4 ${l==="ar"?"rotate-180":""}`})}),e.jsx(re,{className:`text-luxury-black ${l==="ar"?"font-arabic":"font-serif"}`,children:o("auth.verifyPhone")})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:`text-muted-foreground ${l==="ar"?"font-arabic":""}`,children:o("auth.otpSentTo")}),e.jsx("p",{className:`font-mono text-luxury-black font-semibold ${l==="ar"?"font-arabic":""}`,children:I(t)})]}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"otp",className:`text-center block ${l==="ar"?"font-arabic":""}`,children:o("auth.enterOTP")}),e.jsx(R,{id:"otp",type:"tel",dir:"ltr",value:m,onChange:G,placeholder:"000000",className:"text-center text-lg font-mono tracking-wider",maxLength:6,autoComplete:"one-time-code"})]}),e.jsxs(v,{type:"submit",className:"w-full bg-brand-red-600 text-white hover:bg-brand-red-700 hover:shadow-glow transition-all duration-300 font-semibold py-3",disabled:d||m.length!==6,children:[d&&e.jsx(Z,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{className:l==="ar"?"font-arabic":"",children:o("auth.verify")})]})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:`text-sm text-muted-foreground ${l==="ar"?"font-arabic":""}`,children:o("auth.didntReceiveCode")}),e.jsxs(v,{variant:"ghost",onClick:X,disabled:!$,className:"text-luxury-black hover:text-luxury-gold",children:[e.jsx(Rs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:l==="ar"?"font-arabic":"",children:$?o("auth.resendOTP"):`${o("auth.resendIn")} ${C}s`})]}),e.jsx(v,{variant:"ghost",onClick:r,className:"text-muted-foreground hover:text-luxury-black",children:e.jsx("span",{className:l==="ar"?"font-arabic":"",children:o("auth.editPhone")})})]})]}),e.jsx("p",{className:`text-xs text-center text-muted-foreground mt-4 ${l==="ar"?"font-arabic":""}`,children:o("auth.demoDisclaimer")})]})})},Js=Ne("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ea({className:s,variant:a,...n}){return e.jsx("div",{className:y(Js({variant:a}),s),...n})}const he=({value:s,onChange:a,placeholder:n,className:r})=>{const{language:t,t:l}=O(),[o,h]=c.useState(s);c.useEffect(()=>{h(s)},[s]);const g=C=>{const b=C.replace(/\D/g,"");return b.length>=4?`${b.slice(0,4)} ${b.slice(4,8)}`:b},f=C=>{let b=C.target.value;b.startsWith("+965")&&(b=b.slice(4));const _=b.replace(/\D/g,"").slice(0,8);h(g(_)),a(_)},m=C=>{h(s)},p=C=>{h(g(s))},d=s.length===8,w=s.length>0&&!d;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 z-10",children:e.jsx(ea,{variant:"secondary",className:"text-xs font-mono bg-muted text-muted-foreground",children:"+965"})}),e.jsx(R,{type:"tel",dir:"ltr",value:o,onChange:f,onFocus:m,onBlur:p,placeholder:n,className:`pl-16 font-mono ${w?"border-destructive":""} ${r}`,maxLength:9})]}),w&&e.jsx("p",{className:`text-xs text-destructive ${t==="ar"?"font-arabic":""}`,children:l("auth.phoneError")})]})},sa=({isOpen:s,onClose:a,onSuccess:n})=>{const{language:r,t}=O(),{login:l,loginWithSocial:o,signup:h,pendingUser:g}=se(),{toast:f}=qe(),[m,p]=c.useState("login"),[d,w]=c.useState(!1),[C,b]=c.useState(!1),[$,_]=c.useState(""),[I,G]=c.useState(""),[E,X]=c.useState(""),[N,P]=c.useState(""),[L,Be]=c.useState(""),[U,He]=c.useState(""),[oe,Ge]=c.useState(!1),[T,D]=c.useState({}),[u,k]=c.useState({});c.useEffect(()=>{D({}),k({})},[m]);const Xe=()=>{const i={};return $.trim()?$.length!==8&&(i.phone=t("auth.phoneInvalid")):i.phone=t("auth.phoneRequired"),I.trim()?I.length<6&&(i.password=t("auth.passwordMinLength")):i.password=t("auth.passwordRequired"),D(i),Object.keys(i).length===0},Ue=()=>{const i={};return E.trim()?E.trim().length<2&&(i.name=t("auth.nameMinLength")):i.name=t("auth.nameRequired"),N.trim()?N.length!==8&&(i.phone=t("auth.phoneInvalid")):i.phone=t("auth.phoneRequired"),L.trim()?L.length<6&&(i.password=t("auth.passwordMinLength")):i.password=t("auth.passwordRequired"),U.trim()?L!==U&&(i.confirmPassword=t("auth.passwordMismatch")):i.confirmPassword=t("auth.confirmPasswordRequired"),oe||(i.terms=t("auth.agreeTermsRequired")),k(i),Object.keys(i).length===0},We=async i=>{if(i.preventDefault(),D({}),!!Xe()){w(!0);try{await l($,I),n(),a()}catch(x){const j=x instanceof Error?x.message:t("auth.loginFailed");j.includes("credentials")||j.includes("password")||j.includes("phone")?D({general:j}):D({general:j})}finally{w(!1)}}},z=async i=>{w(!0);try{await o(i),n(),a()}catch{f({title:t("auth.error"),description:t("auth.loginFailed"),variant:"destructive"})}finally{w(!1)}},Ke=async i=>{if(i.preventDefault(),k({}),!!Ue()){w(!0);try{const x=await h({fullName:E,phone:N,password:L});f({title:t("auth.otpSent"),description:`OTP: ${x.otp} (Demo - expires in 10 minutes)`,variant:"default"}),b(!0)}catch(x){const j=x instanceof Error?x.message:t("auth.signupFailed");j.includes("phone")&&j.includes("already")?k({phone:j}):j.includes("name")||j.includes("fullName")?k({name:j}):j.includes("password")?k({password:j}):k({general:j})}finally{w(!1)}}},Qe=()=>{b(!1),n(),a()},Ye=()=>{b(!1)},Ze=i=>{_(i),T.phone&&D(x=>({...x,phone:void 0}))},Je=i=>{G(i.target.value),T.password&&D(x=>({...x,password:void 0}))},es=i=>{X(i.target.value),u.name&&k(x=>({...x,name:void 0}))},ss=i=>{P(i),u.phone&&k(x=>({...x,phone:void 0}))},as=i=>{Be(i.target.value),u.password&&k(x=>({...x,password:void 0}))},ts=i=>{He(i.target.value),u.confirmPassword&&k(x=>({...x,confirmPassword:void 0}))},rs=i=>{Ge(i),u.terms&&k(x=>({...x,terms:void 0}))};return C&&g?e.jsx(Zs,{isOpen:s,onClose:a,onSuccess:Qe,onBack:Ye,phoneNumber:g.phoneE164}):e.jsx(ke,{open:s,onOpenChange:a,children:e.jsxs(ae,{className:`max-w-md ${r==="ar"?"rtl":"ltr"}`,children:[e.jsx(te,{children:e.jsx(re,{className:`text-center text-luxury-black ${r==="ar"?"font-arabic":"font-serif"}`,children:t("auth.welcome")})}),e.jsxs(Gs,{value:m,onValueChange:i=>p(i),children:[e.jsxs(ze,{className:"grid w-full grid-cols-2",children:[e.jsx(J,{value:"login",className:r==="ar"?"font-arabic":"",children:t("auth.login")}),e.jsx(J,{value:"signup",className:r==="ar"?"font-arabic":"",children:t("auth.signup")})]}),e.jsx(ee,{value:"login",className:"space-y-4",children:e.jsxs("form",{onSubmit:We,className:"space-y-4",children:[T.general&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:T.general})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"login-phone",className:r==="ar"?"font-arabic":"",children:t("auth.phone")}),e.jsx(he,{value:$,onChange:Ze,placeholder:t("auth.phonePlaceholder"),className:T.phone?"border-red-500 focus:border-red-500 focus:ring-red-500":""}),T.phone&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:T.phone})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"login-password",className:r==="ar"?"font-arabic":"",children:t("auth.password")}),e.jsx(R,{id:"login-password",type:"password",value:I,onChange:Je,placeholder:t("auth.passwordPlaceholder"),className:`${r==="ar"?"font-arabic":""} ${T.password?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`}),T.password&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:T.password})]})]}),e.jsxs(v,{type:"submit",className:"w-full bg-brand-red-600 text-white hover:bg-brand-red-700 hover:shadow-glow transition-all duration-300 font-semibold py-3",disabled:d,children:[d&&e.jsx(Z,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:t("auth.continue")})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:`bg-background px-2 text-muted-foreground ${r==="ar"?"font-arabic":""}`,children:t("auth.orContinueWith")})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(v,{type:"button",variant:"outline",onClick:()=>z("apple"),disabled:d,className:"border-brand-red-200 hover:border-brand-red-600 hover:bg-brand-red-50 transition-all duration-300",children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Apple"]}),e.jsxs(v,{type:"button",variant:"outline",onClick:()=>z("google"),disabled:d,className:"border-brand-red-200 hover:border-brand-red-600 hover:bg-brand-red-50 transition-all duration-300",children:[e.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]})]})]})}),e.jsx(ee,{value:"signup",className:"space-y-4",children:e.jsxs("form",{onSubmit:Ke,className:"space-y-4",children:[u.general&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:u.general})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"signup-name",className:r==="ar"?"font-arabic":"",children:t("auth.fullName")}),e.jsx(R,{id:"signup-name",value:E,onChange:es,placeholder:t("auth.fullNamePlaceholder"),className:`${r==="ar"?"font-arabic":""} ${u.name?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`}),u.name&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:u.name})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"signup-phone",className:r==="ar"?"font-arabic":"",children:t("auth.phone")}),e.jsx(he,{value:N,onChange:ss,placeholder:t("auth.phonePlaceholder"),className:u.phone?"border-red-500 focus:border-red-500 focus:ring-red-500":""}),u.phone&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:u.phone})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"signup-password",className:r==="ar"?"font-arabic":"",children:t("auth.password")}),e.jsx(R,{id:"signup-password",type:"password",value:L,onChange:as,placeholder:t("auth.passwordPlaceholder"),className:`${r==="ar"?"font-arabic":""} ${u.password?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`}),u.password&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:u.password})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"confirm-password",className:r==="ar"?"font-arabic":"",children:t("auth.confirmPassword")}),e.jsx(R,{id:"confirm-password",type:"password",value:U,onChange:ts,placeholder:t("auth.confirmPasswordPlaceholder"),className:`${r==="ar"?"font-arabic":""} ${u.confirmPassword?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`}),u.confirmPassword&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:u.confirmPassword})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{id:"terms",checked:oe,onCheckedChange:rs,className:u.terms?"border-red-500":""}),e.jsx(A,{htmlFor:"terms",className:`text-sm ${r==="ar"?"font-arabic":""}`,children:t("auth.agreeToTerms")})]}),u.terms&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:u.terms})]})]}),e.jsxs(v,{type:"submit",className:"w-full bg-brand-red-600 text-white hover:bg-brand-red-700 hover:shadow-glow transition-all duration-300 font-semibold py-3",disabled:d,children:[d&&e.jsx(Z,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:t("auth.createAccount")})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:`bg-background px-2 text-muted-foreground ${r==="ar"?"font-arabic":""}`,children:t("auth.orContinueWith")})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(v,{type:"button",variant:"outline",onClick:()=>z("apple"),disabled:d,className:"border-brand-red-200 hover:border-brand-red-600 hover:bg-brand-red-50 transition-all duration-300",children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Apple"]}),e.jsxs(v,{type:"button",variant:"outline",onClick:()=>z("google"),disabled:d,className:"border-brand-red-200 hover:border-brand-red-600 hover:bg-brand-red-50 transition-all duration-300",children:[e.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]})]})]})})]}),e.jsx("p",{className:`text-xs text-center text-muted-foreground mt-4 ${r==="ar"?"font-arabic":""}`,children:t("auth.demoDisclaimer")})]})})},ga=()=>{const{language:s,toggleLanguage:a,t:n}=O(),{isAuthenticated:r}=se(),[t,l]=c.useState(""),[o,h]=c.useState(!1),g=window.location.pathname.startsWith("/admin"),f=d=>{d.preventDefault(),t.trim()&&K.visit(`/search?q=${encodeURIComponent(t.trim())}`)},m=()=>{r?K.visit("/profile"):h(!0)},p=()=>{h(!1),K.visit("/profile")};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"border-border shadow-brand sticky top-0 z-50 border-b bg-white",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex h-16 items-center justify-between",children:[e.jsx("div",{className:"w-10 lg:hidden"}),e.jsx("div",{className:"mx-8 hidden flex-1 md:flex",children:e.jsxs("form",{onSubmit:f,className:"relative w-full",children:[e.jsx(ie,{className:"text-muted-foreground absolute top-1/2 h-4 w-4 -translate-y-1/2 transform stroke-[1.5] ltr:left-3 rtl:right-3"}),e.jsx(R,{value:t,onChange:d=>l(d.target.value),placeholder:n("search.placeholder"),className:`bg-card focus:ring-brand-red-600 border-0 focus:ring-2 ${s==="ar"?"pr-10 text-right":"pl-10 text-left"}`})]})}),e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[!g&&e.jsxs(v,{variant:"ghost",size:"sm",onClick:a,className:"text-ink-900 hover:text-brand-red-600 group transition-colors",children:[e.jsx(Ts,{className:"group-hover:text-brand-red-600 h-4 w-4 stroke-[1.5]"}),e.jsx("span",{className:"ml-1 text-xs font-medium rtl:ml-0 rtl:mr-1",children:s==="ar"?"EN":"ع"})]}),e.jsx(v,{variant:"ghost",size:"sm",className:"text-ink-900 hover:text-brand-red-600",onClick:m,children:e.jsx(Ns,{className:"h-4 w-4 stroke-[1.5]"})})]})]}),e.jsx("div",{className:"pb-3 md:hidden",children:e.jsxs("form",{onSubmit:f,className:"relative",children:[e.jsx(ie,{className:"text-muted-foreground absolute top-1/2 h-4 w-4 -translate-y-1/2 transform stroke-[1.5] ltr:left-3 rtl:right-3"}),e.jsx(R,{value:t,onChange:d=>l(d.target.value),placeholder:n("search.placeholder"),className:`bg-card border-0 ${s==="ar"?"pr-10 text-right":"pl-10 text-left"}`})]})})]})}),e.jsx(sa,{isOpen:o,onClose:()=>h(!1),onSuccess:p})]})};export{sa as A,ea as B,ws as C,ke as D,xa as F,ga as H,ye as I,A as L,we as M,Rs as R,Gs as T,Es as Y,pa as a,ae as b,te as c,re as d,ze as e,J as f,ee as g,zs as h,le as i,Ds as j,Ps as k,qe as l,Ls as u};
