import{d as ea,n as os,r as c,j as e,e as cs,g as sa,h as aa,B as ta,c as L,m as ra,l as ia,u as Ve,H as Ge,b as g}from"./app-uIBbFV7s.js";import{a as D,B as m,b as ds,H as qe,F as Ye,A as la,D as ee,c as Je,d as se,e as ae,f as te,L as b,I as F,T as na,g as oa,h as re,i as ie,R as Ze,j as be}from"./Header-CBnxxvlh.js";import{Z as ca,H as da,T as Qe,P as ma}from"./ProductDetails-B2XGKOOI.js";import{C as f,a as v,b as K,c as V}from"./card-CRPh_RWT.js";import{C as xa}from"./check-BKj3NmhL.js";import{S as Xe}from"./star-Bbywy0m0.js";import{C as me}from"./crown-CRR7HS9B.js";import{e as ms,R as ha,T as pa,P as ua,W as ga,C as fa,b as ja,D as va,a as xs,O as Na}from"./index-B66VouJH.js";import{A as ba,a as _a,b as ya}from"./avatar-Drxpr-cI.js";import{u as wa}from"./use-cached-pagination-CUdkINS7.js";import{u as Da}from"./use-favorites-CsLJV9mW.js";import{U as es}from"./user-layout-CPhqkvt1.js";import{S as Ca}from"./shield-C_XFy0Xc.js";import{S as de}from"./square-pen-NHgyS63q.js";import{U as Sa}from"./user-Boxb24vn.js";import{H as R}from"./heart-B1sJyeMa.js";import{P as G}from"./package-B21yyitO.js";import{C as ss}from"./credit-card-C4dsvzva.js";import{S as Aa,L as Pa}from"./settings-C_r1I_dc.js";import{T as le}from"./trending-up-BZgG0Jo3.js";import{C as as}from"./clock-Co_BqVa7.js";import{E as ts}from"./eye-CWVhv2BV.js";import{T as rs}from"./trash-2-CEsYTU9n.js";import"./useQuery-BOwQyM-Z.js";import"./phone-BlRnQl2Q.js";import"./index-CZeLxcXh.js";import"./index-CW_uxFBv.js";import"./index-7_aMnH8U.js";import"./index-D11fCLcl.js";import"./loader-circle-8zL-8vl0.js";import"./search-C9k4RQzq.js";import"./select-C4szj2fj.js";import"./index-C87z0twV.js";import"./index-BdQq_4o_.js";import"./index-DfaiIYQt.js";import"./plus-2LA9Ba3C.js";import"./upload-D-iVhWHy.js";import"./index-BESL25gX.js";import"./use-forced-theme-BDmHQh6w.js";/* empty css            *//**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],is=ea("CircleCheck",$a),Ea=({currentSubscription:t,onPlanSelect:o,selectedPlanId:n,onUpgrade:h,isUpgrading:u=!1})=>{const{language:i}=os(),[C,a]=c.useState([]),[z,S]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const d=localStorage.getItem("authToken");if(!d)return;const A=await(await fetch("/api/user/subscription-plans/upgrade-options-for-profile",{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}})).json();A.success&&a(A.data||[])}catch(d){console.error("Error loading upgrade plans:",d)}finally{S(!1)}})()},[t]);const xe=r=>{o(r)},he=()=>{n&&h(n)},ne=r=>i==="ar"?r.name_ar:r.name_en,pe=r=>{const d=[];return r.ad_limit>0&&(i==="ar"?d.push(`${r.ad_limit} إعلان شهرياً`):d.push(`${r.ad_limit} ads per month`)),r.has_unlimited_featured_ads?i==="ar"?d.push("إعلانات مميزة غير محدودة"):d.push("Unlimited featured ads"):r.featured_ads_count&&r.featured_ads_count>0&&(i==="ar"?d.push(`${r.featured_ads_count} إعلان مميز`):d.push(`${r.featured_ads_count} featured ads`)),r.priority_support&&(i==="ar"?d.push("دعم أولوي"):d.push("Priority support")),r.analytics&&(i==="ar"?d.push("تحليلات متقدمة"):d.push("Advanced analytics")),r.readable_billing_cycle&&(i==="ar"?d.push(`دورة فوترة: ${r.readable_billing_cycle}`):d.push(`Billing: ${r.readable_billing_cycle}`)),r.is_lifetime&&(i==="ar"?d.push("اشتراك مدى الحياة"):d.push("Lifetime subscription")),d.length===0&&(i==="ar"?(d.push("إعلانات أساسية"),d.push("دعم قياسي")):(d.push("Basic listings"),d.push("Standard support"))),d},Y=r=>{const d=ne(r).toLowerCase();return d.includes("free")||d.includes("مجاني")?ca:d.includes("silver")||d.includes("فضي")?Xe:d.includes("gold")||d.includes("ذهبي")?me:Xe};return z?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:i==="ar"?"font-arabic":"",children:i==="ar"?"جاري تحميل خطط الترقية...":"Loading upgrade plans..."})]})}):e.jsxs("div",{className:`flex flex-col h-full ${i==="ar"?"rtl":"ltr"}`,children:[e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:`text-lg font-semibold mb-3 ${i==="ar"?"font-arabic":""}`,children:i==="ar"?"خطة الاشتراك الحالية":"Current Subscription Plan"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-medium text-lg ${i==="ar"?"font-arabic":""}`,children:i==="ar"?t.plan.name_ar:t.plan.name_en}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx("p",{className:`text-sm text-muted-foreground ${i==="ar"?"font-arabic":""}`,children:i==="ar"?`${t.plan.ad_limit||"N/A"} إعلان شهرياً`:`${t.plan.ad_limit||"N/A"} ads per month`}),e.jsxs("p",{className:`text-sm font-medium ${i==="ar"?"font-arabic":""}`,children:["KD ",t.plan.price]})]})]}),e.jsx(D,{variant:"outline",className:"ml-4",children:i==="ar"?"نشط":"Active"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(r=>{Y(r);const d=n===r.id,J=pe(r);return e.jsx(f,{className:`flex flex-col h-full cursor-pointer transition-all hover:shadow-lg ${d?"ring-2 ring-primary border-primary":"hover:border-primary/50"}`,onClick:()=>xe(r.id),children:e.jsxs(v,{className:"p-6 flex flex-col h-full",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h4",{className:`text-lg font-semibold mb-1 ${i==="ar"?"font-arabic":""}`,children:ne(r)}),(r.description_en||r.description_ar)&&e.jsx("p",{className:`text-sm text-muted-foreground mb-3 ${i==="ar"?"font-arabic":""}`,children:i==="ar"?r.description_ar:r.description_en}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[t.plan.is_lifetime?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:`text-2xl font-bold ${i==="ar"?"font-arabic":""}`,children:r.price===0?i==="ar"?"مجاني":"Free":`KD ${r.price}`}),e.jsx(D,{variant:"outline",className:"mt-1 text-xs",children:i==="ar"?"لا يوجد خصم للخطط الدائمة":"No discount for lifetime plans"})]}):r.discounted_price!==void 0&&r.original_price!==void 0&&r.discounted_price<r.original_price?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-2xl font-bold text-green-600 ${i==="ar"?"font-arabic":""}`,children:["KD ",r.discounted_price.toFixed(2)]}),e.jsxs("span",{className:`text-lg line-through text-muted-foreground ${i==="ar"?"font-arabic":""}`,children:["KD ",r.original_price]})]}),e.jsx(D,{variant:"destructive",className:"mt-1",children:i==="ar"?`وفر KD ${r.discount_amount?.toFixed(2)}`:`Save KD ${r.discount_amount?.toFixed(2)}`})]}):e.jsx("span",{className:`text-2xl font-bold ${i==="ar"?"font-arabic":""}`,children:r.price===0?i==="ar"?"مجاني":"Free":`KD ${r.price}`}),r.price>0&&e.jsx("span",{className:`text-sm text-muted-foreground ${i==="ar"?"font-arabic":""}`,children:r.is_lifetime?i==="ar"?"مدى الحياة":"Lifetime":`/${r.months_count} ${i==="ar"?"شهر":"months"}`})]}),r.price>0&&e.jsx(D,{variant:"secondary",className:"mb-4",children:i==="ar"?"مدفوع":"Paid"})]}),J.length>0&&e.jsx("ul",{className:"space-y-2 flex-1",children:J.map((A,ue)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(xa,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:`text-sm ${i==="ar"?"font-arabic":""}`,children:A.trim()})]},ue))}),e.jsx(m,{className:`w-full mt-4 ${d?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-primary hover:text-primary-foreground"}`,variant:d?"default":"outline",children:d?i==="ar"?"محدد":"Selected":i==="ar"?"اختر هذه الخطة":"Select This Plan"})]})},r.id)})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:`text-sm text-muted-foreground ${i==="ar"?"font-arabic":""}`,children:i==="ar"?"سيتم حساب الخصم بناءً على الأيام المتبقية في اشتراكك الحالي":"Discount will be calculated based on remaining days in your current subscription"})}),n&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx(m,{onClick:he,disabled:u,className:"w-full max-w-md",size:"lg",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),i==="ar"?"جاري الترقية...":"Upgrading..."]}):i==="ar"?"ترقية الاشتراك":"Upgrade Subscription"})})]})};var hs="AlertDialog",[ka,zt]=sa(hs,[ms]),T=ms(),ps=t=>{const{__scopeAlertDialog:o,...n}=t,h=T(o);return e.jsx(ha,{...h,...n,modal:!0})};ps.displayName=hs;var Fa="AlertDialogTrigger",us=c.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...h}=t,u=T(n);return e.jsx(pa,{...u,...h,ref:o})});us.displayName=Fa;var Ta="AlertDialogPortal",gs=t=>{const{__scopeAlertDialog:o,...n}=t,h=T(o);return e.jsx(ua,{...h,...n})};gs.displayName=Ta;var Ia="AlertDialogOverlay",fs=c.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...h}=t,u=T(n);return e.jsx(Na,{...u,...h,ref:o})});fs.displayName=Ia;var q="AlertDialogContent",[Ra,La]=ka(q),Oa=ta("AlertDialogContent"),js=c.forwardRef((t,o)=>{const{__scopeAlertDialog:n,children:h,...u}=t,i=T(n),C=c.useRef(null),a=cs(o,C),z=c.useRef(null);return e.jsx(ga,{contentName:q,titleName:vs,docsSlug:"alert-dialog",children:e.jsx(Ra,{scope:n,cancelRef:z,children:e.jsxs(fa,{role:"alertdialog",...i,...u,ref:a,onOpenAutoFocus:aa(u.onOpenAutoFocus,S=>{S.preventDefault(),z.current?.focus({preventScroll:!0})}),onPointerDownOutside:S=>S.preventDefault(),onInteractOutside:S=>S.preventDefault(),children:[e.jsx(Oa,{children:h}),e.jsx(Ma,{contentRef:C})]})})})});js.displayName=q;var vs="AlertDialogTitle",Ns=c.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...h}=t,u=T(n);return e.jsx(ja,{...u,...h,ref:o})});Ns.displayName=vs;var bs="AlertDialogDescription",_s=c.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...h}=t,u=T(n);return e.jsx(va,{...u,...h,ref:o})});_s.displayName=bs;var Ua="AlertDialogAction",ys=c.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...h}=t,u=T(n);return e.jsx(xs,{...u,...h,ref:o})});ys.displayName=Ua;var ws="AlertDialogCancel",Ds=c.forwardRef((t,o)=>{const{__scopeAlertDialog:n,...h}=t,{cancelRef:u}=La(ws,n),i=T(n),C=cs(o,u);return e.jsx(xs,{...i,...h,ref:C})});Ds.displayName=ws;var Ma=({contentRef:t})=>{const o=`\`${q}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${q}\` by passing a \`${bs}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${q}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(o)},[o,t]),null},za=ps,Ba=us,Wa=gs,Cs=fs,Ss=js,As=ys,Ps=Ds,$s=Ns,Es=_s;const ls=za,ns=Ba,Ha=Wa,ks=c.forwardRef(({className:t,...o},n)=>e.jsx(Cs,{className:L("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...o,ref:n}));ks.displayName=Cs.displayName;const _e=c.forwardRef(({className:t,...o},n)=>e.jsxs(Ha,{children:[e.jsx(ks,{}),e.jsx(Ss,{ref:n,className:L("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o})]}));_e.displayName=Ss.displayName;const ye=({className:t,...o})=>e.jsx("div",{className:L("flex flex-col space-y-2 text-center sm:text-left",t),...o});ye.displayName="AlertDialogHeader";const we=({className:t,...o})=>e.jsx("div",{className:L("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...o});we.displayName="AlertDialogFooter";const De=c.forwardRef(({className:t,...o},n)=>e.jsx($s,{ref:n,className:L("text-lg font-semibold",t),...o}));De.displayName=$s.displayName;const Ce=c.forwardRef(({className:t,...o},n)=>e.jsx(Es,{ref:n,className:L("text-sm text-muted-foreground",t),...o}));Ce.displayName=Es.displayName;const Se=c.forwardRef(({className:t,...o},n)=>e.jsx(As,{ref:n,className:L(ds(),t),...o}));Se.displayName=As.displayName;const Ae=c.forwardRef(({className:t,...o},n)=>e.jsx(Ps,{ref:n,className:L(ds({variant:"outline"}),"mt-2 sm:mt-0",t),...o}));Ae.displayName=Ps.displayName;function Bt({user:t,requiresAuth:o,stats:n,recentListings:h,recentWishlist:u,subscriptionPlans:i,transactions:C}){const{language:a,toggleLanguage:z}=os(),{isAuthenticated:S,logout:xe}=ra(),[he,ne]=c.useState("overview"),[pe,Y]=c.useState(!1),[r,d]=c.useState({email:!0,sms:!1,push:!0}),[J,A]=c.useState(!1),[ue,ge]=c.useState(!1),[Fs,O]=c.useState(!1),[Ka,Va]=c.useState(null),[Pe,$e]=c.useState(void 0),[Ts,Ee]=c.useState(!1),[Ga,qa]=c.useState(null),[N,Z]=c.useState(null),[Is,fe]=c.useState(!1),[Rs,Ls]=c.useState(""),[Os,je]=c.useState(!1),[Us,Ms]=c.useState(""),[ke,Ya]=c.useState(h||[]),[B,zs]=c.useState(u||[]),[p,W]=c.useState({}),[Bs,P]=c.useState(!1),{toggleFavorite:Ws}=Da(),{addToast:Fe}=ia(),{data:Te,paginationState:Q,goToPage:Hs,refetch:_}=wa({endpoint:"/profile/listings",initialPage:1,initialPerPage:"5",initialSearch:"",initialFilters:{}}),oe=Te?.data||h||[],y=Te,Ie=s=>{const l=window.scrollY;Hs(s),setTimeout(()=>{window.scrollTo(0,l)},100)},Ks=s=>{console.log("Updating edit form data:",s),W(l=>{const j={...l,...s};return console.log("New edit form data:",j),j})};c.useEffect(()=>{console.log("Edit form data changed:",p)},[p]);const Vs=async s=>{try{await Ws(s),zs(l=>l?.filter(j=>j.id!==s)||[])}catch(l){console.error("Error removing from wishlist:",l)}},{data:U,setData:$,post:Gs,processing:Ja}=Ve({name_en:"",name_ar:"",email:"",phone:"",phone_whatsapp:"",bio_en:"",bio_ar:"",governorate_id:""});c.useEffect(()=>{t&&$({name_en:t.name_en||"",name_ar:t.name_ar||"",email:t.email||"",phone:t.phone||"",phone_whatsapp:t.phone_whatsapp||"",bio_en:t.bio_en||"",bio_ar:t.bio_ar||"",governorate_id:t.governorate?.id?.toString()||""})},[t,$]);const{data:Za,setData:Qa,post:Xa,processing:et}=Ve({plan_id:Pe||0}),qs=()=>{Gs("/profile",{onSuccess:()=>{A(!1)}})},Ys=async s=>{Ee(!0);try{const l=localStorage.getItem("authToken");if(!l)throw new Error("No authentication token found");const E=await(await fetch("/api/user/subscription/upgrade-from-profile",{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({subscription_plan_id:s})})).json();if(E.success)ge(!1),$e(void 0),Fe({type:"success",title:a==="ar"?"تم ترقية الاشتراك":"Subscription Upgraded",message:a==="ar"?"تم ترقية الاشتراك بنجاح":"Subscription upgraded successfully"}),window.location.reload();else throw new Error(E.message||"Upgrade failed")}catch(l){console.error("Upgrade failed:",l),Fe({type:"error",title:a==="ar"?"فشل في الترقية":"Upgrade Failed",message:a==="ar"?"فشل في ترقية الاشتراك":"Failed to upgrade subscription"})}finally{_(),Ee(!1)}},Re=s=>{g.delete(`/profile/ads/${s}`,{onSuccess:()=>{_()},onError:l=>{console.error("Failed to delete ad:",l)}})},Le=s=>{g.put(`/profile/ads/${s}`,{status:"expired"},{onSuccess:()=>{_()},onError:l=>{console.error("Failed to expire ad:",l)}})},Oe=s=>{g.put(`/profile/ads/${s}`,{status:"active"},{onSuccess:()=>{_()},onError:l=>{console.error("Failed to reactivate ad:",l)}})},Ue=s=>{g.put(`/profile/ads/${s}`,{status:"sold"},{onSuccess:()=>{_()},onError:l=>{console.error("Failed to mark ad as sold:",l)}})},Me=s=>{let l="";s.status==="inactive"?l=a==="ar"?"تم إلغاء تفعيل هذا الإعلان. يرجى التواصل مع الدعم الفني لإعادة تفعيله.":"This ad has been deactivated. Please contact support to reactivate it.":s.status==="expired"?l=a==="ar"?"انتهت صلاحية هذا الإعلان. يرجى التواصل مع الدعم الفني لإعادة تفعيله.":"This ad has expired. Please contact support to reactivate it.":l=a==="ar"?"هذا الإعلان غير نشط حالياً. يرجى التواصل مع الدعم الفني لإعادة تفعيله.":"This ad is currently inactive. Please contact support to reactivate it.",Ms(l),je(!0)},ze=s=>{g.post(`/profile/ads/${s}/feature`,{},{preserveScroll:!0,onSuccess:()=>{_()},onError:l=>{console.error("Failed to feature ad:",l)}})},Be=s=>{if(console.log("Editing ad:",s),s.status==="draft"){const j={category_id:s.category_id,title_en:s.title_en,title_ar:s.title_ar,description_en:s.description_en,description_ar:s.description_ar,product_details_en:s.product_details_en||"",product_details_ar:s.product_details_ar||"",condition_id:s.condition_id,governorate_id:s.governorate_id,price:s.price?.toString()||"",price_type_id:s.price_type_id,is_negotiable:s.is_negotiable||!1,images:s.images?.map(x=>x.url)||[],draftAdId:s.id,current_step:s.current_step||1};localStorage.setItem("sell-draft",JSON.stringify(j));const E={1:"category",2:"details",3:"subscription",4:"submitted"},Ne=s.current_step||1,X=E[Ne]||"details";g.visit(`/sell/${X}`);return}Z(s);const l={category_id:s.category_id,title_en:s.title_en,title_ar:s.title_ar,description_en:s.description_en,description_ar:s.description_ar,product_details_en:s.product_details_en||"",product_details_ar:s.product_details_ar||"",condition_id:s.condition_id,governorate_id:s.governorate_id,price:s.price?.toString()||"",price_type_id:s.price_type_id,is_negotiable:s.is_negotiable||!1,images:s.images?.map(j=>j.url)||[]};console.log("Form data:",l),W(l),O(!0)},Js=()=>{if(!N)return;P(!0);const s={category_id:p.category_id,title_en:p.title_en,title_ar:p.title_ar,description_en:p.description_en,description_ar:p.description_ar,product_details_en:p.product_details_en,product_details_ar:p.product_details_ar,condition_id:p.condition_id,governorate_id:p.governorate_id,price:p.price,price_type_id:p.price_type_id,is_negotiable:p.is_negotiable?"1":"0"};N.is_approved===!1&&(s.is_approved=null);const l=p.images&&p.images.some(x=>typeof x=="string"&&x.startsWith("data:image/")),j=!p.images||p.images.length===0,E=N.images?.map(x=>x.id)||[],Ne=p.images?.filter(x=>typeof x=="object"&&"id"in x).map(x=>x.id)||[],X=E.filter(x=>!Ne.includes(x));if(console.log(l,"hasNewImages"),l){const x=new FormData;Object.entries(s).forEach(([w,k])=>{k!=null&&x.append(w,k.toString())}),X.forEach((w,k)=>{x.append(`removed_images[${k}]`,w.toString())});let M=0;p.images?.forEach(w=>{if(typeof w=="string"&&w.startsWith("data:image/")){const k=atob(w.split(",")[1]),We=w.split(",")[0].split(":")[1].split(";")[0],He=new ArrayBuffer(k.length),Qs=new Uint8Array(He);for(let ce=0;ce<k.length;ce++)Qs[ce]=k.charCodeAt(ce);const Xs=new Blob([He],{type:We}),Ke=new File([Xs],`image_${M}.jpg`,{type:We});x.append(`images[${M}]`,Ke),M++,console.log("Added image:",Ke)}}),x.append("_method","PUT"),g.post(`/profile/ads/${N.id}`,x,{forceFormData:!0,onSuccess:()=>{P(!1),_(),O(!1),Z(null),W({})},onError:w=>{P(!1),console.error("Failed to update ad:",w)}})}else if(j&&N.images&&N.images.length>0){const x={...s,clear_images:!0};g.put(`/profile/ads/${N.id}`,x,{onSuccess:()=>{P(!1),_(),O(!1),Z(null),W({})},onError:M=>{P(!1),console.error("Failed to update ad:",M)}})}else if(X.length>0){const x={...s,removed_images:X};g.put(`/profile/ads/${N.id}`,x,{onSuccess:()=>{P(!1),_(),O(!1),Z(null),W({})},onError:M=>{P(!1),console.error("Failed to update ad:",M)}})}else g.put(`/profile/ads/${N.id}`,s,{onSuccess:()=>{P(!1),_(),O(!1),Z(null),W({})},onError:x=>{P(!1),console.error("Failed to update ad:",x)}})},I=s=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:0}).format(s),H=()=>!(!t?.subscription?.is_active||!t.subscription.plan.analytics),Zs=s=>s.status==="draft"?"draft":s.status==="active"&&s.is_approved===null?"pending":s.status==="active"&&s.is_approved===!1?"rejected":s.status==="active"&&s.is_approved===!0?"active":s.status,ve=s=>{const l=Zs(s),j={active:{color:"bg-green-100 text-green-800",text:a==="ar"?"نشط":"Active"},inactive:{color:"bg-gray-100 text-gray-800",text:a==="ar"?"غير نشط":"Inactive"},sold:{color:"bg-blue-100 text-blue-800",text:a==="ar"?"مباع":"Sold"},expired:{color:"bg-yellow-100 text-yellow-800",text:a==="ar"?"منتهي":"Expired"},draft:{color:"bg-gray-100 text-gray-800",text:a==="ar"?"مسودة":"Draft"},pending:{color:"bg-yellow-100 text-yellow-800",text:a==="ar"?"قيد المراجعة":"Under Review"},rejected:{color:"bg-red-100 text-red-800",text:a==="ar"?"مرفوض":"Rejected"}},E=j[l]||j.inactive;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:E.color,children:E.text}),l==="rejected"&&s.reject_reason&&e.jsx(m,{variant:"outline",size:"sm",onClick:()=>{Ls(s.reject_reason||""),fe(!0)},className:"text-xs",children:a==="ar"?"عرض السبب":"View Reason"})]})};if(o&&!S)return e.jsxs(es,{children:[e.jsx(Ge,{title:"Profile"}),e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(qe,{}),e.jsx("main",{className:"main-content py-16",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"mb-4 text-3xl font-bold",children:"Authentication Required"}),e.jsx("p",{className:"mb-6 text-gray-600",children:"Please log in to view your profile."}),e.jsx(m,{onClick:()=>Y(!0),children:"Login"})]})})}),e.jsx(Ye,{})]}),e.jsx(la,{isOpen:pe,onClose:()=>Y(!1),onSuccess:()=>{Y(!1),window.location.reload()}})]});if(!t){g.visit("/");return}return e.jsxs(es,{children:[e.jsx(Ge,{title:"Profile"}),e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(qe,{}),e.jsx("main",{className:"main-content py-16",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:`mb-8 ${a==="ar"?"rtl":""}`,children:[e.jsx("div",{className:"mb-4",children:e.jsxs(m,{variant:"outline",onClick:()=>g.visit("/"),className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-4 w-4"}),e.jsx("span",{className:a==="ar"?"font-arabic":"",children:a==="ar"?"العودة للرئيسية":"Go to Home"})]})}),e.jsxs("div",{className:"flex flex-col items-start gap-6 md:flex-row md:items-center",children:[e.jsxs(ba,{className:"h-24 w-24",children:[e.jsx(_a,{src:t.profile_picture_url}),e.jsx(ya,{className:"text-2xl",children:a==="ar"?t.name_ar[0]:t.name_en[0]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[e.jsx("h1",{className:`text-3xl font-bold ${a==="ar"?"font-arabic":"font-serif"}`,children:a==="ar"?t.name_ar:t.name_en}),e.jsxs(D,{className:"bg-green-100 text-green-800",children:[e.jsx(Ca,{className:"mr-1 h-3 w-3"}),a==="ar"?"موثق":"Verified"]}),t.subscription&&e.jsxs(D,{className:"bg-yellow-100 text-yellow-800",children:[e.jsx(me,{className:"mr-1 h-3 w-3"}),a==="ar"?t.subscription.plan.name_ar:t.subscription.plan.name_en]})]}),e.jsx("div",{className:"text-muted-foreground mb-4 flex items-center gap-6 text-sm",children:e.jsxs("span",{children:[a==="ar"?"عضو منذ":"Member since"," ",new Date(t.created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"})]})}),e.jsxs(ee,{open:J,onOpenChange:A,children:[e.jsx(Je,{asChild:!0,children:e.jsxs(m,{children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),a==="ar"?"تعديل الملف الشخصي":"Edit Profile"]})}),e.jsxs(se,{className:"max-w-2xl",children:[e.jsx(ae,{children:e.jsx(te,{children:a==="ar"?"تعديل الملف الشخصي":"Edit Profile"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"name_en",children:a==="ar"?"الاسم (إنجليزي)":"Name (English)"}),e.jsx(F,{id:"name_en",value:U.name_en,onChange:s=>$("name_en",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"name_ar",children:a==="ar"?"الاسم (عربي)":"Name (Arabic)"}),e.jsx(F,{id:"name_ar",value:U.name_ar,onChange:s=>$("name_ar",s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"email",children:a==="ar"?"البريد الإلكتروني":"Email"}),e.jsx(F,{id:"email",type:"email",value:U.email||"",onChange:s=>$("email",s.target.value),placeholder:a==="ar"?"أدخل البريد الإلكتروني (اختياري)":"Enter email (optional)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"phone",children:a==="ar"?"رقم الهاتف":"Phone"}),e.jsx(F,{id:"phone",value:U.phone,onChange:s=>$("phone",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"phone_whatsapp",children:a==="ar"?"واتساب":"WhatsApp"}),e.jsx(F,{id:"phone_whatsapp",value:U.phone_whatsapp,onChange:s=>$("phone_whatsapp",s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"bio_en",children:a==="ar"?"نبذة (إنجليزي)":"Bio (English)"}),e.jsx(Qe,{id:"bio_en",value:U.bio_en,onChange:s=>$("bio_en",s.target.value),rows:3})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"bio_ar",children:a==="ar"?"نبذة (عربي)":"Bio (Arabic)"}),e.jsx(Qe,{id:"bio_ar",value:U.bio_ar,onChange:s=>$("bio_ar",s.target.value),rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(m,{variant:"outline",onClick:()=>A(!1),children:a==="ar"?"إلغاء":"Cancel"}),e.jsx(m,{onClick:qs,children:a==="ar"?"حفظ":"Save"})]})]})]})]})]})]})]}),e.jsxs(na,{value:he,onValueChange:ne,className:a==="ar"?"rtl":"",children:[e.jsxs(oa,{className:"grid w-full grid-cols-5 lg:inline-flex lg:w-auto lg:grid-cols-none",children:[e.jsxs(re,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"نظرة عامة":"Overview"})]}),e.jsxs(re,{value:"wishlist",className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"المفضلة":"Wishlist"})]}),e.jsxs(re,{value:"listings",className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"إعلاناتي":"My Listings"})]}),e.jsxs(re,{value:"billing",className:"flex items-center gap-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"الفواتير":"Billing"})]}),e.jsxs(re,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="ar"?"الإعدادات":"Settings"})]})]}),e.jsxs(ie,{value:"overview",className:"mt-6",children:[e.jsxs("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(f,{children:e.jsxs(v,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:n?.active_listings??0}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"إعلان نشط":"Active Listings"})]})}),e.jsx(f,{children:e.jsxs(v,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:n?.total_sales??0}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"مبيعات مكتملة":"Total Sales"})]})}),e.jsx(f,{children:e.jsxs(v,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:H()?oe.reduce((s,l)=>s+(l.views_count||0),0):"-"}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"إجمالي المشاهدات":"Total Ad Views"})]})}),e.jsx(f,{children:e.jsxs(v,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:n?.wishlist_items??0}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"عنصر مفضل":"Wishlist Items"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs(f,{children:[e.jsx(K,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5"}),a==="ar"?"الإعلانات الأخيرة":"Recent Listings"]})}),e.jsx(v,{className:"space-y-4",children:ke.length>0?ke.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center overflow-hidden rounded bg-gray-100",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(G,{className:"h-6 w-6 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:a==="ar"?s.title_ar:s.title_en}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[I(s.price),H()&&e.jsxs(e.Fragment,{children:[" ","• ",s.views_count," ",a==="ar"?"مشاهدة":"views"]})]})]}),ve(s)]},s.id)):e.jsx("div",{className:"text-muted-foreground py-4 text-center",children:a==="ar"?"لا توجد إعلانات":"No listings yet"})})]}),e.jsxs(f,{children:[e.jsx(K,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),a==="ar"?"المفضلة الأخيرة":"Recent Wishlist"]})}),e.jsx(v,{className:"space-y-4",children:(B?.length??0)>0?B?.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center overflow-hidden rounded bg-gray-100",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(R,{className:"h-6 w-6 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:a==="ar"?s.title_ar:s.title_en}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[I(s.price)," • ",a==="ar"?"بواسطة":"by"," ",a==="ar"?s.user?.name_ar:s.user?.name_en]})]})]},s.id)):e.jsx("div",{className:"text-muted-foreground py-4 text-center",children:a==="ar"?"لا توجد عناصر في المفضلة":"No wishlist items yet"})})]})]})]}),e.jsxs(ie,{value:"wishlist",className:"mt-6",children:[e.jsx("div",{className:"hidden grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 md:grid",children:(B?.length??0)>0?B?.map(s=>e.jsxs(f,{className:"group cursor-pointer transition-all duration-300 hover:shadow-lg",onClick:()=>g.visit(`/product/${s.id}`),children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex h-48 w-full items-center justify-center overflow-hidden bg-gray-100",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(R,{className:"h-12 w-12 text-gray-400"})}),e.jsx(m,{variant:"outline",size:"icon",className:"absolute right-3 top-3 h-8 w-8 border-none bg-white/90 text-red-500 hover:bg-white",onClick:l=>{l.stopPropagation(),Vs(s.id)},children:e.jsx(R,{className:"h-4 w-4 fill-current"})})]}),e.jsxs(v,{className:"p-4",children:[e.jsx("h3",{className:"mb-2 line-clamp-2 font-semibold",children:a==="ar"?s.title_ar:s.title_en}),e.jsx("div",{className:"text-brand-red-600 mb-2 text-lg font-bold",children:I(s.price)}),e.jsx("div",{className:"text-muted-foreground mb-1 text-sm",children:e.jsx("span",{className:"font-medium",children:a==="ar"?s.category?.name_ar:s.category?.name_en})}),e.jsxs("div",{className:"text-muted-foreground text-sm",children:[a==="ar"?"بواسطة":"by"," ",a==="ar"?s.user?.name_ar:s.user?.name_en]})]})]},s.id)):e.jsxs("div",{className:"col-span-full py-12 text-center",children:[e.jsx(R,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:a==="ar"?"لا توجد عناصر في المفضلة":"No wishlist items"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a==="ar"?"ابدأ بإضافة المنتجات إلى مفضلتك":"Start adding products to your wishlist"}),e.jsx(m,{onClick:()=>g.visit("/products"),children:a==="ar"?"تصفح المنتجات":"Browse Products"})]})}),e.jsx("div",{className:"space-y-3 md:hidden",children:(B?.length??0)>0?B?.map(s=>e.jsx(f,{className:"group cursor-pointer transition-all duration-300 hover:shadow-lg active:scale-[0.98]",onClick:()=>g.visit(`/product/${s.id}`),children:e.jsxs("div",{className:"flex gap-3 p-3",children:[e.jsx("div",{className:"relative flex-shrink-0",children:e.jsx("div",{className:"h-20 w-20 items-center justify-center overflow-hidden rounded bg-gray-100 flex",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(R,{className:"h-8 w-8 text-gray-400"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-luxury-black line-clamp-2 text-sm font-semibold leading-tight",children:a==="ar"?s.title_ar:s.title_en}),e.jsx("p",{className:"text-muted-foreground text-xs mt-0.5",children:a==="ar"?s.category?.name_ar:s.category?.name_en})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-lg font-bold text-brand-red-600",children:I(s.price)}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:[a==="ar"?"بواسطة":"by"," ",a==="ar"?s.user?.name_ar:s.user?.name_en]})]})]})]})},s.id)):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(R,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:a==="ar"?"لا توجد عناصر في المفضلة":"No wishlist items"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a==="ar"?"ابدأ بإضافة المنتجات إلى مفضلتك":"Start adding products to your wishlist"}),e.jsx(m,{onClick:()=>g.visit("/products"),children:a==="ar"?"تصفح المنتجات":"Browse Products"})]})})]}),e.jsx(ie,{value:"listings",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs(m,{onClick:()=>{localStorage.removeItem("sell-draft"),g.visit("/sell/category")},className:"bg-brand-red-600 hover:bg-brand-red-700",children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),a==="ar"?"إنشاء إعلان جديد":"Create New Listing"]})}),oe.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden space-y-4 md:block",children:oe.map(s=>e.jsx(f,{children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center overflow-hidden rounded bg-gray-100",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(G,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:a==="ar"?s.title_ar:s.title_en}),e.jsxs("div",{className:"flex items-center gap-2",children:[ve(s),s.is_featured&&e.jsxs(D,{className:"border-yellow-200 bg-yellow-100 text-yellow-800",children:[e.jsx(le,{className:"mr-1 h-3 w-3"}),a==="ar"?"مميز":"Featured"]})]})]}),e.jsxs("div",{className:"text-muted-foreground mb-3 flex items-center gap-6 text-sm",children:[e.jsx("span",{className:"text-lg font-bold",children:I(s.price)}),H()&&e.jsxs("span",{children:[s.views_count," ",a==="ar"?"مشاهدة":"views"]}),H()&&e.jsxs("span",{children:[s.contact_count," ",a==="ar"?"اتصال":"contacts"]}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex gap-2",children:[s.status!=="sold"&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Be(s),children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),a==="ar"?"تعديل":"Edit"]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>ze(s.id),className:s.is_featured?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"",children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),s.is_featured?a==="ar"?"إلغاء التمييز":"Unfeature":a==="ar"?"مميز":"Feature"]})]}),s.status==="active"&&e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Le(s.id),className:"text-orange-600 hover:text-orange-700",children:[e.jsx(as,{className:"mr-2 h-4 w-4"}),a==="ar"?"انتهاء":"Expire"]}),s.status==="expired"&&e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Oe(s.id),className:"text-green-600 hover:text-green-700",children:[e.jsx(Ze,{className:"mr-2 h-4 w-4"}),a==="ar"?"إعادة تفعيل":"Reactivate"]}),s.status==="inactive"&&e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Me(s),className:"text-gray-600 hover:text-gray-700",children:[e.jsx(ts,{className:"mr-2 h-4 w-4"}),a==="ar"?"عرض الرسالة":"View Message"]}),s.status==="active"&&s.is_approved===!0&&e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Ue(s.id),className:"text-blue-600 hover:text-blue-700",children:[e.jsx(is,{className:"mr-2 h-4 w-4"}),a==="ar"?"تم البيع":"Mark as Sold"]}),s.status!=="sold"&&e.jsxs(ls,{children:[e.jsx(ns,{asChild:!0,children:e.jsxs(m,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive",children:[e.jsx(rs,{className:"mr-2 h-4 w-4"}),a==="ar"?"حذف":"Delete"]})}),e.jsxs(_e,{children:[e.jsxs(ye,{children:[e.jsx(De,{children:a==="ar"?"تأكيد الحذف":"Confirm Delete"}),e.jsx(Ce,{children:a==="ar"?"هل أنت متأكد من أنك تريد حذف هذا الإعلان؟ لا يمكن التراجع عن هذا الإجراء.":"Are you sure you want to delete this ad? This action cannot be undone."})]}),e.jsxs(we,{children:[e.jsx(Ae,{children:a==="ar"?"إلغاء":"Cancel"}),e.jsx(Se,{onClick:()=>Re(s.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:a==="ar"?"حذف":"Delete"})]})]})]})]})]})]})})},s.id))}),e.jsx("div",{className:"space-y-3 md:hidden",children:oe.map(s=>e.jsx(f,{className:"group transition-all duration-300 hover:shadow-lg active:scale-[0.98]",children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"h-16 w-16 items-center justify-center overflow-hidden rounded bg-gray-100 flex",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"h-full w-full object-cover"}):e.jsx(G,{className:"h-6 w-6 text-gray-400"})}),s.is_featured&&e.jsxs(D,{className:"absolute -right-1 -top-1 border-yellow-200 bg-yellow-100 text-yellow-800 px-1.5 py-0.5 text-xs",children:[e.jsx(le,{className:"mr-0.5 h-2.5 w-2.5"}),a==="ar"?"مميز":"Featured"]})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"mb-2 flex items-start justify-between",children:e.jsxs("div",{className:"min-w-0 flex-1 pr-2",children:[e.jsx("h3",{className:"text-luxury-black line-clamp-2 text-sm font-semibold leading-tight",children:a==="ar"?s.title_ar:s.title_en}),e.jsx("div",{className:"mt-1 flex items-center gap-2",children:ve(s)})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-lg font-bold text-brand-red-600",children:I(s.price)}),e.jsxs("div",{className:"text-muted-foreground flex items-center gap-4 text-xs",children:[H()&&e.jsxs("span",{children:[s.views_count," ",a==="ar"?"مشاهدة":"views"]}),H()&&e.jsxs("span",{children:[s.contact_count," ",a==="ar"?"اتصال":"contacts"]}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]}),s.status!=="sold"&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsxs(m,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 h-7",onClick:()=>Be(s),children:[e.jsx(de,{className:"mr-1 h-3 w-3"}),a==="ar"?"تعديل":"Edit"]}),e.jsxs(m,{variant:"outline",size:"sm",className:`text-xs px-2 py-1 h-7 ${s.is_featured?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":""}`,onClick:()=>ze(s.id),children:[e.jsx(le,{className:"mr-1 h-3 w-3"}),s.is_featured?a==="ar"?"إلغاء":"Unfeature":a==="ar"?"مميز":"Feature"]}),s.status==="active"&&e.jsxs(m,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 h-7 text-orange-600 hover:text-orange-700",onClick:()=>Le(s.id),children:[e.jsx(as,{className:"mr-1 h-3 w-3"}),a==="ar"?"انتهاء":"Expire"]}),s.status==="expired"&&e.jsxs(m,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 h-7 text-green-600 hover:text-green-700",onClick:()=>Oe(s.id),children:[e.jsx(Ze,{className:"mr-1 h-3 w-3"}),a==="ar"?"إعادة":"Reactivate"]}),s.status==="inactive"&&e.jsxs(m,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 h-7 text-gray-600 hover:text-gray-700",onClick:()=>Me(s),children:[e.jsx(ts,{className:"mr-1 h-3 w-3"}),a==="ar"?"عرض":"View"]}),s.status==="active"&&s.is_approved===!0&&e.jsxs(m,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 h-7 text-blue-600 hover:text-blue-700",onClick:()=>Ue(s.id),children:[e.jsx(is,{className:"mr-1 h-3 w-3"}),a==="ar"?"تم البيع":"Sold"]}),e.jsxs(ls,{children:[e.jsx(ns,{asChild:!0,children:e.jsxs(m,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 h-7 text-destructive hover:text-destructive",children:[e.jsx(rs,{className:"mr-1 h-3 w-3"}),a==="ar"?"حذف":"Delete"]})}),e.jsxs(_e,{children:[e.jsxs(ye,{children:[e.jsx(De,{children:a==="ar"?"تأكيد الحذف":"Confirm Delete"}),e.jsx(Ce,{children:a==="ar"?"هل أنت متأكد من أنك تريد حذف هذا الإعلان؟ لا يمكن التراجع عن هذا الإجراء.":"Are you sure you want to delete this ad? This action cannot be undone."})]}),e.jsxs(we,{children:[e.jsx(Ae,{children:a==="ar"?"إلغاء":"Cancel"}),e.jsx(Se,{onClick:()=>Re(s.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:a==="ar"?"حذف":"Delete"})]})]})]})]})]})]})]})})},s.id))}),y&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?`عرض ${y.from||0} إلى ${y.to||0} من ${y.total||0} إعلان`:`Showing ${y.from||0} to ${y.to||0} of ${y.total||0} listings`}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>Ie(Q.currentPage-1),disabled:Q.currentPage<=1,children:a==="ar"?"السابق":"Previous"}),e.jsx("span",{className:"text-sm",children:a==="ar"?`صفحة ${Q.currentPage} من ${y.last_page}`:`Page ${Q.currentPage} of ${y.last_page}`}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>Ie(Q.currentPage+1),disabled:!y.next_page_url,children:a==="ar"?"التالي":"Next"})]})]})]}):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(G,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:a==="ar"?"لا توجد إعلانات":"No listings yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a==="ar"?"ابدأ بإنشاء إعلانك الأول":"Start by creating your first listing"}),e.jsx(m,{onClick:()=>{localStorage.removeItem("sell-draft"),g.visit("/sell/category")},children:a==="ar"?"إنشاء إعلان":"Create Listing"})]})]})}),e.jsx(ie,{value:"billing",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs(f,{children:[e.jsx(K,{children:e.jsx(V,{children:a==="ar"?"الخطة الحالية":"Current Plan"})}),e.jsxs(v,{className:"space-y-4",children:[t.subscription?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:a==="ar"?t.subscription.plan.name_ar:t.subscription.plan.name_en}),e.jsxs("div",{className:"text-muted-foreground text-sm",children:[I(t.subscription.plan.price)," /"," ",t.subscription.plan.is_lifetime?a==="ar"?"مدى الحياة":"Lifetime":`${t.subscription.plan.months_count} ${a==="ar"?"شهر":"months"}`]})]}),e.jsxs(D,{className:t.subscription.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:[e.jsx(me,{className:"mr-1 h-3 w-3"}),t.subscription.is_active?a==="ar"?"نشط":"Active":a==="ar"?"منتهي":"Expired"]})]}),t.subscription.expires_at&&e.jsxs("div",{className:"text-muted-foreground text-sm",children:[a==="ar"?"ينتهي في":"Expires on"," ",new Date(t.subscription.expires_at).toLocaleDateString()]})]}):e.jsxs("div",{className:"py-4 text-center",children:[e.jsx(me,{className:"mx-auto mb-2 h-8 w-8 text-gray-400"}),e.jsx("p",{className:"text-muted-foreground",children:a==="ar"?"لا توجد خطة نشطة":"No active subscription"})]}),t.subscription?e.jsxs(ee,{open:ue,onOpenChange:ge,children:[e.jsx(Je,{asChild:!0,children:e.jsx(m,{className:"w-full",children:a==="ar"?"ترقية الاشتراك":"Upgrade Subscription"})}),e.jsxs(se,{className:"max-h-[80vh] max-w-4xl overflow-y-auto",children:[e.jsx(ae,{children:e.jsx(te,{children:a==="ar"?"ترقية الاشتراك":"Upgrade Subscription"})}),e.jsx("div",{className:"py-4",children:t?.subscription&&e.jsx(Ea,{currentSubscription:{created_at:t.subscription.created_at,id:t.subscription.id,plan:t.subscription.plan,expires_at:t.subscription.expires_at,subscription_plan_id:t.subscription.id,analytics:t.subscription.plan.analytics||!1},onPlanSelect:$e,selectedPlanId:Pe,onUpgrade:Ys,isUpgrading:Ts})}),e.jsx(be,{children:e.jsx(m,{variant:"outline",onClick:()=>ge(!1),children:a==="ar"?"إلغاء":"Cancel"})})]})]}):e.jsx(e.Fragment,{})]})]}),e.jsxs(f,{children:[e.jsx(K,{children:e.jsx(V,{children:a==="ar"?"سجل المعاملات":"Transaction History"})}),e.jsx(v,{className:"space-y-4",children:(C?.length??0)>0?e.jsx("div",{className:"space-y-3",children:C?.map((s,l)=>e.jsxs("div",{className:"flex items-center justify-between border-b py-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.description}),e.jsxs("div",{className:"text-muted-foreground flex items-center gap-2 text-sm",children:[e.jsx("span",{children:new Date(s.date).toLocaleDateString()}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:s.payment_method}),s.subscription_plan&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:a==="ar"?s.subscription_plan.name_ar:s.subscription_plan.name_en})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold",children:I(s.amount)}),e.jsx("div",{className:`text-xs ${s.status==="completed"?"text-green-600":s.status==="pending"?"text-yellow-600":s.status==="failed"?"text-red-600":"text-gray-600"}`,children:s.status==="completed"?a==="ar"?"مكتمل":"Completed":s.status==="pending"?a==="ar"?"معلق":"Pending":s.status==="failed"?a==="ar"?"فشل":"Failed":s.status})]})]},s.id||l))}):e.jsxs("div",{className:"py-4 text-center",children:[e.jsx(ss,{className:"mx-auto mb-2 h-8 w-8 text-gray-400"}),e.jsx("p",{className:"text-muted-foreground",children:a==="ar"?"لا توجد معاملات":"No transactions yet"})]})})]})]})}),e.jsx(ie,{value:"settings",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs(f,{children:[e.jsx(K,{children:e.jsx(V,{children:a==="ar"?"معلومات الحساب":"Account Information"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"name",children:a==="ar"?"الاسم":"Name"}),e.jsx(F,{id:"name",value:a==="ar"?t.name_ar:t.name_en,disabled:!0})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"email",children:a==="ar"?"البريد الإلكتروني":"Email"}),e.jsx(F,{id:"email",type:"email",value:t.email||(a==="ar"?"غير محدد":"Not set"),disabled:!0})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"phone",children:a==="ar"?"رقم الهاتف":"Phone Number"}),e.jsx(F,{id:"phone",value:t.phone||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"governorate",children:a==="ar"?"المحافظة":"Governorate"}),e.jsx(F,{id:"governorate",value:t.governorate?a==="ar"?t.governorate.name_ar:t.governorate.name_en:"",disabled:!0})]}),e.jsxs(m,{onClick:()=>A(!0),className:"w-full",children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),a==="ar"?"تعديل الملف الشخصي":"Edit Profile"]})]})]}),e.jsxs(f,{children:[e.jsx(K,{children:e.jsx(V,{children:a==="ar"?"التفضيلات":"Preferences"})}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a==="ar"?"اللغة":"Language"}),e.jsx("div",{className:"text-muted-foreground text-sm",children:a==="ar"?"العربية":"English"})]}),e.jsx(m,{variant:"outline",onClick:z,children:a==="ar"?"English":"العربية"})]}),e.jsx("div",{className:"border-t pt-6",children:e.jsxs(m,{variant:"outline",onClick:()=>xe(),className:"text-destructive hover:text-destructive hover:bg-destructive/10 w-full",children:[e.jsx(Pa,{className:"mr-2 h-4 w-4"}),a==="ar"?"تسجيل الخروج":"Logout"]})})]})]})]})})]})]})}),e.jsx(Ye,{}),e.jsx(ee,{open:Fs,onOpenChange:O,children:e.jsxs(se,{className:"flex max-h-[90vh] max-w-4xl flex-col rounded-lg p-0",children:[e.jsx(ae,{className:"bg-background flex-shrink-0 rounded-t-lg border-b p-6",children:e.jsx(te,{children:a==="ar"?"تعديل الإعلان":"Edit Ad"})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx(ma,{formData:p,updateFormData:Ks,isSubmitting:Bs})}),e.jsxs("div",{className:"bg-background flex flex-shrink-0 justify-end gap-2 rounded-b-lg border-t p-6",children:[e.jsx(m,{variant:"outline",onClick:()=>O(!1),children:a==="ar"?"إلغاء":"Cancel"}),e.jsx(m,{onClick:Js,children:N&&N.is_approved===!1?a==="ar"?"حفظ وإرسال للمراجعة":"Save and Send to Review":a==="ar"?"حفظ التغييرات":"Save Changes"})]})]})}),e.jsx(ee,{open:Is,onOpenChange:fe,children:e.jsxs(se,{className:"max-w-md",children:[e.jsx(ae,{children:e.jsx(te,{children:a==="ar"?"سبب الرفض":"Rejection Reason"})}),e.jsx("div",{className:"py-4",children:e.jsx("p",{className:"text-muted-foreground text-sm",children:Rs})}),e.jsx(be,{children:e.jsx(m,{onClick:()=>fe(!1),children:a==="ar"?"إغلاق":"Close"})})]})}),e.jsx(ee,{open:Os,onOpenChange:je,children:e.jsxs(se,{className:"max-w-md",children:[e.jsx(ae,{children:e.jsx(te,{children:a==="ar"?"رسالة الإعلان غير النشط":"Inactive Ad Message"})}),e.jsxs("div",{className:"py-4",children:[e.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:Us}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("p",{className:"text-muted-foreground text-xs",children:a==="ar"?"لإعادة تفعيل هذا الإعلان، يرجى التواصل معنا على: live-musamemat@support.com":"To reactivate this ad, please contact us at: live-musamemat@support.com"})})]}),e.jsx(be,{children:e.jsx(m,{onClick:()=>je(!1),children:a==="ar"?"إغلاق":"Close"})})]})})]})]})}export{Bt as default};
