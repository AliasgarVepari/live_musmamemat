import{r as x,j as e,H as C,b as n}from"./app-CaN-xYic.js";import{A as D,U as _,C as k}from"./app-layout-zxP5MNfS.js";import{C as P,a as S,b as T,c as $}from"./card-CwqFA_JV.js";import{B as r}from"./button-D1YNv0sD.js";import{B as o}from"./badge-CpdlJAUo.js";import{D as E,a as M,b as B,c as H,d as z,e as L,f as O}from"./dialog-DoGmIbSw.js";import{P as u}from"./plus-muT6zN0V.js";import{C as h}from"./crown-0PR5R7Xs.js";import{H as A}from"./headphones-gzfj0bbp.js";import{E as F}from"./eye-BfTnBSMw.js";import{S as U}from"./square-pen-BSI7Y6rE.js";import{a as q,T as I}from"./toggle-right-DQhuN9g8.js";import{T as R}from"./trash-2-BgnWzs90.js";import"./index-DMI-P2pj.js";import"./index-BfKaJeWX.js";import"./index-45MzjhqA.js";import"./chevron-right-MuSFvXPK.js";import"./index-BzxzYo7F.js";import"./index-DW9AIAM8.js";import"./base-layout-C6TfE5O9.js";/* empty css            */import"./use-forced-theme-BJCgaVA2.js";import"./settings-V1APQsdT.js";import"./logo-DB6pQEXk.js";import"./map-pin-t5ro6KcE.js";function fe({plans:m}){const[d,c]=x.useState(null),[g,l]=x.useState(!1),f=(s,i)=>{const a=document.querySelector(".error-dialog-overlay");a&&a.remove();const t=document.createElement("div");t.className="error-dialog-overlay fixed inset-0 z-50 flex items-center justify-center backdrop-blur-md bg-black/30",t.innerHTML=`
            <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4">
                <div class="p-6">
                    <div class="flex items-center mb-4">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
                            </svg>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-lg font-medium text-gray-900">${s}</h3>
                        </div>
                    </div>
                    <div class="mb-6">
                        <p class="text-sm text-gray-700">${i}</p>
                    </div>
                    <div class="flex justify-end">
                        <button 
                            onclick="this.closest('.error-dialog-overlay').remove()"
                            class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
                        >
                            OK
                        </button>
                    </div>
                </div>
            </div>
        `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)},p=s=>{switch(s){case"active":return e.jsx(o,{className:"bg-green-100 text-green-800",children:"Active"});case"inactive":return e.jsx(o,{className:"bg-orange-100 text-orange-800",children:"Suspended"});case"delete":return e.jsx(o,{className:"bg-red-100 text-red-800",children:"Deleted"});default:return e.jsx(o,{variant:"secondary",children:s})}},j=s=>e.jsx(o,{variant:"outline",children:s||"Monthly"}),v=(s,i)=>{const a=typeof s=="string"?parseFloat(s):s,t=i?i.toLowerCase():"month";return`$${a.toFixed(2)}/${t}`},b=s=>{n.patch(`/admin/subscription-plans/${s}/toggle`,{},{onError:i=>{Object.values(i).flat().join(", ")}})},N=s=>{c(s),l(!0)},w=()=>{l(!1),c(null)},y=()=>{d&&n.delete(`/admin/subscription-plans/${d}`,{onSuccess:()=>{l(!1),c(null)},onError:s=>{l(!1),c(null);const a=Object.values(s).flat().join(", ");f("Delete Error",a)}})};return e.jsxs(D,{children:[e.jsx(C,{title:"Subscription Plans"}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Subscription Plans"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage subscription plans, pricing, and features"})]}),e.jsxs(r,{onClick:()=>n.get("/admin/subscription-plans/create"),children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Create Plan"]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:m.map(s=>e.jsxs(P,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(S,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{className:"text-xl",children:s.name_en}),e.jsxs("div",{className:"flex items-center gap-2",children:[p(s.status),j(s.readable_billing_cycle)]})]}),e.jsx("div",{className:"text-3xl font-bold text-primary",children:v(s.price,s.readable_billing_cycle)})]}),e.jsxs($,{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(_,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[s.ad_limit," posts allowed"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(h,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.has_unlimited_featured_ads?"Unlimited featured posts":`${s.featured_ads_count||s.featured_ads} featured posts`})]}),s.analytics&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(k,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:"Analytics access"})]}),s.priority_support&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(A,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:"Priority support"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:s.description_en})]}),e.jsx("div",{className:"mt-auto pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>n.get(`/admin/subscription-plans/${s.id}`),children:e.jsx(F,{className:"h-4 w-4"})}),e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>n.get(`/admin/subscription-plans/${s.id}/edit`),children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>b(s.id),className:s.status==="inactive"?"text-orange-600 hover:text-orange-700":"text-green-600 hover:text-green-700",children:s.status==="active"?e.jsx(q,{className:"h-4 w-4"}):e.jsx(I,{className:"h-4 w-4"})}),e.jsxs(E,{open:g&&d===s.id,onOpenChange:l,children:[e.jsx(M,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>N(s.id),className:"text-destructive hover:text-destructive",children:e.jsx(R,{className:"h-4 w-4"})})}),e.jsxs(B,{className:"bg-white",children:[e.jsxs(H,{children:[e.jsx(z,{children:"Delete Subscription Plan"}),e.jsxs(L,{children:['Are you sure you want to delete "',s.name_en,'"? This action will revoke all active subscriptions for this plan and cannot be undone.']})]}),e.jsxs(O,{children:[e.jsx(r,{variant:"outline",onClick:w,children:"Cancel"}),e.jsx(r,{variant:"destructive",onClick:y,children:"Delete Plan"})]})]})]})]}),s.user_subscriptions_count!==void 0&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.user_subscriptions_count," subscribers"]})]})})]})]},s.id))}),m.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(h,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No subscription plans"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by creating your first subscription plan."}),e.jsxs(r,{onClick:()=>n.get("/admin/subscription-plans/create"),children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Create Plan"]})]})]})})]})}export{fe as default};
