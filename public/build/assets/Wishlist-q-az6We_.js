import{p as W,o as I,r as i,j as e,b as j}from"./app-CaN-xYic.js";import{H as f,F as N}from"./Header-C2L_n_nv.js";import{C as v,a as S}from"./card-v0XrAczD.js";import{B as r}from"./input-DdIw-NiU.js";import{H as t}from"./heart-DbnYQEG0.js";import{M as w}from"./map-pin-t5ro6KcE.js";import{C as b}from"./calendar-BxrMTywX.js";import{E as y}from"./eye-BfTnBSMw.js";import"./index-BfKaJeWX.js";import"./index-45MzjhqA.js";import"./useQuery-knfbtxRL.js";import"./phone-DAsX5GRT.js";import"./index-CPYxKaoZ.js";import"./index-DMI-P2pj.js";import"./index-XP1G8dWM.js";import"./index-QXMwrrJl.js";import"./check-BB4ewACF.js";import"./loader-circle-CTAfhQrl.js";import"./search-BG2_YFSf.js";import"./user-Rp6R3Ey3.js";const U=()=>{const{language:a}=W(),{isAuthenticated:n}=I(),[o,c]=i.useState([]),[_,d]=i.useState(!0),[m,x]=i.useState(null);i.useEffect(()=>{n?k():d(!1)},[n]);const k=async()=>{try{const s=await fetch("/api/user/favorites",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}});if(s.ok){const l=await s.json();c(l.data.data||[])}}catch(s){console.error("Error fetching wishlist:",s)}finally{d(!1)}},h=async s=>{x(s);try{(await fetch(`/api/user/products/${s}/favorite`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}})).ok&&c(C=>C.filter(E=>E.id!==s))}catch(l){console.error("Error removing from wishlist:",l)}finally{x(null)}},u=s=>{j.visit(`/product/${s}`)},g=s=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD"}).format(s),p=s=>new Date(s).toLocaleDateString(a==="ar"?"ar-KW":"en-KW");return n?e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(f,{}),e.jsx("main",{className:"py-16",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsx("h1",{className:"text-luxury-black mb-8 text-3xl font-bold",children:a==="ar"?"قائمة الأمنيات":"My Wishlist"}),_?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:a==="ar"?"جاري التحميل...":"Loading..."})}):o.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(t,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:a==="ar"?"قائمة الأمنيات فارغة":"Your wishlist is empty"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a==="ar"?"ابدأ بإضافة المنتجات التي تعجبك إلى قائمة الأمنيات":"Start adding products you like to your wishlist"}),e.jsx(r,{onClick:()=>j.visit("/products"),children:a==="ar"?"تصفح المنتجات":"Browse Products"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 md:grid",children:o.map(s=>e.jsxs(v,{className:"hover:shadow-lg group transition-all duration-300",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-48 w-full bg-gray-100 flex items-center justify-center overflow-hidden",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"w-full h-full object-cover"}):e.jsx(t,{className:"h-12 w-12 text-gray-400"})}),e.jsx(r,{variant:"outline",size:"icon",className:"absolute right-3 top-3 h-8 w-8 border-none bg-white/90 text-red-500 hover:bg-white",onClick:()=>h(s.id),disabled:m===s.id,children:e.jsx(t,{className:"h-4 w-4 fill-current"})})]}),e.jsxs(S,{className:"p-4",children:[e.jsx("h3",{className:"mb-2 font-semibold line-clamp-2",children:a==="ar"?s.title_ar:s.title_en}),e.jsx("div",{className:"mb-2 text-lg font-bold text-brand-red-600",children:g(s.price)}),e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:e.jsx("span",{className:"font-medium",children:a==="ar"?s.category.name_ar:s.category.name_en})}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-2",children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),a==="ar"?s.governorate.name_ar:s.governorate.name_en]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-4",children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),p(s.created_at)]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(r,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>u(s.id),children:[e.jsx(y,{className:"h-4 w-4 mr-1"}),a==="ar"?"عرض":"View"]})})]})]},s.id))}),e.jsx("div",{className:"space-y-3 md:hidden",children:o.map(s=>e.jsx(v,{className:"group transition-all duration-300 hover:shadow-lg active:scale-[0.98]",children:e.jsxs("div",{className:"flex gap-3 p-3",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"h-20 w-20 bg-gray-100 flex items-center justify-center overflow-hidden rounded-lg",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:a==="ar"?s.title_ar:s.title_en,className:"w-full h-full object-cover"}):e.jsx(t,{className:"h-8 w-8 text-gray-400"})}),e.jsx(r,{variant:"outline",size:"icon",className:"absolute -right-1 -top-1 h-6 w-6 border-none bg-white/90 text-red-500 hover:bg-white p-0",onClick:()=>h(s.id),disabled:m===s.id,children:e.jsx(t,{className:"h-3 w-3 fill-current"})})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-luxury-black line-clamp-2 text-sm font-semibold leading-tight",children:a==="ar"?s.title_ar:s.title_en}),e.jsx("p",{className:"text-muted-foreground text-xs mt-0.5",children:a==="ar"?s.category.name_ar:s.category.name_en})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-lg font-bold text-brand-red-600",children:g(s.price)}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(w,{className:"mr-1 h-3 w-3"}),a==="ar"?s.governorate.name_ar:s.governorate.name_en]}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(b,{className:"mr-1 h-3 w-3"}),p(s.created_at)]}),e.jsxs(r,{variant:"outline",size:"sm",className:"w-full text-xs",onClick:()=>u(s.id),children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),a==="ar"?"عرض":"View"]})]})]})]})},s.id))})]})]})}),e.jsx(N,{})]}):e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(f,{}),e.jsx("main",{className:"py-16",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:a==="ar"?"تسجيل الدخول مطلوب":"Login Required"}),e.jsx("p",{className:"text-muted-foreground",children:a==="ar"?"يجب عليك تسجيل الدخول لعرض قائمة الأمنيات":"Please login to view your wishlist"})]})})}),e.jsx(N,{})]})};export{U as default};
