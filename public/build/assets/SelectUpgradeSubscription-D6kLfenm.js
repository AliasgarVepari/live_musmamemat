import{b as ie,r as o,j as e,c as Z,n as ne,E as N,X as G}from"./app-CiN-z-mi.js";import{C as h,b as u,c as p,a as x}from"./card-BE5cRLBF.js";import{I as S,B as v,L as ue,a as L}from"./Header-BewtZrTA.js";import{S as O,a as H,b as M,c as F,d as V}from"./select-Cox-FdVi.js";import{R as ce,T as pe}from"./index-Dt5ocXHG.js";import{C as J}from"./check-DP3vZQ8y.js";import{P as ae}from"./plus-D85O9q-4.js";import{U as ge}from"./upload-BKxStYqZ.js";import{S as te}from"./star-ChLF59HA.js";import{C as be}from"./crown-CQOnRZo_.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Ie=ie("House",fe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ne=ie("Zap",je),X=o.forwardRef(({className:d,...m},t)=>e.jsx("textarea",{className:Z("flex min-h-[80px] w-full rounded-md border border-brand-red-200 bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-red-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",d),ref:t,...m}));X.displayName="Textarea";const de=o.forwardRef(({className:d,...m},t)=>e.jsx(ce,{className:Z("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:border-primary data-[state=unchecked]:bg-white data-[state=unchecked]:border-brand-red-200",d),...m,ref:t,children:e.jsx(pe,{className:Z("pointer-events-none block h-5 w-5 rounded-full shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=checked]:bg-white data-[state=unchecked]:translate-x-0 data-[state=unchecked]:bg-brand-red-600")})}));de.displayName=ce.displayName;const Ae=({formData:d,updateFormData:m,isSubmitting:t=!1})=>{const{language:r,t:Q}=ne(),[T,g]=o.useState(!1),[W,C]=o.useState(!1),[l,B]=o.useState({});o.useEffect(()=>{console.log("ProductDetails formData changed:",d)},[d]);const[y,P]=o.useState([]),[$,a]=o.useState([]),[n,w]=o.useState(""),[f,E]=o.useState(""),[U,Y]=o.useState([]),[R,D]=o.useState([]),[q,ee]=o.useState([]);o.useEffect(()=>{(async()=>{C(!0);try{const[i,c,_]=await Promise.all([fetch("/api/user/conditions"),fetch("/api/user/governorates"),fetch("/api/user/price-types")]),[b,A,k]=await Promise.all([i.json(),c.json(),_.json()]);Y(b.conditions||b||[]),D(A.governorates||A||[]),ee(k.priceTypes||k.price_types||k||[])}catch(i){console.error("Error loading data:",i),Y([]),D([]),ee([])}finally{C(!1)}})()},[]),o.useEffect(()=>{if(d.product_details_en){const s=d.product_details_en.split(`
`).filter(i=>i.trim());P(s)}if(d.product_details_ar){const s=d.product_details_ar.split(`
`).filter(i=>i.trim());a(s)}},[d.product_details_en,d.product_details_ar]);const se=async s=>{if(!s)return;const i=Array.from(s),c=d.images||[];if(c.length+i.length<=10){const b=await Promise.all(i.map(A=>new Promise(k=>{const z=new FileReader;z.onload=()=>k(z.result),z.readAsDataURL(A)})));m({images:[...c,...b]})}},le=s=>{const c=(d.images||[]).filter((_,b)=>b!==s);m({images:c})},oe=s=>{s.preventDefault(),g(!1),se(s.dataTransfer.files)},me=s=>{s.preventDefault(),g(!0)},he=s=>{s.preventDefault(),g(!1)},xe=(s,i)=>{const c={...l};switch(s){case"title_en":!i||i.trim().length<3?c.title_en=r==="ar"?"العنوان الإنجليزي مطلوب (3 أحرف على الأقل)":"English title is required (minimum 3 characters)":delete c.title_en;break;case"title_ar":!i||i.trim().length<3?c.title_ar=r==="ar"?"العنوان العربي مطلوب (3 أحرف على الأقل)":"Arabic title is required (minimum 3 characters)":delete c.title_ar;break;case"description_en":!i||i.trim().length<10?c.description_en=r==="ar"?"الوصف الإنجليزي مطلوب (10 أحرف على الأقل)":"English description is required (minimum 10 characters)":delete c.description_en;break;case"description_ar":!i||i.trim().length<10?c.description_ar=r==="ar"?"الوصف العربي مطلوب (10 أحرف على الأقل)":"Arabic description is required (minimum 10 characters)":delete c.description_ar;break;case"price":!i||isNaN(Number(i))||Number(i)<0?c.price=r==="ar"?"السعر مطلوب ويجب أن يكون رقم صحيح":"Price is required and must be a valid number":delete c.price;break;case"condition_id":i?delete c.condition_id:c.condition_id=r==="ar"?"حالة المنتج مطلوبة":"Product condition is required";break;case"governorate_id":i?delete c.governorate_id:c.governorate_id=r==="ar"?"الموقع مطلوب":"Location is required";break;case"price_type_id":i?delete c.price_type_id:c.price_type_id=r==="ar"?"نوع السعر مطلوب":"Price type is required";break}B(c)},j=(s,i)=>{console.log("ProductDetails handleInputChange:",s,i),m({[s]:i}),xe(s,i)},I=s=>{const i=s==="en"?n:f;if(i.trim())if(s==="en"){const c=[...y,i.trim()];P(c),w(""),m({product_details_en:c.join(`
`)})}else{const c=[...$,i.trim()];a(c),E(""),m({product_details_ar:c.join(`
`)})}},re=(s,i)=>{if(i==="en"){const c=y.filter((_,b)=>b!==s);P(c),m({product_details_en:c.join(`
`)})}else{const c=$.filter((_,b)=>b!==s);a(c),m({product_details_ar:c.join(`
`)})}},K=s=>r==="ar"?s.name_ar:s.name_en;return e.jsxs("div",{className:`space-y-6 ${r==="ar"?"rtl":"ltr"}`,children:[e.jsxs(h,{children:[e.jsx(u,{children:e.jsx(p,{className:r==="ar"?"font-arabic":"",children:r==="ar"?"عنوان المنتج (إنجليزي)":"Product Title (English)"})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{value:d.title_en||"",onChange:s=>j("title_en",s.target.value),placeholder:r==="ar"?"أدخل عنوان المنتج بالإنجليزية":"Enter product title in English",className:`border-brand-red-200 focus:border-brand-red-600 focus:ring-brand-red-600 ${l.title_en?"border-red-500":""}`}),l.title_en&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:l.title_en})]})]})})]}),e.jsxs(h,{children:[e.jsx(u,{children:e.jsx(p,{className:r==="ar"?"font-arabic":"",children:r==="ar"?"عنوان المنتج (عربي)":"Product Title (Arabic)"})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{value:d.title_ar||"",onChange:s=>j("title_ar",s.target.value),placeholder:r==="ar"?"أدخل عنوان المنتج بالعربية":"Enter product title in Arabic",className:`border-brand-red-200 focus:border-brand-red-600 focus:ring-brand-red-600 ${l.title_ar?"border-red-500":""}`,dir:"rtl"}),l.title_ar&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:l.title_ar})]})]})})]}),e.jsxs(h,{children:[e.jsx(u,{children:e.jsx(p,{className:r==="ar"?"font-arabic":"",children:r==="ar"?"وصف المنتج (إنجليزي)":"Product Description (English)"})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{value:d.description_en||"",onChange:s=>j("description_en",s.target.value),placeholder:r==="ar"?"أدخل وصف المنتج بالإنجليزية":"Enter product description in English",className:`border-brand-red-200 focus:border-brand-red-600 focus:ring-brand-red-600 ${l.description_en?"border-red-500":""}`,rows:4}),l.description_en&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:l.description_en})]})]})})]}),e.jsxs(h,{children:[e.jsx(u,{children:e.jsx(p,{className:r==="ar"?"font-arabic":"",children:r==="ar"?"وصف المنتج (عربي)":"Product Description (Arabic)"})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{value:d.description_ar||"",onChange:s=>j("description_ar",s.target.value),placeholder:r==="ar"?"أدخل وصف المنتج بالعربية":"Enter product description in Arabic",className:`border-brand-red-200 focus:border-brand-red-600 focus:ring-brand-red-600 ${l.description_ar?"border-red-500":""}`,rows:4,dir:"rtl"}),l.description_ar&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:l.description_ar})]})]})})]}),e.jsxs(h,{children:[e.jsx(u,{children:e.jsx(p,{className:r==="ar"?"font-arabic":"",children:r==="ar"?"تفاصيل المنتج (إنجليزي)":"Product Details (English)"})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:y.map((s,i)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(J,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"flex-1 text-sm",children:s}),e.jsx(v,{type:"button",variant:"ghost",size:"sm",onClick:()=>re(i,"en"),className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsx(G,{className:"h-4 w-4"})})]},i))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{value:n,onChange:s=>w(s.target.value),placeholder:r==="ar"?"أدخل تفصيل جديد":"Enter new detail",className:"flex-1 border-brand-red-200 focus:border-brand-red-600 focus:ring-brand-red-600",onKeyPress:s=>s.key==="Enter"&&I("en")}),e.jsx(v,{type:"button",onClick:()=>I("en"),className:"bg-brand-red-600 hover:bg-brand-red-700",disabled:!n.trim(),children:e.jsx(ae,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r==="ar"?"يمكنك إضافة تفاصيل مثل المواصفات، الأبعاد، الماركة، إلخ":"Add details like specifications, dimensions, brand, etc."})]})})]}),e.jsxs(h,{children:[e.jsx(u,{children:e.jsx(p,{className:r==="ar"?"font-arabic":"",children:r==="ar"?"تفاصيل المنتج (عربي)":"Product Details (Arabic)"})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:$.map((s,i)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(J,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),e.jsx("span",{className:`flex-1 text-sm ${r==="ar"?"font-arabic":""}`,children:s}),e.jsx(v,{type:"button",variant:"ghost",size:"sm",onClick:()=>re(i,"ar"),className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsx(G,{className:"h-4 w-4"})})]},i))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{value:f,onChange:s=>E(s.target.value),placeholder:r==="ar"?"أدخل تفصيل جديد":"Enter new detail",className:"flex-1 border-brand-red-200 focus:border-brand-red-600 focus:ring-brand-red-600",dir:"rtl",onKeyPress:s=>s.key==="Enter"&&I("ar")}),e.jsx(v,{type:"button",onClick:()=>I("ar"),className:"bg-brand-red-600 hover:bg-brand-red-700",disabled:!f.trim(),children:e.jsx(ae,{className:"h-4 w-4"})})]}),e.jsx("p",{className:`text-sm text-muted-foreground ${r==="ar"?"font-arabic":""}`,children:r==="ar"?"يمكنك إضافة تفاصيل مثل المواصفات، الأبعاد، الماركة، إلخ":"Add details like specifications, dimensions, brand, etc."})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(h,{children:[e.jsx(u,{children:e.jsx(p,{className:r==="ar"?"font-arabic":"",children:r==="ar"?"السعر":"Price"})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{type:"number",value:d.price||"",onChange:s=>j("price",s.target.value),placeholder:r==="ar"?"أدخل السعر":"Enter price",className:`border-brand-red-200 focus:border-brand-red-600 focus:ring-brand-red-600 ${l.price?"border-red-500":""}`,min:"0",step:"0.01"}),l.price&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:l.price})]})]})})]}),e.jsxs(h,{children:[e.jsx(u,{children:e.jsx(p,{className:r==="ar"?"font-arabic":"",children:r==="ar"?"حالة المنتج":"Product Condition"})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(O,{value:d.condition_id?.toString()||"",onValueChange:s=>j("condition_id",parseInt(s)),children:[e.jsx(H,{className:`border-brand-red-200 focus:border-brand-red-600 focus:ring-brand-red-600 ${l.condition_id?"border-red-500":""}`,children:e.jsx(M,{placeholder:r==="ar"?"اختر حالة المنتج":"Select condition"})}),e.jsx(F,{children:U&&U.length>0?U.map(s=>e.jsx(V,{value:s.id.toString(),children:K(s)},s.id)):e.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:r==="ar"?"جاري التحميل...":"Loading..."})})]}),l.condition_id&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:l.condition_id})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(h,{children:[e.jsx(u,{children:e.jsx(p,{className:r==="ar"?"font-arabic":"",children:r==="ar"?"الموقع":"Location"})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(O,{value:d.governorate_id?.toString()||"",onValueChange:s=>j("governorate_id",parseInt(s)),children:[e.jsx(H,{className:`border-brand-red-200 focus:border-brand-red-600 focus:ring-brand-red-600 ${l.governorate_id?"border-red-500":""}`,children:e.jsx(M,{placeholder:r==="ar"?"اختر الموقع":"Select location"})}),e.jsx(F,{children:R&&R.length>0?R.map(s=>e.jsx(V,{value:s.id.toString(),children:K(s)},s.id)):e.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:r==="ar"?"جاري التحميل...":"Loading..."})})]}),l.governorate_id&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:l.governorate_id})]})]})})]}),e.jsxs(h,{children:[e.jsx(u,{children:e.jsx(p,{className:r==="ar"?"font-arabic":"",children:r==="ar"?"نوع السعر":"Price Type"})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(O,{value:d.price_type_id?.toString()||"",onValueChange:s=>j("price_type_id",parseInt(s)),children:[e.jsx(H,{className:`border-brand-red-200 focus:border-brand-red-600 focus:ring-brand-red-600 ${l.price_type_id?"border-red-500":""}`,children:e.jsx(M,{placeholder:r==="ar"?"اختر نوع السعر":"Select price type"})}),e.jsx(F,{children:q&&q.length>0?q.map(s=>e.jsx(V,{value:s.id.toString(),children:K(s)},s.id)):e.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:r==="ar"?"جاري التحميل...":"Loading..."})})]}),l.price_type_id&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:l.price_type_id})]})]})})]})]}),e.jsxs(h,{children:[e.jsx(u,{children:e.jsx(p,{className:r==="ar"?"font-arabic":"",children:r==="ar"?"السعر قابل للتفاوض":"Price Negotiable"})}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"negotiable",checked:d.is_negotiable||!1,onCheckedChange:s=>j("is_negotiable",s)}),e.jsx(ue,{htmlFor:"negotiable",className:r==="ar"?"font-arabic":"",children:r==="ar"?"السعر قابل للتفاوض":"Price is negotiable"})]})})]}),e.jsxs(h,{children:[e.jsx(u,{children:e.jsx(p,{className:r==="ar"?"font-arabic":"",children:r==="ar"?"صور المنتج":"Product Images"})}),e.jsxs(x,{children:[e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${T?"border-primary bg-primary/5":!d.images||d.images.length===0?"border-amber-300 bg-amber-50":"border-muted-foreground/25"}`,onDrop:oe,onDragOver:me,onDragLeave:he,children:[e.jsx(ge,{className:`mx-auto h-12 w-12 mb-4 ${!d.images||d.images.length===0?"text-amber-500":"text-muted-foreground"}`}),e.jsx("p",{className:`text-lg font-medium mb-2 ${r==="ar"?"font-arabic":""} ${!d.images||d.images.length===0?"text-amber-700":""}`,children:r==="ar"?"اسحب الصور هنا أو انقر للرفع":"Drag images here or click to upload"}),e.jsx("p",{className:`text-sm text-muted-foreground mb-4 ${r==="ar"?"font-arabic":""}`,children:r==="ar"?"PNG, JPG, GIF حتى 5MB لكل صورة":"PNG, JPG, GIF up to 5MB each"}),e.jsx("input",{type:"file",multiple:!0,accept:".jpeg,.jpg,.png,.gif",onChange:s=>se(s.target.files),className:"hidden",id:"image-upload"}),e.jsx(v,{asChild:!0,children:e.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer",children:r==="ar"?"اختر الصور":"Choose Images"})})]}),(!d.images||d.images.length===0)&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-amber-600",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{className:r==="ar"?"font-arabic":"",children:r==="ar"?"يجب رفع صورة واحدة على الأقل":"At least one image is required"})]}),d.images&&d.images.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:`text-sm font-medium mb-3 ${r==="ar"?"font-arabic":""}`,children:r==="ar"?"الصور المرفوعة":"Uploaded Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:d.images.map((s,i)=>{const c=s instanceof File?URL.createObjectURL(s):s;return e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:c,alt:`Preview ${i+1}`,className:"w-full h-24 object-cover rounded-lg",onError:_=>{_.currentTarget.style.display="none"}}),e.jsx(v,{size:"sm",variant:"destructive",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0 opacity-100 transition-opacity hover:opacity-90",onClick:()=>le(i),children:e.jsx(G,{className:"h-3 w-3"})})]},i)})})]})]})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),e.jsx("p",{className:`text-lg font-medium ${r==="ar"?"font-arabic":""}`,children:r==="ar"?"جاري المعالجة...":"Processing..."}),e.jsx("p",{className:`text-sm text-muted-foreground text-center ${r==="ar"?"font-arabic":""}`,children:r==="ar"?"يرجى الانتظار بينما نقوم بحفظ إعلانك":"Please wait while we save your listing"})]})})]})},Le=({formData:d,updateFormData:m})=>{const{language:t,t:r}=ne(),[Q,T]=o.useState([]),[g,W]=o.useState(null),[C,l]=o.useState(!0);o.useEffect(()=>{console.log("SelectUpgradeSubscription"),(async()=>{try{const n=localStorage.getItem("authToken");if(!n)return;const f=await(await fetch("/api/user/subscription-plans/upgrade-options",{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).json();f.success&&(T(f.data||[]),W(f.current_plan))}catch(n){console.error("Error loading upgrade plans:",n)}finally{l(!1)}})()},[]);const B=a=>{m({subscription_plan_id:a})},y=a=>t==="ar"?a.name_ar:a.name_en,P=a=>{const n=[];return a.ad_limit>0&&(t==="ar"?n.push(`${a.ad_limit} إعلان شهرياً`):n.push(`${a.ad_limit} ads per month`)),a.has_unlimited_featured_ads?t==="ar"?n.push("إعلانات مميزة غير محدودة"):n.push("Unlimited featured ads"):a.featured_ads_count&&a.featured_ads_count>0&&(t==="ar"?n.push(`${a.featured_ads_count} إعلان مميز`):n.push(`${a.featured_ads_count} featured ads`)),a.priority_support&&(t==="ar"?n.push("دعم أولوي"):n.push("Priority support")),a.analytics&&(t==="ar"?n.push("تحليلات متقدمة"):n.push("Advanced analytics")),a.readable_billing_cycle&&(t==="ar"?n.push(`دورة فوترة: ${a.readable_billing_cycle}`):n.push(`Billing: ${a.readable_billing_cycle}`)),a.is_lifetime&&(t==="ar"?n.push("اشتراك مدى الحياة"):n.push("Lifetime subscription")),n.length===0&&(t==="ar"?(n.push("إعلانات أساسية"),n.push("دعم قياسي")):(n.push("Basic listings"),n.push("Standard support"))),n},$=a=>{const n=y(a).toLowerCase();return n.includes("free")||n.includes("مجاني")?Ne:n.includes("silver")||n.includes("فضي")?te:n.includes("gold")||n.includes("ذهبي")?be:te};return C?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:t==="ar"?"font-arabic":"",children:t==="ar"?"جاري تحميل خطط الترقية...":"Loading upgrade plans..."})]})}):e.jsxs("div",{className:`flex flex-col h-full ${t==="ar"?"rtl":"ltr"}`,children:[e.jsxs("div",{className:"flex-1 space-y-6",children:[g&&e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:`text-lg font-semibold mb-3 ${t==="ar"?"font-arabic":""}`,children:t==="ar"?"خطة الاشتراك الحالية":"Current Subscription Plan"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-medium text-lg ${t==="ar"?"font-arabic":""}`,children:t==="ar"?g.name_ar:g.name_en}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx("p",{className:`text-sm text-muted-foreground ${t==="ar"?"font-arabic":""}`,children:t==="ar"?`${g.ad_limit} إعلان شهرياً`:`${g.ad_limit} ads per month`}),e.jsxs("p",{className:`text-sm font-medium ${t==="ar"?"font-arabic":""}`,children:["KD ",g.price]})]})]}),e.jsx(L,{variant:"outline",className:"ml-4",children:t==="ar"?"نشط":"Active"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Q.map(a=>{$(a);const n=d.subscription_plan_id===a.id,w=P(a);return e.jsx(h,{className:`flex flex-col h-full cursor-pointer transition-all hover:shadow-lg ${n?"ring-2 ring-primary border-primary":"hover:border-primary/50"}`,onClick:()=>B(a.id),children:e.jsxs(x,{className:"p-6 flex flex-col h-full",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h4",{className:`text-lg font-semibold mb-1 ${t==="ar"?"font-arabic":""}`,children:y(a)}),(a.description_en||a.description_ar)&&e.jsx("p",{className:`text-sm text-muted-foreground mb-3 ${t==="ar"?"font-arabic":""}`,children:t==="ar"?a.description_ar:a.description_en}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[a.is_current_lifetime?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:`text-2xl font-bold ${t==="ar"?"font-arabic":""}`,children:a.price===0?t==="ar"?"مجاني":"Free":`KD ${a.price}`}),e.jsx(L,{variant:"outline",className:"mt-1 text-xs",children:t==="ar"?"لا يوجد خصم للخطط الدائمة":"No discount for lifetime plans"})]}):a.discounted_price!==void 0&&a.discounted_price<a.price?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-2xl font-bold text-green-600 ${t==="ar"?"font-arabic":""}`,children:["KD ",a.discounted_price]}),e.jsxs("span",{className:`text-lg line-through text-muted-foreground ${t==="ar"?"font-arabic":""}`,children:["KD ",a.price]})]}),e.jsx(L,{variant:"destructive",className:"mt-1",children:t==="ar"?`وفر KD ${a.discount_amount}`:`Save KD ${a.discount_amount}`})]}):e.jsx("span",{className:`text-2xl font-bold ${t==="ar"?"font-arabic":""}`,children:a.price===0?t==="ar"?"مجاني":"Free":`KD ${a.price}`}),a.price>0&&e.jsx("span",{className:`text-sm text-muted-foreground ${t==="ar"?"font-arabic":""}`,children:a.is_lifetime?t==="ar"?"مدى الحياة":"Lifetime":`/${a.months_count} ${t==="ar"?"شهر":"months"}`})]}),a.price>0&&e.jsx(L,{variant:"secondary",className:"mb-4",children:t==="ar"?"مدفوع":"Paid"})]}),w.length>0&&e.jsx("ul",{className:"space-y-2 flex-1",children:w.map((f,E)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:`text-sm ${t==="ar"?"font-arabic":""}`,children:f.trim()})]},E))}),e.jsx(v,{className:`w-full mt-4 ${n?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-primary hover:text-primary-foreground"}`,variant:n?"default":"outline",children:n?t==="ar"?"محدد":"Selected":t==="ar"?"اختر هذه الخطة":"Select This Plan"})]})},a.id)})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:`text-sm text-muted-foreground ${t==="ar"?"font-arabic":""}`,children:t==="ar"?"سيتم حساب الخصم بناءً على الأيام المتبقية في اشتراكك الحالي":"Discount will be calculated based on remaining days in your current subscription"})})]})};export{Ie as H,Ae as P,Le as S,X as T,Ne as Z};
