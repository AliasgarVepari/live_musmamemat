import{r as c,a as L,b as m,j as e,H as M,L as h}from"./app-CYM3PNp1.js";import{B as u}from"./badge-Diu093LN.js";import{B as i}from"./button-C7nw6qcu.js";import{C as f,a as g,b as v,c as p,d as G}from"./card-fs3rVVQQ.js";import{I as _}from"./input-DXQNqKBk.js";import{C as I}from"./confirmation-dialog-DSGL3xnI.js";import{A}from"./app-layout-3e2Nwvxm.js";import{P as j}from"./plus-CetcI2CD.js";import{S as E}from"./search-CV99GWnC.js";import{M as N}from"./map-pin--_Eww1hY.js";import{a as B,T as P}from"./toggle-right-BT29Rz9l.js";import{S as $}from"./square-pen-DSGZj8Uk.js";import{T as z}from"./trash-2-DoNEwY_E.js";import"./index-5_OapAfH.js";import"./dialog-D6gXA9tz.js";import"./index-lGUcocfo.js";import"./chevron-right-rarKV8wF.js";import"./index-dfFKHXjz.js";import"./index-DW9AIAM8.js";import"./base-layout-CEx8z9PL.js";/* empty css            */import"./use-forced-theme-Bq8pa95d.js";import"./settings-BDBjvKmM.js";import"./logo-DB6pQEXk.js";import"./crown-Bbso2q9j.js";const F=[{title:"Master Module",href:"/admin/master"},{title:"Governorates",href:"/admin/governorates"}];function xe({governorates:b,filters:C}){const[n,w]=c.useState(""),[a,S]=c.useState(C?.status||"all"),[l,x]=c.useState({open:!1,title:"",description:"",onConfirm:()=>{}}),{url:y}=L();c.useEffect(()=>{localStorage.getItem("admin-governorates-refresh")==="true"&&(localStorage.removeItem("admin-governorates-refresh"),setTimeout(()=>{m.reload({only:["governorates"]})},100))},[y]);const T=s=>{x({open:!0,title:"Delete Governorate",description:"Are you sure you want to delete this governorate? This action cannot be undone.",onConfirm:()=>{m.delete(`/admin/governorates/${s}`,{onSuccess:()=>{localStorage.setItem("admin-governorates-refresh","true")},preserveScroll:!0,onError:t=>{const r=Object.values(t).flat().join(", ");D("Cannot Delete Governorate",r)}})}})},D=(s,t)=>{const o=document.querySelector(".error-dialog-overlay");o&&o.remove();const r=document.createElement("div");r.className="error-dialog-overlay",r.innerHTML=`
            <div class="error-dialog-content">
                <div class="error-dialog-header">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <svg class="error-dialog-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
                            </svg>
                        </div>
                        <div class="error-dialog-title">${s}</div>
                    </div>
                    <div class="error-dialog-message">${t}</div>
                </div>
                <div class="error-dialog-footer p-6 pt-0">
                    <button 
                        onclick="this.closest('.error-dialog-overlay').remove()"
                        class="error-dialog-button"
                    >
                        OK
                    </button>
                </div>
            </div>
        `,document.body.appendChild(r),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r)},1e4)},k=s=>{m.patch(`/admin/governorates/${s}/toggle`,{},{onSuccess:()=>{localStorage.setItem("admin-governorates-refresh","true")},preserveState:!0,preserveScroll:!0})},d=(b?.data||[]).filter(s=>{const t=s.name_en.toLowerCase().includes(n.toLowerCase())||s.name_ar.toLowerCase().includes(n.toLowerCase()),o=a==="all"||a==="active"&&s.is_active||a==="inactive"&&!s.is_active;return t&&o});return e.jsxs(A,{breadcrumbs:F,children:[e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Governorates Management"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Governorates"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage Kuwait governorates for location selection"})]}),e.jsx(h,{href:"/admin/governorates/create",children:e.jsxs(i,{children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Add Governorate"]})})]}),e.jsxs(f,{children:[e.jsx(g,{children:e.jsx(v,{className:"text-lg",children:"Filters"})}),e.jsx(p,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"text-muted-foreground absolute left-3 top-3 h-4 w-4"}),e.jsx(_,{placeholder:"Search governorates...",value:n,onChange:s=>w(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs("select",{value:a,onChange:s=>S(s.target.value),className:"border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-md border px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"all",children:"All statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})})]}),e.jsxs(f,{children:[e.jsxs(g,{children:[e.jsxs(v,{children:["Governorates (",d.length,")"]}),e.jsx(G,{children:"Manage Kuwait governorates for location selection"})]}),e.jsx(p,{children:d.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(N,{className:"text-muted-foreground mx-auto mb-4 h-12 w-12"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:"No governorates found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:n||a?"Try adjusting your filters to see more results.":"Get started by adding your first governorate."}),e.jsx(h,{href:"/admin/governorates/create",children:e.jsxs(i,{children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Add Governorate"]})})]}):e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsxs("div",{className:"hover:bg-muted/50 flex items-center justify-between rounded-lg border p-4 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-2xl",children:e.jsx(N,{className:"h-6 w-6 text-green-500"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-semibold",children:s.name_en}),e.jsxs("span",{className:"text-muted-foreground",children:["(",s.name_ar,")"]}),s.is_active?e.jsx(u,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"}):e.jsx(u,{variant:"secondary",children:"Inactive"})]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Created ",new Date(s.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>k(s.id),children:s.is_active?e.jsx(B,{className:"h-4 w-4 text-green-500"}):e.jsx(P,{className:"h-4 w-4 text-gray-400"})}),e.jsx(h,{href:`/admin/governorates/${s.id}/edit`,children:e.jsx(i,{variant:"ghost",size:"sm",children:e.jsx($,{className:"h-4 w-4"})})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>T(s.id),className:"text-red-600 hover:text-red-800",children:e.jsx(z,{className:"h-4 w-4"})})]})]},s.id))})})]})]})]}),e.jsx(I,{open:l.open,onOpenChange:s=>x(t=>({...t,open:s})),title:l.title,description:l.description,onConfirm:l.onConfirm,confirmText:"Delete",cancelText:"Cancel"})]})}export{xe as default};
