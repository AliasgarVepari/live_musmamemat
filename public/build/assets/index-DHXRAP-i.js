import{r as m,j as e,H as w,b as r}from"./app-BFw6crce.js";import{A as y,U as D,C as _}from"./app-layout-BQqLmhiR.js";import{C as P,a as S,b as T,c as k}from"./card-KOH_yNsI.js";import{B as t}from"./button-BY0ac9k0.js";import{B as n}from"./badge-51q0YhAN.js";import{D as $,a as B,b as E,c as H,d as M,e as A,f as O}from"./dialog-BD5R73NQ.js";import{u as z}from"./use-error-handler-DGPoNltV.js";import{P as x}from"./plus-BH9LLzfR.js";import{C as u}from"./crown--DHapRJn.js";import{H as F}from"./headphones-D_jr34M1.js";import{E as L}from"./eye-BVn2BuGn.js";import{S as U}from"./square-pen-w3w0oyHU.js";import{a as I,T as R}from"./toggle-right-Bqzv5Yyu.js";import{T as q}from"./trash-2-RvYWrrC6.js";import"./index-DLMo7saC.js";import"./index-D0M1C5f8.js";import"./chevron-right-D8KfAi0Y.js";import"./index-zS-_QWp1.js";import"./index-DW9AIAM8.js";import"./base-layout-CvSYQlx-.js";/* empty css            */import"./use-forced-theme-D4zww-dL.js";import"./settings-fj9JBxk_.js";import"./logo-DB6pQEXk.js";import"./map-pin-D0BPMaHw.js";function je({plans:o}){const[c,l]=m.useState(null),[h,a]=m.useState(!1);z();const g=s=>{switch(s){case"active":return e.jsx(n,{className:"bg-green-100 text-green-800",children:"Active"});case"inactive":return e.jsx(n,{className:"bg-orange-100 text-orange-800",children:"Suspended"});case"delete":return e.jsx(n,{className:"bg-red-100 text-red-800",children:"Deleted"});default:return e.jsx(n,{variant:"secondary",children:s})}},j=s=>e.jsx(n,{variant:"outline",children:s||"Monthly"}),p=(s,i)=>{const d=typeof s=="string"?parseFloat(s):s,C=i?i.toLowerCase():"month";return`$${d.toFixed(2)}/${C}`},f=s=>{r.patch(`/admin/subscription-plans/${s}/toggle`,{},{onError:i=>{Object.values(i).flat().join(", ")}})},N=s=>{l(s),a(!0)},v=()=>{a(!1),l(null)},b=()=>{c&&r.delete(`/admin/subscription-plans/${c}`,{onSuccess:()=>{a(!1),l(null)},onError:s=>{a(!1),l(null),Object.values(s).flat().join(", ")}})};return e.jsxs(y,{children:[e.jsx(w,{title:"Subscription Plans"}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Subscription Plans"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage subscription plans, pricing, and features"})]}),e.jsxs(t,{onClick:()=>r.get("/admin/subscription-plans/create"),children:[e.jsx(x,{className:"mr-2 h-4 w-4"}),"Create Plan"]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:o.map(s=>e.jsxs(P,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(S,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{className:"text-xl",children:s.name_en}),e.jsxs("div",{className:"flex items-center gap-2",children:[g(s.status),j(s.readable_billing_cycle)]})]}),e.jsx("div",{className:"text-3xl font-bold text-primary",children:p(s.price,s.readable_billing_cycle)})]}),e.jsxs(k,{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(D,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[s.ad_limit," posts allowed"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(u,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.has_unlimited_featured_ads?"Unlimited featured posts":`${s.featured_ads_count||s.featured_ads} featured posts`})]}),s.analytics&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(_,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:"Analytics access"})]}),s.priority_support&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(F,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:"Priority support"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:s.description_en})]}),e.jsx("div",{className:"mt-auto pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>r.get(`/admin/subscription-plans/${s.id}`),children:e.jsx(L,{className:"h-4 w-4"})}),e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>r.get(`/admin/subscription-plans/${s.id}/edit`),children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>f(s.id),className:s.status==="inactive"?"text-orange-600 hover:text-orange-700":"text-green-600 hover:text-green-700",children:s.status==="active"?e.jsx(I,{className:"h-4 w-4"}):e.jsx(R,{className:"h-4 w-4"})}),e.jsxs($,{open:h&&c===s.id,onOpenChange:a,children:[e.jsx(B,{asChild:!0,children:e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>N(s.id),className:"text-destructive hover:text-destructive",children:e.jsx(q,{className:"h-4 w-4"})})}),e.jsxs(E,{className:"bg-white",children:[e.jsxs(H,{children:[e.jsx(M,{children:"Delete Subscription Plan"}),e.jsxs(A,{children:['Are you sure you want to delete "',s.name_en,'"? This action will revoke all active subscriptions for this plan and cannot be undone.']})]}),e.jsxs(O,{children:[e.jsx(t,{variant:"outline",onClick:v,children:"Cancel"}),e.jsx(t,{variant:"destructive",onClick:b,children:"Delete Plan"})]})]})]})]}),s.user_subscriptions_count!==void 0&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.user_subscriptions_count," subscribers"]})]})})]})]},s.id))}),o.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(u,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No subscription plans"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by creating your first subscription plan."}),e.jsxs(t,{onClick:()=>r.get("/admin/subscription-plans/create"),children:[e.jsx(x,{className:"mr-2 h-4 w-4"}),"Create Plan"]})]})]})})]})}export{je as default};
