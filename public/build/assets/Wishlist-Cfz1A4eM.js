import{n as k,m as C,r as t,j as e,b as x}from"./app-Bky3aKG0.js";import{H as h,F as u,B as i}from"./Header-BtWNsmRr.js";import{C as E,a as W}from"./card-BlhqPTpq.js";import{H as l}from"./heart-CtjN82X_.js";import{M as _}from"./map-pin-CL942ZEc.js";import{C as S}from"./calendar-BU0Bf1-3.js";import{E as L}from"./eye-B_J2DF-M.js";import"./index-UaqzrlZK.js";import"./index-vqdhYpvm.js";import"./useQuery-vI502B-c.js";import"./phone-C-FX1PaL.js";import"./index-DZQJ5K-c.js";import"./index-DFEAPXS3.js";import"./index-B55r3Rxw.js";import"./check-BmkPoAXu.js";import"./loader-circle-B83uHJcq.js";import"./search-DbkSQsHM.js";import"./user-BsPIJ7c5.js";const O=()=>{const{language:r}=k(),{isAuthenticated:o}=C(),[n,c]=t.useState([]),[p,m]=t.useState(!0),[g,d]=t.useState(null);t.useEffect(()=>{o?f():m(!1)},[o]);const f=async()=>{try{const s=await fetch("/api/user/favorites",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}});if(s.ok){const a=await s.json();c(a.data.data||[])}}catch(s){console.error("Error fetching wishlist:",s)}finally{m(!1)}},j=async s=>{d(s);try{(await fetch(`/api/user/products/${s}/favorite`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}})).ok&&c(w=>w.filter(y=>y.id!==s))}catch(a){console.error("Error removing from wishlist:",a)}finally{d(null)}},N=s=>{x.visit(`/product/${s}`)},v=s=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD"}).format(s),b=s=>new Date(s).toLocaleDateString(r==="ar"?"ar-KW":"en-KW");return o?e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(h,{}),e.jsx("main",{className:"py-16",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsx("h1",{className:"text-luxury-black mb-8 text-3xl font-bold",children:r==="ar"?"قائمة الأمنيات":"My Wishlist"}),p?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:r==="ar"?"جاري التحميل...":"Loading..."})}):n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(l,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:r==="ar"?"قائمة الأمنيات فارغة":"Your wishlist is empty"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:r==="ar"?"ابدأ بإضافة المنتجات التي تعجبك إلى قائمة الأمنيات":"Start adding products you like to your wishlist"}),e.jsx(i,{onClick:()=>x.visit("/products"),children:r==="ar"?"تصفح المنتجات":"Browse Products"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:n.map(s=>e.jsxs(E,{className:"hover:shadow-lg group transition-all duration-300",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-48 w-full bg-gray-100 flex items-center justify-center overflow-hidden",children:s.primaryImage?e.jsx("img",{src:s.primaryImage.url,alt:r==="ar"?s.title_ar:s.title_en,className:"w-full h-full object-cover"}):e.jsx(l,{className:"h-12 w-12 text-gray-400"})}),e.jsx(i,{variant:"outline",size:"icon",className:"absolute right-3 top-3 h-8 w-8 border-none bg-white/90 text-red-500 hover:bg-white",onClick:()=>j(s.id),disabled:g===s.id,children:e.jsx(l,{className:"h-4 w-4 fill-current"})})]}),e.jsxs(W,{className:"p-4",children:[e.jsx("h3",{className:"mb-2 font-semibold line-clamp-2",children:r==="ar"?s.title_ar:s.title_en}),e.jsx("div",{className:"mb-2 text-lg font-bold text-brand-red-600",children:v(s.price)}),e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:e.jsx("span",{className:"font-medium",children:r==="ar"?s.category.name_ar:s.category.name_en})}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-2",children:[e.jsx(_,{className:"h-4 w-4 mr-1"}),r==="ar"?s.governorate.name_ar:s.governorate.name_en]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-4",children:[e.jsx(S,{className:"h-4 w-4 mr-1"}),b(s.created_at)]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(i,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>N(s.id),children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),r==="ar"?"عرض":"View"]})})]})]},s.id))})]})}),e.jsx(u,{})]}):e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx(h,{}),e.jsx("main",{className:"py-16",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:r==="ar"?"تسجيل الدخول مطلوب":"Login Required"}),e.jsx("p",{className:"text-muted-foreground",children:r==="ar"?"يجب عليك تسجيل الدخول لعرض قائمة الأمنيات":"Please login to view your wishlist"})]})})}),e.jsx(u,{})]})};export{O as default};
